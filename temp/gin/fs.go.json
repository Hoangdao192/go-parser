{"children":[],"start":168,"end":1119,"code":"package gin\n\nimport (\n\t\"net/http\"\n\t\"os\"\n)\n\ntype onlyFilesFS struct{ fs http.FileSystem }\ntype neuteredReaddirFile struct{ http.File }\n\nfunc Dir(root string, listDirectory bool) http.FileSystem {\n\tfs := http.Dir(root)\n\tif listDirectory {\n\t\treturn fs\n\t}\n\treturn \u0026onlyFilesFS{fs}\n}\nfunc (fs onlyFilesFS) Open(name string) (http.File, error) {\n\tf, err := fs.fs.Open(name)\n\tif err != nil {\n\t\treturn nil, err\n\t}\n\treturn neuteredReaddirFile{f}, nil\n}\nfunc (f neuteredReaddirFile) Readdir(_ int) ([]os.FileInfo, error) {\n\treturn nil, nil\n}\n","nodeType":"File","column":0,"line":0,"doc":null,"package":168,"name":{"children":[],"start":176,"end":179,"code":"gin","nodeType":"Identifier","column":0,"line":0,"namePos":176,"name":"gin","object":null},"declarations":[{"children":[],"start":181,"end":209,"code":"import (\n\t\"net/http\"\n\t\"os\"\n)","nodeType":"GenericDeclaration","column":0,"line":0,"doc":null,"tokenPosition":181,"token":75,"lparen":188,"specifications":[{"children":[],"start":191,"end":201,"code":"\"net/http\"","nodeType":"ImportSpecification","column":0,"line":0,"doc":null,"name":null,"path":{"children":[],"start":191,"end":201,"code":"\"net/http\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":191,"kind":9,"value":"\"net/http\""},"comment":null,"endPosition":0},{"children":[],"start":203,"end":207,"code":"\"os\"","nodeType":"ImportSpecification","column":0,"line":0,"doc":null,"name":null,"path":{"children":[],"start":203,"end":207,"code":"\"os\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":203,"kind":9,"value":"\"os\""},"comment":null,"endPosition":0}],"rparen":208},{"children":[],"start":211,"end":258,"code":"type onlyFilesFS struct{ fs http.FileSystem }","nodeType":"GenericDeclaration","column":0,"line":0,"doc":null,"tokenPosition":211,"token":84,"lparen":0,"specifications":[{"children":[],"start":216,"end":258,"code":"onlyFilesFS struct{ fs http.FileSystem }","nodeType":"TypeSpecification","column":0,"line":0,"doc":null,"name":{"children":[],"start":216,"end":227,"code":"onlyFilesFS","nodeType":"Identifier","column":0,"line":0,"namePos":216,"name":"onlyFilesFS","object":null},"typeParams":null,"assign":0,"type":{"children":[],"start":228,"end":258,"code":"struct{ fs http.FileSystem }","nodeType":"StructType","column":0,"line":0,"struct":228,"fields":{"children":[],"start":235,"end":258,"code":"","nodeType":"FieldList","column":0,"line":0,"opening":235,"list":[{"children":[],"start":238,"end":256,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":[{"children":[],"start":238,"end":240,"code":"fs","nodeType":"Identifier","column":0,"line":0,"namePos":238,"name":"fs","object":null}],"type":{"children":[],"start":241,"end":256,"code":"http.FileSystem","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":241,"end":245,"code":"http","nodeType":"Identifier","column":0,"line":0,"namePos":241,"name":"http","object":null},"sel":{"children":[],"start":246,"end":256,"code":"FileSystem","nodeType":"Identifier","column":0,"line":0,"namePos":246,"name":"FileSystem","object":null}},"tag":null,"comment":null}],"closing":257},"incomplete":false},"comment":null}],"rparen":0},{"children":[],"start":260,"end":306,"code":"type neuteredReaddirFile struct{ http.File }","nodeType":"GenericDeclaration","column":0,"line":0,"doc":null,"tokenPosition":260,"token":84,"lparen":0,"specifications":[{"children":[],"start":265,"end":306,"code":"neuteredReaddirFile struct{ http.File }","nodeType":"TypeSpecification","column":0,"line":0,"doc":null,"name":{"children":[],"start":265,"end":284,"code":"neuteredReaddirFile","nodeType":"Identifier","column":0,"line":0,"namePos":265,"name":"neuteredReaddirFile","object":null},"typeParams":null,"assign":0,"type":{"children":[],"start":285,"end":306,"code":"struct{ http.File }","nodeType":"StructType","column":0,"line":0,"struct":285,"fields":{"children":[],"start":292,"end":306,"code":"","nodeType":"FieldList","column":0,"line":0,"opening":292,"list":[{"children":[],"start":295,"end":304,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":null,"type":{"children":[],"start":295,"end":304,"code":"http.File","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":295,"end":299,"code":"http","nodeType":"Identifier","column":0,"line":0,"namePos":295,"name":"http","object":null},"sel":{"children":[],"start":300,"end":304,"code":"File","nodeType":"Identifier","column":0,"line":0,"namePos":300,"name":"File","object":null}},"tag":null,"comment":null}],"closing":305},"incomplete":false},"comment":null}],"rparen":0},{"children":[],"start":589,"end":732,"code":"func Dir(root string, listDirectory bool) http.FileSystem {\n\tfs := http.Dir(root)\n\tif listDirectory {\n\t\treturn fs\n\t}\n\treturn \u0026onlyFilesFS{fs}\n}","nodeType":"FunctionDeclaration","column":0,"line":0,"doc":null,"receiver":null,"name":{"children":[],"start":594,"end":597,"code":"Dir","nodeType":"Identifier","column":0,"line":0,"namePos":594,"name":"Dir","object":null},"type":{"children":[],"start":589,"end":646,"code":"func(root string, listDirectory bool) http.FileSystem","nodeType":"FunctionType","column":0,"line":0,"Function":589,"TypeParams":null,"Params":{"children":[],"start":597,"end":630,"code":"","nodeType":"FieldList","column":0,"line":0,"opening":597,"list":[{"children":[],"start":598,"end":609,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":[{"children":[],"start":598,"end":602,"code":"root","nodeType":"Identifier","column":0,"line":0,"namePos":598,"name":"root","object":null}],"type":{"children":[],"start":603,"end":609,"code":"string","nodeType":"Identifier","column":0,"line":0,"namePos":603,"name":"string","object":null},"tag":null,"comment":null},{"children":[],"start":611,"end":629,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":[{"children":[],"start":611,"end":624,"code":"listDirectory","nodeType":"Identifier","column":0,"line":0,"namePos":611,"name":"listDirectory","object":null}],"type":{"children":[],"start":625,"end":629,"code":"bool","nodeType":"Identifier","column":0,"line":0,"namePos":625,"name":"bool","object":null},"tag":null,"comment":null}],"closing":629},"Results":{"children":[],"start":631,"end":646,"code":"","nodeType":"FieldList","column":0,"line":0,"opening":0,"list":[{"children":[],"start":631,"end":646,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":null,"type":{"children":[],"start":631,"end":646,"code":"http.FileSystem","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":631,"end":635,"code":"http","nodeType":"Identifier","column":0,"line":0,"namePos":631,"name":"http","object":null},"sel":{"children":[],"start":636,"end":646,"code":"FileSystem","nodeType":"Identifier","column":0,"line":0,"namePos":636,"name":"FileSystem","object":null}},"tag":null,"comment":null}],"closing":0}},"body":{"children":[],"start":647,"end":732,"code":"{\n\tfs := http.Dir(root)\n\tif listDirectory {\n\t\treturn fs\n\t}\n\treturn \u0026onlyFilesFS{fs}\n}","nodeType":"BlockStatement","column":0,"line":0,"lbrace":647,"list":[{"children":[],"start":650,"end":670,"code":"fs := http.Dir(root)","nodeType":"AssignStatement","column":0,"line":0,"lhs":[{"children":[],"start":650,"end":652,"code":"fs","nodeType":"Identifier","column":0,"line":0,"namePos":650,"name":"fs","object":null}],"tokenPos":653,"token":47,"rhs":[{"children":[],"start":656,"end":670,"code":"http.Dir(root)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":656,"end":664,"code":"http.Dir","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":656,"end":660,"code":"http","nodeType":"Identifier","column":0,"line":0,"namePos":656,"name":"http","object":null},"sel":{"children":[],"start":661,"end":664,"code":"Dir","nodeType":"Identifier","column":0,"line":0,"namePos":661,"name":"Dir","object":null}},"lparen":0,"args":[{"children":[],"start":665,"end":669,"code":"root","nodeType":"Identifier","column":0,"line":0,"namePos":665,"name":"root","object":null}],"ellipsis":0,"rparen":0}]},{"children":[],"start":672,"end":705,"code":"if listDirectory {\n\treturn fs\n}","nodeType":"IfStatement","column":0,"line":0,"if":672,"initialization":null,"condition":{"children":[],"start":675,"end":688,"code":"listDirectory","nodeType":"Identifier","column":0,"line":0,"namePos":675,"name":"listDirectory","object":null},"body":{"children":[],"start":689,"end":705,"code":"{\n\treturn fs\n}","nodeType":"BlockStatement","column":0,"line":0,"lbrace":689,"list":[{"children":[],"start":693,"end":702,"code":"return fs","nodeType":"ReturnStatement","column":0,"line":0,"return":693,"results":[{"children":[],"start":700,"end":702,"code":"fs","nodeType":"Identifier","column":0,"line":0,"namePos":700,"name":"fs","object":null}]}],"rbrace":704},"else":null},{"children":[],"start":707,"end":730,"code":"return \u0026onlyFilesFS{fs}","nodeType":"ReturnStatement","column":0,"line":0,"return":707,"results":[{"children":[],"start":714,"end":730,"code":"\u0026onlyFilesFS{fs}","nodeType":"UnaryExpression","column":0,"line":0,"opPos":714,"op":17,"expression":{"children":[],"start":715,"end":730,"code":"onlyFilesFS{fs}","nodeType":"CompositeLiteral","column":0,"line":0,"type":{"children":[],"start":715,"end":726,"code":"onlyFilesFS","nodeType":"Identifier","column":0,"line":0,"namePos":715,"name":"onlyFilesFS","object":null},"lbrace":726,"elements":[{"children":[],"start":727,"end":729,"code":"fs","nodeType":"Identifier","column":0,"line":0,"namePos":727,"name":"fs","object":null}],"rbrace":729,"incomplete":false}}]}],"rbrace":731}},{"children":[],"start":771,"end":935,"code":"func (fs onlyFilesFS) Open(name string) (http.File, error) {\n\tf, err := fs.fs.Open(name)\n\tif err != nil {\n\t\treturn nil, err\n\t}\n\treturn neuteredReaddirFile{f}, nil\n}","nodeType":"FunctionDeclaration","column":0,"line":0,"doc":null,"receiver":{"children":[],"start":776,"end":792,"code":"","nodeType":"FieldList","column":0,"line":0,"opening":776,"list":[{"children":[],"start":777,"end":791,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":[{"children":[],"start":777,"end":779,"code":"fs","nodeType":"Identifier","column":0,"line":0,"namePos":777,"name":"fs","object":null}],"type":{"children":[],"start":780,"end":791,"code":"onlyFilesFS","nodeType":"Identifier","column":0,"line":0,"namePos":780,"name":"onlyFilesFS","object":null},"tag":null,"comment":null}],"closing":791},"name":{"children":[],"start":793,"end":797,"code":"Open","nodeType":"Identifier","column":0,"line":0,"namePos":793,"name":"Open","object":null},"type":{"children":[],"start":771,"end":829,"code":"func(name string) (http.File, error)","nodeType":"FunctionType","column":0,"line":0,"Function":771,"TypeParams":null,"Params":{"children":[],"start":797,"end":810,"code":"","nodeType":"FieldList","column":0,"line":0,"opening":797,"list":[{"children":[],"start":798,"end":809,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":[{"children":[],"start":798,"end":802,"code":"name","nodeType":"Identifier","column":0,"line":0,"namePos":798,"name":"name","object":null}],"type":{"children":[],"start":803,"end":809,"code":"string","nodeType":"Identifier","column":0,"line":0,"namePos":803,"name":"string","object":null},"tag":null,"comment":null}],"closing":809},"Results":{"children":[],"start":811,"end":829,"code":"","nodeType":"FieldList","column":0,"line":0,"opening":811,"list":[{"children":[],"start":812,"end":821,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":null,"type":{"children":[],"start":812,"end":821,"code":"http.File","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":812,"end":816,"code":"http","nodeType":"Identifier","column":0,"line":0,"namePos":812,"name":"http","object":null},"sel":{"children":[],"start":817,"end":821,"code":"File","nodeType":"Identifier","column":0,"line":0,"namePos":817,"name":"File","object":null}},"tag":null,"comment":null},{"children":[],"start":823,"end":828,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":null,"type":{"children":[],"start":823,"end":828,"code":"error","nodeType":"Identifier","column":0,"line":0,"namePos":823,"name":"error","object":null},"tag":null,"comment":null}],"closing":828}},"body":{"children":[],"start":830,"end":935,"code":"{\n\tf, err := fs.fs.Open(name)\n\tif err != nil {\n\t\treturn nil, err\n\t}\n\treturn neuteredReaddirFile{f}, nil\n}","nodeType":"BlockStatement","column":0,"line":0,"lbrace":830,"list":[{"children":[],"start":833,"end":859,"code":"f, err := fs.fs.Open(name)","nodeType":"AssignStatement","column":0,"line":0,"lhs":[{"children":[],"start":833,"end":834,"code":"f","nodeType":"Identifier","column":0,"line":0,"namePos":833,"name":"f","object":null},{"children":[],"start":836,"end":839,"code":"err","nodeType":"Identifier","column":0,"line":0,"namePos":836,"name":"err","object":null}],"tokenPos":840,"token":47,"rhs":[{"children":[],"start":843,"end":859,"code":"fs.fs.Open(name)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":843,"end":853,"code":"fs.fs.Open","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":843,"end":848,"code":"fs.fs","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":843,"end":845,"code":"fs","nodeType":"Identifier","column":0,"line":0,"namePos":843,"name":"fs","object":null},"sel":{"children":[],"start":846,"end":848,"code":"fs","nodeType":"Identifier","column":0,"line":0,"namePos":846,"name":"fs","object":null}},"sel":{"children":[],"start":849,"end":853,"code":"Open","nodeType":"Identifier","column":0,"line":0,"namePos":849,"name":"Open","object":null}},"lparen":0,"args":[{"children":[],"start":854,"end":858,"code":"name","nodeType":"Identifier","column":0,"line":0,"namePos":854,"name":"name","object":null}],"ellipsis":0,"rparen":0}]},{"children":[],"start":861,"end":897,"code":"if err != nil {\n\treturn nil, err\n}","nodeType":"IfStatement","column":0,"line":0,"if":861,"initialization":null,"condition":{"children":[],"start":864,"end":874,"code":"err != nil","nodeType":"BinaryExpression","column":0,"line":0,"leftExpression":{"children":[],"start":864,"end":867,"code":"err","nodeType":"Identifier","column":0,"line":0,"namePos":864,"name":"err","object":null},"opPos":868,"op":44,"rightExpression":{"children":[],"start":871,"end":874,"code":"nil","nodeType":"Identifier","column":0,"line":0,"namePos":871,"name":"nil","object":null}},"body":{"children":[],"start":875,"end":897,"code":"{\n\treturn nil, err\n}","nodeType":"BlockStatement","column":0,"line":0,"lbrace":875,"list":[{"children":[],"start":879,"end":894,"code":"return nil, err","nodeType":"ReturnStatement","column":0,"line":0,"return":879,"results":[{"children":[],"start":886,"end":889,"code":"nil","nodeType":"Identifier","column":0,"line":0,"namePos":886,"name":"nil","object":null},{"children":[],"start":891,"end":894,"code":"err","nodeType":"Identifier","column":0,"line":0,"namePos":891,"name":"err","object":null}]}],"rbrace":896},"else":null},{"children":[],"start":899,"end":933,"code":"return neuteredReaddirFile{f}, nil","nodeType":"ReturnStatement","column":0,"line":0,"return":899,"results":[{"children":[],"start":906,"end":928,"code":"neuteredReaddirFile{f}","nodeType":"CompositeLiteral","column":0,"line":0,"type":{"children":[],"start":906,"end":925,"code":"neuteredReaddirFile","nodeType":"Identifier","column":0,"line":0,"namePos":906,"name":"neuteredReaddirFile","object":null},"lbrace":925,"elements":[{"children":[],"start":926,"end":927,"code":"f","nodeType":"Identifier","column":0,"line":0,"namePos":926,"name":"f","object":null}],"rbrace":927,"incomplete":false},{"children":[],"start":930,"end":933,"code":"nil","nodeType":"Identifier","column":0,"line":0,"namePos":930,"name":"nil","object":null}]}],"rbrace":934}},{"children":[],"start":996,"end":1119,"code":"func (f neuteredReaddirFile) Readdir(_ int) ([]os.FileInfo, error) {\n\treturn nil, nil\n}","nodeType":"FunctionDeclaration","column":0,"line":0,"doc":null,"receiver":{"children":[],"start":1001,"end":1024,"code":"","nodeType":"FieldList","column":0,"line":0,"opening":1001,"list":[{"children":[],"start":1002,"end":1023,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":[{"children":[],"start":1002,"end":1003,"code":"f","nodeType":"Identifier","column":0,"line":0,"namePos":1002,"name":"f","object":null}],"type":{"children":[],"start":1004,"end":1023,"code":"neuteredReaddirFile","nodeType":"Identifier","column":0,"line":0,"namePos":1004,"name":"neuteredReaddirFile","object":null},"tag":null,"comment":null}],"closing":1023},"name":{"children":[],"start":1025,"end":1032,"code":"Readdir","nodeType":"Identifier","column":0,"line":0,"namePos":1025,"name":"Readdir","object":null},"type":{"children":[],"start":996,"end":1062,"code":"func(_ int) ([]os.FileInfo, error)","nodeType":"FunctionType","column":0,"line":0,"Function":996,"TypeParams":null,"Params":{"children":[],"start":1032,"end":1039,"code":"","nodeType":"FieldList","column":0,"line":0,"opening":1032,"list":[{"children":[],"start":1033,"end":1038,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":[{"children":[],"start":1033,"end":1034,"code":"_","nodeType":"Identifier","column":0,"line":0,"namePos":1033,"name":"_","object":null}],"type":{"children":[],"start":1035,"end":1038,"code":"int","nodeType":"Identifier","column":0,"line":0,"namePos":1035,"name":"int","object":null},"tag":null,"comment":null}],"closing":1038},"Results":{"children":[],"start":1040,"end":1062,"code":"","nodeType":"FieldList","column":0,"line":0,"opening":1040,"list":[{"children":[],"start":1041,"end":1054,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":null,"type":{"children":[],"start":1041,"end":1054,"code":"[]os.FileInfo","nodeType":"ArrayType","column":0,"line":0,"leftBracket":1041,"length":null,"element":{"children":[],"start":1043,"end":1054,"code":"os.FileInfo","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":1043,"end":1045,"code":"os","nodeType":"Identifier","column":0,"line":0,"namePos":1043,"name":"os","object":null},"sel":{"children":[],"start":1046,"end":1054,"code":"FileInfo","nodeType":"Identifier","column":0,"line":0,"namePos":1046,"name":"FileInfo","object":null}}},"tag":null,"comment":null},{"children":[],"start":1056,"end":1061,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":null,"type":{"children":[],"start":1056,"end":1061,"code":"error","nodeType":"Identifier","column":0,"line":0,"namePos":1056,"name":"error","object":null},"tag":null,"comment":null}],"closing":1061}},"body":{"children":[],"start":1063,"end":1119,"code":"{\n\treturn nil, nil\n}","nodeType":"BlockStatement","column":0,"line":0,"lbrace":1063,"list":[{"children":[],"start":1102,"end":1117,"code":"return nil, nil","nodeType":"ReturnStatement","column":0,"line":0,"return":1102,"results":[{"children":[],"start":1109,"end":1112,"code":"nil","nodeType":"Identifier","column":0,"line":0,"namePos":1109,"name":"nil","object":null},{"children":[],"start":1114,"end":1117,"code":"nil","nodeType":"Identifier","column":0,"line":0,"namePos":1114,"name":"nil","object":null}]}],"rbrace":1118}}],"fileStart":1,"fileEnd":1120,"scope":{"outer":null,"objects":null},"imports":[],"unresolved":[],"comments":[],"goVersion":""}