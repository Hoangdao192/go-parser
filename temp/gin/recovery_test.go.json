{"children":[],"start":168,"end":7005,"code":"package gin\n\nimport (\n\t\"fmt\"\n\t\"net\"\n\t\"net/http\"\n\t\"os\"\n\t\"strings\"\n\t\"syscall\"\n\t\"testing\"\n\t\"github.com/stretchr/testify/assert\"\n)\n\nfunc TestPanicClean(t *testing.T) {\n\tbuffer := new(strings.Builder)\n\trouter := New()\n\tpassword := \"my-super-secret-password\"\n\trouter.Use(RecoveryWithWriter(buffer))\n\trouter.GET(\"/recovery\", func(c *Context) {\n\t\tc.AbortWithStatus(http.StatusBadRequest)\n\t\tpanic(\"Oupps, Houston, we have a problem\")\n\t})\n\tw := PerformRequest(router, \"GET\", \"/recovery\", header{Key: \"Host\", Value: \"www.google.com\"}, header{Key: \"Authorization\", Value: fmt.Sprintf(\"Bearer %s\", password)}, header{Key: \"Content-Type\", Value: \"application/json\"})\n\tassert.Equal(t, http.StatusBadRequest, w.Code)\n\tassert.NotContains(t, buffer.String(), password)\n}\nfunc TestPanicInHandler(t *testing.T) {\n\tbuffer := new(strings.Builder)\n\trouter := New()\n\trouter.Use(RecoveryWithWriter(buffer))\n\trouter.GET(\"/recovery\", func(_ *Context) {\n\t\tpanic(\"Oupps, Houston, we have a problem\")\n\t})\n\tw := PerformRequest(router, \"GET\", \"/recovery\")\n\tassert.Equal(t, http.StatusInternalServerError, w.Code)\n\tassert.Contains(t, buffer.String(), \"panic recovered\")\n\tassert.Contains(t, buffer.String(), \"Oupps, Houston, we have a problem\")\n\tassert.Contains(t, buffer.String(), t.Name())\n\tassert.NotContains(t, buffer.String(), \"GET /recovery\")\n\tSetMode(DebugMode)\n\tw = PerformRequest(router, \"GET\", \"/recovery\")\n\tassert.Equal(t, http.StatusInternalServerError, w.Code)\n\tassert.Contains(t, buffer.String(), \"GET /recovery\")\n\tSetMode(TestMode)\n}\nfunc TestPanicWithAbort(t *testing.T) {\n\trouter := New()\n\trouter.Use(RecoveryWithWriter(nil))\n\trouter.GET(\"/recovery\", func(c *Context) {\n\t\tc.AbortWithStatus(http.StatusBadRequest)\n\t\tpanic(\"Oupps, Houston, we have a problem\")\n\t})\n\tw := PerformRequest(router, \"GET\", \"/recovery\")\n\tassert.Equal(t, http.StatusBadRequest, w.Code)\n}\nfunc TestSource(t *testing.T) {\n\tbs := source(nil, 0)\n\tassert.Equal(t, dunno, bs)\n\tin := [][]byte{[]byte(\"Hello world.\"), []byte(\"Hi, gin..\")}\n\tbs = source(in, 10)\n\tassert.Equal(t, dunno, bs)\n\tbs = source(in, 1)\n\tassert.Equal(t, []byte(\"Hello world.\"), bs)\n}\nfunc TestFunction(t *testing.T) {\n\tbs := function(1)\n\tassert.Equal(t, dunno, bs)\n}\nfunc TestPanicWithBrokenPipe(t *testing.T) {\n\tconst expectCode = 204\n\texpectMsgs := map[syscall.Errno]string{syscall.EPIPE: \"broken pipe\", syscall.ECONNRESET: \"connection reset by peer\"}\n\tfor errno, expectMsg := range expectMsgs {\n\t\tt.Run(expectMsg, func(t *testing.T) {\n\t\t\tvar buf strings.Builder\n\t\t\trouter := New()\n\t\t\trouter.Use(RecoveryWithWriter(\u0026buf))\n\t\t\trouter.GET(\"/recovery\", func(c *Context) {\n\t\t\t\tc.Header(\"X-Test\", \"Value\")\n\t\t\t\tc.Status(expectCode)\n\t\t\t\te := \u0026net.OpError{Err: \u0026os.SyscallError{Err: errno}}\n\t\t\t\tpanic(e)\n\t\t\t})\n\t\t\tw := PerformRequest(router, \"GET\", \"/recovery\")\n\t\t\tassert.Equal(t, expectCode, w.Code)\n\t\t\tassert.Contains(t, strings.ToLower(buf.String()), expectMsg)\n\t\t})\n\t}\n}\nfunc TestCustomRecoveryWithWriter(t *testing.T) {\n\terrBuffer := new(strings.Builder)\n\tbuffer := new(strings.Builder)\n\trouter := New()\n\thandleRecovery := func(c *Context, err any) {\n\t\terrBuffer.WriteString(err.(string))\n\t\tc.AbortWithStatus(http.StatusBadRequest)\n\t}\n\trouter.Use(CustomRecoveryWithWriter(buffer, handleRecovery))\n\trouter.GET(\"/recovery\", func(_ *Context) {\n\t\tpanic(\"Oupps, Houston, we have a problem\")\n\t})\n\tw := PerformRequest(router, \"GET\", \"/recovery\")\n\tassert.Equal(t, http.StatusBadRequest, w.Code)\n\tassert.Contains(t, buffer.String(), \"panic recovered\")\n\tassert.Contains(t, buffer.String(), \"Oupps, Houston, we have a problem\")\n\tassert.Contains(t, buffer.String(), t.Name())\n\tassert.NotContains(t, buffer.String(), \"GET /recovery\")\n\tSetMode(DebugMode)\n\tw = PerformRequest(router, \"GET\", \"/recovery\")\n\tassert.Equal(t, http.StatusBadRequest, w.Code)\n\tassert.Contains(t, buffer.String(), \"GET /recovery\")\n\tassert.Equal(t, strings.Repeat(\"Oupps, Houston, we have a problem\", 2), errBuffer.String())\n\tSetMode(TestMode)\n}\nfunc TestCustomRecovery(t *testing.T) {\n\terrBuffer := new(strings.Builder)\n\tbuffer := new(strings.Builder)\n\trouter := New()\n\tDefaultErrorWriter = buffer\n\thandleRecovery := func(c *Context, err any) {\n\t\terrBuffer.WriteString(err.(string))\n\t\tc.AbortWithStatus(http.StatusBadRequest)\n\t}\n\trouter.Use(CustomRecovery(handleRecovery))\n\trouter.GET(\"/recovery\", func(_ *Context) {\n\t\tpanic(\"Oupps, Houston, we have a problem\")\n\t})\n\tw := PerformRequest(router, \"GET\", \"/recovery\")\n\tassert.Equal(t, http.StatusBadRequest, w.Code)\n\tassert.Contains(t, buffer.String(), \"panic recovered\")\n\tassert.Contains(t, buffer.String(), \"Oupps, Houston, we have a problem\")\n\tassert.Contains(t, buffer.String(), t.Name())\n\tassert.NotContains(t, buffer.String(), \"GET /recovery\")\n\tSetMode(DebugMode)\n\tw = PerformRequest(router, \"GET\", \"/recovery\")\n\tassert.Equal(t, http.StatusBadRequest, w.Code)\n\tassert.Contains(t, buffer.String(), \"GET /recovery\")\n\tassert.Equal(t, strings.Repeat(\"Oupps, Houston, we have a problem\", 2), errBuffer.String())\n\tSetMode(TestMode)\n}\nfunc TestRecoveryWithWriterWithCustomRecovery(t *testing.T) {\n\terrBuffer := new(strings.Builder)\n\tbuffer := new(strings.Builder)\n\trouter := New()\n\tDefaultErrorWriter = buffer\n\thandleRecovery := func(c *Context, err any) {\n\t\terrBuffer.WriteString(err.(string))\n\t\tc.AbortWithStatus(http.StatusBadRequest)\n\t}\n\trouter.Use(RecoveryWithWriter(DefaultErrorWriter, handleRecovery))\n\trouter.GET(\"/recovery\", func(_ *Context) {\n\t\tpanic(\"Oupps, Houston, we have a problem\")\n\t})\n\tw := PerformRequest(router, \"GET\", \"/recovery\")\n\tassert.Equal(t, http.StatusBadRequest, w.Code)\n\tassert.Contains(t, buffer.String(), \"panic recovered\")\n\tassert.Contains(t, buffer.String(), \"Oupps, Houston, we have a problem\")\n\tassert.Contains(t, buffer.String(), t.Name())\n\tassert.NotContains(t, buffer.String(), \"GET /recovery\")\n\tSetMode(DebugMode)\n\tw = PerformRequest(router, \"GET\", \"/recovery\")\n\tassert.Equal(t, http.StatusBadRequest, w.Code)\n\tassert.Contains(t, buffer.String(), \"GET /recovery\")\n\tassert.Equal(t, strings.Repeat(\"Oupps, Houston, we have a problem\", 2), errBuffer.String())\n\tSetMode(TestMode)\n}\n","nodeType":"File","column":0,"line":0,"doc":null,"package":168,"name":{"children":[],"start":176,"end":179,"code":"gin","nodeType":"Identifier","column":0,"line":0,"namePos":176,"name":"gin","object":null},"declarations":[{"children":[],"start":181,"end":295,"code":"import (\n\t\"fmt\"\n\t\"net\"\n\t\"net/http\"\n\t\"os\"\n\t\"strings\"\n\t\"syscall\"\n\t\"testing\"\n\t\"github.com/stretchr/testify/assert\"\n)","nodeType":"GenericDeclaration","column":0,"line":0,"doc":null,"tokenPosition":181,"token":75,"lparen":188,"specifications":[{"children":[],"start":191,"end":196,"code":"\"fmt\"","nodeType":"ImportSpecification","column":0,"line":0,"doc":null,"name":null,"path":{"children":[],"start":191,"end":196,"code":"\"fmt\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":191,"kind":9,"value":"\"fmt\""},"comment":null,"endPosition":0},{"children":[],"start":198,"end":203,"code":"\"net\"","nodeType":"ImportSpecification","column":0,"line":0,"doc":null,"name":null,"path":{"children":[],"start":198,"end":203,"code":"\"net\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":198,"kind":9,"value":"\"net\""},"comment":null,"endPosition":0},{"children":[],"start":205,"end":215,"code":"\"net/http\"","nodeType":"ImportSpecification","column":0,"line":0,"doc":null,"name":null,"path":{"children":[],"start":205,"end":215,"code":"\"net/http\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":205,"kind":9,"value":"\"net/http\""},"comment":null,"endPosition":0},{"children":[],"start":217,"end":221,"code":"\"os\"","nodeType":"ImportSpecification","column":0,"line":0,"doc":null,"name":null,"path":{"children":[],"start":217,"end":221,"code":"\"os\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":217,"kind":9,"value":"\"os\""},"comment":null,"endPosition":0},{"children":[],"start":223,"end":232,"code":"\"strings\"","nodeType":"ImportSpecification","column":0,"line":0,"doc":null,"name":null,"path":{"children":[],"start":223,"end":232,"code":"\"strings\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":223,"kind":9,"value":"\"strings\""},"comment":null,"endPosition":0},{"children":[],"start":234,"end":243,"code":"\"syscall\"","nodeType":"ImportSpecification","column":0,"line":0,"doc":null,"name":null,"path":{"children":[],"start":234,"end":243,"code":"\"syscall\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":234,"kind":9,"value":"\"syscall\""},"comment":null,"endPosition":0},{"children":[],"start":245,"end":254,"code":"\"testing\"","nodeType":"ImportSpecification","column":0,"line":0,"doc":null,"name":null,"path":{"children":[],"start":245,"end":254,"code":"\"testing\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":245,"kind":9,"value":"\"testing\""},"comment":null,"endPosition":0},{"children":[],"start":257,"end":293,"code":"\"github.com/stretchr/testify/assert\"","nodeType":"ImportSpecification","column":0,"line":0,"doc":null,"name":null,"path":{"children":[],"start":257,"end":293,"code":"\"github.com/stretchr/testify/assert\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":257,"kind":9,"value":"\"github.com/stretchr/testify/assert\""},"comment":null,"endPosition":0}],"rparen":294},{"children":[],"start":297,"end":1037,"code":"func TestPanicClean(t *testing.T) {\n\tbuffer := new(strings.Builder)\n\trouter := New()\n\tpassword := \"my-super-secret-password\"\n\trouter.Use(RecoveryWithWriter(buffer))\n\trouter.GET(\"/recovery\", func(c *Context) {\n\t\tc.AbortWithStatus(http.StatusBadRequest)\n\t\tpanic(\"Oupps, Houston, we have a problem\")\n\t})\n\tw := PerformRequest(router, \"GET\", \"/recovery\", header{Key: \"Host\", Value: \"www.google.com\"}, header{Key: \"Authorization\", Value: fmt.Sprintf(\"Bearer %s\", password)}, header{Key: \"Content-Type\", Value: \"application/json\"})\n\tassert.Equal(t, http.StatusBadRequest, w.Code)\n\tassert.NotContains(t, buffer.String(), password)\n}","nodeType":"FunctionDeclaration","column":0,"line":0,"doc":null,"receiver":null,"name":{"children":[],"start":302,"end":316,"code":"TestPanicClean","nodeType":"Identifier","column":0,"line":0,"namePos":302,"name":"TestPanicClean","object":null},"type":{"children":[],"start":297,"end":330,"code":"func(t *testing.T)","nodeType":"FunctionType","column":0,"line":0,"Function":297,"TypeParams":null,"Params":{"children":[],"start":316,"end":330,"code":"","nodeType":"FieldList","column":0,"line":0,"opening":316,"list":[{"children":[],"start":317,"end":329,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":[{"children":[],"start":317,"end":318,"code":"t","nodeType":"Identifier","column":0,"line":0,"namePos":317,"name":"t","object":null}],"type":{"children":[],"start":319,"end":329,"code":"*testing.T","nodeType":"StarExpression","column":0,"line":0,"star":319,"expression":{"children":[],"start":320,"end":329,"code":"testing.T","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":320,"end":327,"code":"testing","nodeType":"Identifier","column":0,"line":0,"namePos":320,"name":"testing","object":null},"sel":{"children":[],"start":328,"end":329,"code":"T","nodeType":"Identifier","column":0,"line":0,"namePos":328,"name":"T","object":null}}},"tag":null,"comment":null}],"closing":329},"Results":null},"body":{"children":[],"start":331,"end":1037,"code":"{\n\tbuffer := new(strings.Builder)\n\trouter := New()\n\tpassword := \"my-super-secret-password\"\n\trouter.Use(RecoveryWithWriter(buffer))\n\trouter.GET(\"/recovery\", func(c *Context) {\n\t\tc.AbortWithStatus(http.StatusBadRequest)\n\t\tpanic(\"Oupps, Houston, we have a problem\")\n\t})\n\tw := PerformRequest(router, \"GET\", \"/recovery\", header{Key: \"Host\", Value: \"www.google.com\"}, header{Key: \"Authorization\", Value: fmt.Sprintf(\"Bearer %s\", password)}, header{Key: \"Content-Type\", Value: \"application/json\"})\n\tassert.Equal(t, http.StatusBadRequest, w.Code)\n\tassert.NotContains(t, buffer.String(), password)\n}","nodeType":"BlockStatement","column":0,"line":0,"lbrace":331,"list":[{"children":[],"start":334,"end":364,"code":"buffer := new(strings.Builder)","nodeType":"AssignStatement","column":0,"line":0,"lhs":[{"children":[],"start":334,"end":340,"code":"buffer","nodeType":"Identifier","column":0,"line":0,"namePos":334,"name":"buffer","object":null}],"tokenPos":341,"token":47,"rhs":[{"children":[],"start":344,"end":364,"code":"new(strings.Builder)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":344,"end":347,"code":"new","nodeType":"Identifier","column":0,"line":0,"namePos":344,"name":"new","object":null},"lparen":0,"args":[{"children":[],"start":348,"end":363,"code":"strings.Builder","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":348,"end":355,"code":"strings","nodeType":"Identifier","column":0,"line":0,"namePos":348,"name":"strings","object":null},"sel":{"children":[],"start":356,"end":363,"code":"Builder","nodeType":"Identifier","column":0,"line":0,"namePos":356,"name":"Builder","object":null}}],"ellipsis":0,"rparen":0}]},{"children":[],"start":366,"end":381,"code":"router := New()","nodeType":"AssignStatement","column":0,"line":0,"lhs":[{"children":[],"start":366,"end":372,"code":"router","nodeType":"Identifier","column":0,"line":0,"namePos":366,"name":"router","object":null}],"tokenPos":373,"token":47,"rhs":[{"children":[],"start":376,"end":381,"code":"New()","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":376,"end":379,"code":"New","nodeType":"Identifier","column":0,"line":0,"namePos":376,"name":"New","object":null},"lparen":0,"args":[],"ellipsis":0,"rparen":0}]},{"children":[],"start":383,"end":421,"code":"password := \"my-super-secret-password\"","nodeType":"AssignStatement","column":0,"line":0,"lhs":[{"children":[],"start":383,"end":391,"code":"password","nodeType":"Identifier","column":0,"line":0,"namePos":383,"name":"password","object":null}],"tokenPos":392,"token":47,"rhs":[{"children":[],"start":395,"end":421,"code":"\"my-super-secret-password\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":395,"kind":9,"value":"\"my-super-secret-password\""}]},{"children":[],"start":423,"end":461,"code":"router.Use(RecoveryWithWriter(buffer))","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":423,"end":461,"code":"router.Use(RecoveryWithWriter(buffer))","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":423,"end":433,"code":"router.Use","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":423,"end":429,"code":"router","nodeType":"Identifier","column":0,"line":0,"namePos":423,"name":"router","object":null},"sel":{"children":[],"start":430,"end":433,"code":"Use","nodeType":"Identifier","column":0,"line":0,"namePos":430,"name":"Use","object":null}},"lparen":0,"args":[{"children":[],"start":434,"end":460,"code":"RecoveryWithWriter(buffer)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":434,"end":452,"code":"RecoveryWithWriter","nodeType":"Identifier","column":0,"line":0,"namePos":434,"name":"RecoveryWithWriter","object":null},"lparen":0,"args":[{"children":[],"start":453,"end":459,"code":"buffer","nodeType":"Identifier","column":0,"line":0,"namePos":453,"name":"buffer","object":null}],"ellipsis":0,"rparen":0}],"ellipsis":0,"rparen":0}},{"children":[],"start":463,"end":597,"code":"router.GET(\"/recovery\", func(c *Context) {\n\tc.AbortWithStatus(http.StatusBadRequest)\n\tpanic(\"Oupps, Houston, we have a problem\")\n})","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":463,"end":597,"code":"router.GET(\"/recovery\", func(c *Context) {\n\tc.AbortWithStatus(http.StatusBadRequest)\n\tpanic(\"Oupps, Houston, we have a problem\")\n})","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":463,"end":473,"code":"router.GET","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":463,"end":469,"code":"router","nodeType":"Identifier","column":0,"line":0,"namePos":463,"name":"router","object":null},"sel":{"children":[],"start":470,"end":473,"code":"GET","nodeType":"Identifier","column":0,"line":0,"namePos":470,"name":"GET","object":null}},"lparen":0,"args":[{"children":[],"start":474,"end":485,"code":"\"/recovery\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":474,"kind":9,"value":"\"/recovery\""},{"children":[],"start":487,"end":596,"code":"func(c *Context) {\n\tc.AbortWithStatus(http.StatusBadRequest)\n\tpanic(\"Oupps, Houston, we have a problem\")\n}","nodeType":"FunctionLiteral","column":0,"line":0,"type":{"children":[],"start":487,"end":503,"code":"func(c *Context)","nodeType":"FunctionType","column":0,"line":0,"Function":487,"TypeParams":null,"Params":{"children":[],"start":491,"end":503,"code":"","nodeType":"FieldList","column":0,"line":0,"opening":491,"list":[{"children":[],"start":492,"end":502,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":[{"children":[],"start":492,"end":493,"code":"c","nodeType":"Identifier","column":0,"line":0,"namePos":492,"name":"c","object":null}],"type":{"children":[],"start":494,"end":502,"code":"*Context","nodeType":"StarExpression","column":0,"line":0,"star":494,"expression":{"children":[],"start":495,"end":502,"code":"Context","nodeType":"Identifier","column":0,"line":0,"namePos":495,"name":"Context","object":null}},"tag":null,"comment":null}],"closing":502},"Results":null},"body":{"children":[],"start":504,"end":596,"code":"{\n\tc.AbortWithStatus(http.StatusBadRequest)\n\tpanic(\"Oupps, Houston, we have a problem\")\n}","nodeType":"BlockStatement","column":0,"line":0,"lbrace":504,"list":[{"children":[],"start":508,"end":548,"code":"c.AbortWithStatus(http.StatusBadRequest)","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":508,"end":548,"code":"c.AbortWithStatus(http.StatusBadRequest)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":508,"end":525,"code":"c.AbortWithStatus","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":508,"end":509,"code":"c","nodeType":"Identifier","column":0,"line":0,"namePos":508,"name":"c","object":null},"sel":{"children":[],"start":510,"end":525,"code":"AbortWithStatus","nodeType":"Identifier","column":0,"line":0,"namePos":510,"name":"AbortWithStatus","object":null}},"lparen":0,"args":[{"children":[],"start":526,"end":547,"code":"http.StatusBadRequest","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":526,"end":530,"code":"http","nodeType":"Identifier","column":0,"line":0,"namePos":526,"name":"http","object":null},"sel":{"children":[],"start":531,"end":547,"code":"StatusBadRequest","nodeType":"Identifier","column":0,"line":0,"namePos":531,"name":"StatusBadRequest","object":null}}],"ellipsis":0,"rparen":0}},{"children":[],"start":551,"end":593,"code":"panic(\"Oupps, Houston, we have a problem\")","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":551,"end":593,"code":"panic(\"Oupps, Houston, we have a problem\")","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":551,"end":556,"code":"panic","nodeType":"Identifier","column":0,"line":0,"namePos":551,"name":"panic","object":null},"lparen":0,"args":[{"children":[],"start":557,"end":592,"code":"\"Oupps, Houston, we have a problem\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":557,"kind":9,"value":"\"Oupps, Houston, we have a problem\""}],"ellipsis":0,"rparen":0}}],"rbrace":595}}],"ellipsis":0,"rparen":0}},{"children":[],"start":607,"end":877,"code":"w := PerformRequest(router, \"GET\", \"/recovery\", header{Key: \"Host\", Value: \"www.google.com\"}, header{Key: \"Authorization\", Value: fmt.Sprintf(\"Bearer %s\", password)}, header{Key: \"Content-Type\", Value: \"application/json\"})","nodeType":"AssignStatement","column":0,"line":0,"lhs":[{"children":[],"start":607,"end":608,"code":"w","nodeType":"Identifier","column":0,"line":0,"namePos":607,"name":"w","object":null}],"tokenPos":609,"token":47,"rhs":[{"children":[],"start":612,"end":877,"code":"PerformRequest(router, \"GET\", \"/recovery\", header{Key: \"Host\", Value: \"www.google.com\"}, header{Key: \"Authorization\", Value: fmt.Sprintf(\"Bearer %s\", password)}, header{Key: \"Content-Type\", Value: \"application/json\"})","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":612,"end":626,"code":"PerformRequest","nodeType":"Identifier","column":0,"line":0,"namePos":612,"name":"PerformRequest","object":null},"lparen":0,"args":[{"children":[],"start":627,"end":633,"code":"router","nodeType":"Identifier","column":0,"line":0,"namePos":627,"name":"router","object":null},{"children":[],"start":635,"end":640,"code":"\"GET\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":635,"kind":9,"value":"\"GET\""},{"children":[],"start":642,"end":653,"code":"\"/recovery\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":642,"kind":9,"value":"\"/recovery\""},{"children":[],"start":657,"end":714,"code":"header{Key: \"Host\", Value: \"www.google.com\"}","nodeType":"CompositeLiteral","column":0,"line":0,"type":{"children":[],"start":657,"end":663,"code":"header","nodeType":"Identifier","column":0,"line":0,"namePos":657,"name":"header","object":null},"lbrace":663,"elements":[{"children":[],"start":668,"end":681,"code":"Key: \"Host\"","nodeType":"KeyValueExpression","column":0,"line":0,"key":{"children":[],"start":668,"end":671,"code":"Key","nodeType":"Identifier","column":0,"line":0,"namePos":668,"name":"Key","object":null},"colon":0,"value":{"children":[],"start":675,"end":681,"code":"\"Host\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":675,"kind":9,"value":"\"Host\""}},{"children":[],"start":686,"end":709,"code":"Value: \"www.google.com\"","nodeType":"KeyValueExpression","column":0,"line":0,"key":{"children":[],"start":686,"end":691,"code":"Value","nodeType":"Identifier","column":0,"line":0,"namePos":686,"name":"Value","object":null},"colon":0,"value":{"children":[],"start":693,"end":709,"code":"\"www.google.com\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":693,"kind":9,"value":"\"www.google.com\""}}],"rbrace":713,"incomplete":false},{"children":[],"start":718,"end":802,"code":"header{Key: \"Authorization\", Value: fmt.Sprintf(\"Bearer %s\", password)}","nodeType":"CompositeLiteral","column":0,"line":0,"type":{"children":[],"start":718,"end":724,"code":"header","nodeType":"Identifier","column":0,"line":0,"namePos":718,"name":"header","object":null},"lbrace":724,"elements":[{"children":[],"start":729,"end":751,"code":"Key: \"Authorization\"","nodeType":"KeyValueExpression","column":0,"line":0,"key":{"children":[],"start":729,"end":732,"code":"Key","nodeType":"Identifier","column":0,"line":0,"namePos":729,"name":"Key","object":null},"colon":0,"value":{"children":[],"start":736,"end":751,"code":"\"Authorization\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":736,"kind":9,"value":"\"Authorization\""}},{"children":[],"start":756,"end":797,"code":"Value: fmt.Sprintf(\"Bearer %s\", password)","nodeType":"KeyValueExpression","column":0,"line":0,"key":{"children":[],"start":756,"end":761,"code":"Value","nodeType":"Identifier","column":0,"line":0,"namePos":756,"name":"Value","object":null},"colon":0,"value":{"children":[],"start":763,"end":797,"code":"fmt.Sprintf(\"Bearer %s\", password)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":763,"end":774,"code":"fmt.Sprintf","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":763,"end":766,"code":"fmt","nodeType":"Identifier","column":0,"line":0,"namePos":763,"name":"fmt","object":null},"sel":{"children":[],"start":767,"end":774,"code":"Sprintf","nodeType":"Identifier","column":0,"line":0,"namePos":767,"name":"Sprintf","object":null}},"lparen":0,"args":[{"children":[],"start":775,"end":786,"code":"\"Bearer %s\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":775,"kind":9,"value":"\"Bearer %s\""},{"children":[],"start":788,"end":796,"code":"password","nodeType":"Identifier","column":0,"line":0,"namePos":788,"name":"password","object":null}],"ellipsis":0,"rparen":0}}],"rbrace":801,"incomplete":false},{"children":[],"start":806,"end":873,"code":"header{Key: \"Content-Type\", Value: \"application/json\"}","nodeType":"CompositeLiteral","column":0,"line":0,"type":{"children":[],"start":806,"end":812,"code":"header","nodeType":"Identifier","column":0,"line":0,"namePos":806,"name":"header","object":null},"lbrace":812,"elements":[{"children":[],"start":817,"end":838,"code":"Key: \"Content-Type\"","nodeType":"KeyValueExpression","column":0,"line":0,"key":{"children":[],"start":817,"end":820,"code":"Key","nodeType":"Identifier","column":0,"line":0,"namePos":817,"name":"Key","object":null},"colon":0,"value":{"children":[],"start":824,"end":838,"code":"\"Content-Type\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":824,"kind":9,"value":"\"Content-Type\""}},{"children":[],"start":843,"end":868,"code":"Value: \"application/json\"","nodeType":"KeyValueExpression","column":0,"line":0,"key":{"children":[],"start":843,"end":848,"code":"Value","nodeType":"Identifier","column":0,"line":0,"namePos":843,"name":"Value","object":null},"colon":0,"value":{"children":[],"start":850,"end":868,"code":"\"application/json\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":850,"kind":9,"value":"\"application/json\""}}],"rbrace":872,"incomplete":false}],"ellipsis":0,"rparen":0}]},{"children":[],"start":888,"end":934,"code":"assert.Equal(t, http.StatusBadRequest, w.Code)","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":888,"end":934,"code":"assert.Equal(t, http.StatusBadRequest, w.Code)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":888,"end":900,"code":"assert.Equal","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":888,"end":894,"code":"assert","nodeType":"Identifier","column":0,"line":0,"namePos":888,"name":"assert","object":null},"sel":{"children":[],"start":895,"end":900,"code":"Equal","nodeType":"Identifier","column":0,"line":0,"namePos":895,"name":"Equal","object":null}},"lparen":0,"args":[{"children":[],"start":901,"end":902,"code":"t","nodeType":"Identifier","column":0,"line":0,"namePos":901,"name":"t","object":null},{"children":[],"start":904,"end":925,"code":"http.StatusBadRequest","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":904,"end":908,"code":"http","nodeType":"Identifier","column":0,"line":0,"namePos":904,"name":"http","object":null},"sel":{"children":[],"start":909,"end":925,"code":"StatusBadRequest","nodeType":"Identifier","column":0,"line":0,"namePos":909,"name":"StatusBadRequest","object":null}},{"children":[],"start":927,"end":933,"code":"w.Code","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":927,"end":928,"code":"w","nodeType":"Identifier","column":0,"line":0,"namePos":927,"name":"w","object":null},"sel":{"children":[],"start":929,"end":933,"code":"Code","nodeType":"Identifier","column":0,"line":0,"namePos":929,"name":"Code","object":null}}],"ellipsis":0,"rparen":0}},{"children":[],"start":987,"end":1035,"code":"assert.NotContains(t, buffer.String(), password)","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":987,"end":1035,"code":"assert.NotContains(t, buffer.String(), password)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":987,"end":1005,"code":"assert.NotContains","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":987,"end":993,"code":"assert","nodeType":"Identifier","column":0,"line":0,"namePos":987,"name":"assert","object":null},"sel":{"children":[],"start":994,"end":1005,"code":"NotContains","nodeType":"Identifier","column":0,"line":0,"namePos":994,"name":"NotContains","object":null}},"lparen":0,"args":[{"children":[],"start":1006,"end":1007,"code":"t","nodeType":"Identifier","column":0,"line":0,"namePos":1006,"name":"t","object":null},{"children":[],"start":1009,"end":1024,"code":"buffer.String()","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":1009,"end":1022,"code":"buffer.String","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":1009,"end":1015,"code":"buffer","nodeType":"Identifier","column":0,"line":0,"namePos":1009,"name":"buffer","object":null},"sel":{"children":[],"start":1016,"end":1022,"code":"String","nodeType":"Identifier","column":0,"line":0,"namePos":1016,"name":"String","object":null}},"lparen":0,"args":[],"ellipsis":0,"rparen":0},{"children":[],"start":1026,"end":1034,"code":"password","nodeType":"Identifier","column":0,"line":0,"namePos":1026,"name":"password","object":null}],"ellipsis":0,"rparen":0}}],"rbrace":1036}},{"children":[],"start":1099,"end":1930,"code":"func TestPanicInHandler(t *testing.T) {\n\tbuffer := new(strings.Builder)\n\trouter := New()\n\trouter.Use(RecoveryWithWriter(buffer))\n\trouter.GET(\"/recovery\", func(_ *Context) {\n\t\tpanic(\"Oupps, Houston, we have a problem\")\n\t})\n\tw := PerformRequest(router, \"GET\", \"/recovery\")\n\tassert.Equal(t, http.StatusInternalServerError, w.Code)\n\tassert.Contains(t, buffer.String(), \"panic recovered\")\n\tassert.Contains(t, buffer.String(), \"Oupps, Houston, we have a problem\")\n\tassert.Contains(t, buffer.String(), t.Name())\n\tassert.NotContains(t, buffer.String(), \"GET /recovery\")\n\tSetMode(DebugMode)\n\tw = PerformRequest(router, \"GET\", \"/recovery\")\n\tassert.Equal(t, http.StatusInternalServerError, w.Code)\n\tassert.Contains(t, buffer.String(), \"GET /recovery\")\n\tSetMode(TestMode)\n}","nodeType":"FunctionDeclaration","column":0,"line":0,"doc":null,"receiver":null,"name":{"children":[],"start":1104,"end":1122,"code":"TestPanicInHandler","nodeType":"Identifier","column":0,"line":0,"namePos":1104,"name":"TestPanicInHandler","object":null},"type":{"children":[],"start":1099,"end":1136,"code":"func(t *testing.T)","nodeType":"FunctionType","column":0,"line":0,"Function":1099,"TypeParams":null,"Params":{"children":[],"start":1122,"end":1136,"code":"","nodeType":"FieldList","column":0,"line":0,"opening":1122,"list":[{"children":[],"start":1123,"end":1135,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":[{"children":[],"start":1123,"end":1124,"code":"t","nodeType":"Identifier","column":0,"line":0,"namePos":1123,"name":"t","object":null}],"type":{"children":[],"start":1125,"end":1135,"code":"*testing.T","nodeType":"StarExpression","column":0,"line":0,"star":1125,"expression":{"children":[],"start":1126,"end":1135,"code":"testing.T","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":1126,"end":1133,"code":"testing","nodeType":"Identifier","column":0,"line":0,"namePos":1126,"name":"testing","object":null},"sel":{"children":[],"start":1134,"end":1135,"code":"T","nodeType":"Identifier","column":0,"line":0,"namePos":1134,"name":"T","object":null}}},"tag":null,"comment":null}],"closing":1135},"Results":null},"body":{"children":[],"start":1137,"end":1930,"code":"{\n\tbuffer := new(strings.Builder)\n\trouter := New()\n\trouter.Use(RecoveryWithWriter(buffer))\n\trouter.GET(\"/recovery\", func(_ *Context) {\n\t\tpanic(\"Oupps, Houston, we have a problem\")\n\t})\n\tw := PerformRequest(router, \"GET\", \"/recovery\")\n\tassert.Equal(t, http.StatusInternalServerError, w.Code)\n\tassert.Contains(t, buffer.String(), \"panic recovered\")\n\tassert.Contains(t, buffer.String(), \"Oupps, Houston, we have a problem\")\n\tassert.Contains(t, buffer.String(), t.Name())\n\tassert.NotContains(t, buffer.String(), \"GET /recovery\")\n\tSetMode(DebugMode)\n\tw = PerformRequest(router, \"GET\", \"/recovery\")\n\tassert.Equal(t, http.StatusInternalServerError, w.Code)\n\tassert.Contains(t, buffer.String(), \"GET /recovery\")\n\tSetMode(TestMode)\n}","nodeType":"BlockStatement","column":0,"line":0,"lbrace":1137,"list":[{"children":[],"start":1140,"end":1170,"code":"buffer := new(strings.Builder)","nodeType":"AssignStatement","column":0,"line":0,"lhs":[{"children":[],"start":1140,"end":1146,"code":"buffer","nodeType":"Identifier","column":0,"line":0,"namePos":1140,"name":"buffer","object":null}],"tokenPos":1147,"token":47,"rhs":[{"children":[],"start":1150,"end":1170,"code":"new(strings.Builder)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":1150,"end":1153,"code":"new","nodeType":"Identifier","column":0,"line":0,"namePos":1150,"name":"new","object":null},"lparen":0,"args":[{"children":[],"start":1154,"end":1169,"code":"strings.Builder","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":1154,"end":1161,"code":"strings","nodeType":"Identifier","column":0,"line":0,"namePos":1154,"name":"strings","object":null},"sel":{"children":[],"start":1162,"end":1169,"code":"Builder","nodeType":"Identifier","column":0,"line":0,"namePos":1162,"name":"Builder","object":null}}],"ellipsis":0,"rparen":0}]},{"children":[],"start":1172,"end":1187,"code":"router := New()","nodeType":"AssignStatement","column":0,"line":0,"lhs":[{"children":[],"start":1172,"end":1178,"code":"router","nodeType":"Identifier","column":0,"line":0,"namePos":1172,"name":"router","object":null}],"tokenPos":1179,"token":47,"rhs":[{"children":[],"start":1182,"end":1187,"code":"New()","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":1182,"end":1185,"code":"New","nodeType":"Identifier","column":0,"line":0,"namePos":1182,"name":"New","object":null},"lparen":0,"args":[],"ellipsis":0,"rparen":0}]},{"children":[],"start":1189,"end":1227,"code":"router.Use(RecoveryWithWriter(buffer))","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":1189,"end":1227,"code":"router.Use(RecoveryWithWriter(buffer))","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":1189,"end":1199,"code":"router.Use","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":1189,"end":1195,"code":"router","nodeType":"Identifier","column":0,"line":0,"namePos":1189,"name":"router","object":null},"sel":{"children":[],"start":1196,"end":1199,"code":"Use","nodeType":"Identifier","column":0,"line":0,"namePos":1196,"name":"Use","object":null}},"lparen":0,"args":[{"children":[],"start":1200,"end":1226,"code":"RecoveryWithWriter(buffer)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":1200,"end":1218,"code":"RecoveryWithWriter","nodeType":"Identifier","column":0,"line":0,"namePos":1200,"name":"RecoveryWithWriter","object":null},"lparen":0,"args":[{"children":[],"start":1219,"end":1225,"code":"buffer","nodeType":"Identifier","column":0,"line":0,"namePos":1219,"name":"buffer","object":null}],"ellipsis":0,"rparen":0}],"ellipsis":0,"rparen":0}},{"children":[],"start":1229,"end":1320,"code":"router.GET(\"/recovery\", func(_ *Context) {\n\tpanic(\"Oupps, Houston, we have a problem\")\n})","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":1229,"end":1320,"code":"router.GET(\"/recovery\", func(_ *Context) {\n\tpanic(\"Oupps, Houston, we have a problem\")\n})","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":1229,"end":1239,"code":"router.GET","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":1229,"end":1235,"code":"router","nodeType":"Identifier","column":0,"line":0,"namePos":1229,"name":"router","object":null},"sel":{"children":[],"start":1236,"end":1239,"code":"GET","nodeType":"Identifier","column":0,"line":0,"namePos":1236,"name":"GET","object":null}},"lparen":0,"args":[{"children":[],"start":1240,"end":1251,"code":"\"/recovery\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":1240,"kind":9,"value":"\"/recovery\""},{"children":[],"start":1253,"end":1319,"code":"func(_ *Context) {\n\tpanic(\"Oupps, Houston, we have a problem\")\n}","nodeType":"FunctionLiteral","column":0,"line":0,"type":{"children":[],"start":1253,"end":1269,"code":"func(_ *Context)","nodeType":"FunctionType","column":0,"line":0,"Function":1253,"TypeParams":null,"Params":{"children":[],"start":1257,"end":1269,"code":"","nodeType":"FieldList","column":0,"line":0,"opening":1257,"list":[{"children":[],"start":1258,"end":1268,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":[{"children":[],"start":1258,"end":1259,"code":"_","nodeType":"Identifier","column":0,"line":0,"namePos":1258,"name":"_","object":null}],"type":{"children":[],"start":1260,"end":1268,"code":"*Context","nodeType":"StarExpression","column":0,"line":0,"star":1260,"expression":{"children":[],"start":1261,"end":1268,"code":"Context","nodeType":"Identifier","column":0,"line":0,"namePos":1261,"name":"Context","object":null}},"tag":null,"comment":null}],"closing":1268},"Results":null},"body":{"children":[],"start":1270,"end":1319,"code":"{\n\tpanic(\"Oupps, Houston, we have a problem\")\n}","nodeType":"BlockStatement","column":0,"line":0,"lbrace":1270,"list":[{"children":[],"start":1274,"end":1316,"code":"panic(\"Oupps, Houston, we have a problem\")","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":1274,"end":1316,"code":"panic(\"Oupps, Houston, we have a problem\")","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":1274,"end":1279,"code":"panic","nodeType":"Identifier","column":0,"line":0,"namePos":1274,"name":"panic","object":null},"lparen":0,"args":[{"children":[],"start":1280,"end":1315,"code":"\"Oupps, Houston, we have a problem\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":1280,"kind":9,"value":"\"Oupps, Houston, we have a problem\""}],"ellipsis":0,"rparen":0}}],"rbrace":1318}}],"ellipsis":0,"rparen":0}},{"children":[],"start":1330,"end":1377,"code":"w := PerformRequest(router, \"GET\", \"/recovery\")","nodeType":"AssignStatement","column":0,"line":0,"lhs":[{"children":[],"start":1330,"end":1331,"code":"w","nodeType":"Identifier","column":0,"line":0,"namePos":1330,"name":"w","object":null}],"tokenPos":1332,"token":47,"rhs":[{"children":[],"start":1335,"end":1377,"code":"PerformRequest(router, \"GET\", \"/recovery\")","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":1335,"end":1349,"code":"PerformRequest","nodeType":"Identifier","column":0,"line":0,"namePos":1335,"name":"PerformRequest","object":null},"lparen":0,"args":[{"children":[],"start":1350,"end":1356,"code":"router","nodeType":"Identifier","column":0,"line":0,"namePos":1350,"name":"router","object":null},{"children":[],"start":1358,"end":1363,"code":"\"GET\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":1358,"kind":9,"value":"\"GET\""},{"children":[],"start":1365,"end":1376,"code":"\"/recovery\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":1365,"kind":9,"value":"\"/recovery\""}],"ellipsis":0,"rparen":0}]},{"children":[],"start":1388,"end":1443,"code":"assert.Equal(t, http.StatusInternalServerError, w.Code)","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":1388,"end":1443,"code":"assert.Equal(t, http.StatusInternalServerError, w.Code)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":1388,"end":1400,"code":"assert.Equal","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":1388,"end":1394,"code":"assert","nodeType":"Identifier","column":0,"line":0,"namePos":1388,"name":"assert","object":null},"sel":{"children":[],"start":1395,"end":1400,"code":"Equal","nodeType":"Identifier","column":0,"line":0,"namePos":1395,"name":"Equal","object":null}},"lparen":0,"args":[{"children":[],"start":1401,"end":1402,"code":"t","nodeType":"Identifier","column":0,"line":0,"namePos":1401,"name":"t","object":null},{"children":[],"start":1404,"end":1434,"code":"http.StatusInternalServerError","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":1404,"end":1408,"code":"http","nodeType":"Identifier","column":0,"line":0,"namePos":1404,"name":"http","object":null},"sel":{"children":[],"start":1409,"end":1434,"code":"StatusInternalServerError","nodeType":"Identifier","column":0,"line":0,"namePos":1409,"name":"StatusInternalServerError","object":null}},{"children":[],"start":1436,"end":1442,"code":"w.Code","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":1436,"end":1437,"code":"w","nodeType":"Identifier","column":0,"line":0,"namePos":1436,"name":"w","object":null},"sel":{"children":[],"start":1438,"end":1442,"code":"Code","nodeType":"Identifier","column":0,"line":0,"namePos":1438,"name":"Code","object":null}}],"ellipsis":0,"rparen":0}},{"children":[],"start":1445,"end":1499,"code":"assert.Contains(t, buffer.String(), \"panic recovered\")","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":1445,"end":1499,"code":"assert.Contains(t, buffer.String(), \"panic recovered\")","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":1445,"end":1460,"code":"assert.Contains","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":1445,"end":1451,"code":"assert","nodeType":"Identifier","column":0,"line":0,"namePos":1445,"name":"assert","object":null},"sel":{"children":[],"start":1452,"end":1460,"code":"Contains","nodeType":"Identifier","column":0,"line":0,"namePos":1452,"name":"Contains","object":null}},"lparen":0,"args":[{"children":[],"start":1461,"end":1462,"code":"t","nodeType":"Identifier","column":0,"line":0,"namePos":1461,"name":"t","object":null},{"children":[],"start":1464,"end":1479,"code":"buffer.String()","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":1464,"end":1477,"code":"buffer.String","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":1464,"end":1470,"code":"buffer","nodeType":"Identifier","column":0,"line":0,"namePos":1464,"name":"buffer","object":null},"sel":{"children":[],"start":1471,"end":1477,"code":"String","nodeType":"Identifier","column":0,"line":0,"namePos":1471,"name":"String","object":null}},"lparen":0,"args":[],"ellipsis":0,"rparen":0},{"children":[],"start":1481,"end":1498,"code":"\"panic recovered\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":1481,"kind":9,"value":"\"panic recovered\""}],"ellipsis":0,"rparen":0}},{"children":[],"start":1501,"end":1573,"code":"assert.Contains(t, buffer.String(), \"Oupps, Houston, we have a problem\")","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":1501,"end":1573,"code":"assert.Contains(t, buffer.String(), \"Oupps, Houston, we have a problem\")","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":1501,"end":1516,"code":"assert.Contains","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":1501,"end":1507,"code":"assert","nodeType":"Identifier","column":0,"line":0,"namePos":1501,"name":"assert","object":null},"sel":{"children":[],"start":1508,"end":1516,"code":"Contains","nodeType":"Identifier","column":0,"line":0,"namePos":1508,"name":"Contains","object":null}},"lparen":0,"args":[{"children":[],"start":1517,"end":1518,"code":"t","nodeType":"Identifier","column":0,"line":0,"namePos":1517,"name":"t","object":null},{"children":[],"start":1520,"end":1535,"code":"buffer.String()","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":1520,"end":1533,"code":"buffer.String","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":1520,"end":1526,"code":"buffer","nodeType":"Identifier","column":0,"line":0,"namePos":1520,"name":"buffer","object":null},"sel":{"children":[],"start":1527,"end":1533,"code":"String","nodeType":"Identifier","column":0,"line":0,"namePos":1527,"name":"String","object":null}},"lparen":0,"args":[],"ellipsis":0,"rparen":0},{"children":[],"start":1537,"end":1572,"code":"\"Oupps, Houston, we have a problem\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":1537,"kind":9,"value":"\"Oupps, Houston, we have a problem\""}],"ellipsis":0,"rparen":0}},{"children":[],"start":1575,"end":1620,"code":"assert.Contains(t, buffer.String(), t.Name())","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":1575,"end":1620,"code":"assert.Contains(t, buffer.String(), t.Name())","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":1575,"end":1590,"code":"assert.Contains","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":1575,"end":1581,"code":"assert","nodeType":"Identifier","column":0,"line":0,"namePos":1575,"name":"assert","object":null},"sel":{"children":[],"start":1582,"end":1590,"code":"Contains","nodeType":"Identifier","column":0,"line":0,"namePos":1582,"name":"Contains","object":null}},"lparen":0,"args":[{"children":[],"start":1591,"end":1592,"code":"t","nodeType":"Identifier","column":0,"line":0,"namePos":1591,"name":"t","object":null},{"children":[],"start":1594,"end":1609,"code":"buffer.String()","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":1594,"end":1607,"code":"buffer.String","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":1594,"end":1600,"code":"buffer","nodeType":"Identifier","column":0,"line":0,"namePos":1594,"name":"buffer","object":null},"sel":{"children":[],"start":1601,"end":1607,"code":"String","nodeType":"Identifier","column":0,"line":0,"namePos":1601,"name":"String","object":null}},"lparen":0,"args":[],"ellipsis":0,"rparen":0},{"children":[],"start":1611,"end":1619,"code":"t.Name()","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":1611,"end":1617,"code":"t.Name","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":1611,"end":1612,"code":"t","nodeType":"Identifier","column":0,"line":0,"namePos":1611,"name":"t","object":null},"sel":{"children":[],"start":1613,"end":1617,"code":"Name","nodeType":"Identifier","column":0,"line":0,"namePos":1613,"name":"Name","object":null}},"lparen":0,"args":[],"ellipsis":0,"rparen":0}],"ellipsis":0,"rparen":0}},{"children":[],"start":1622,"end":1677,"code":"assert.NotContains(t, buffer.String(), \"GET /recovery\")","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":1622,"end":1677,"code":"assert.NotContains(t, buffer.String(), \"GET /recovery\")","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":1622,"end":1640,"code":"assert.NotContains","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":1622,"end":1628,"code":"assert","nodeType":"Identifier","column":0,"line":0,"namePos":1622,"name":"assert","object":null},"sel":{"children":[],"start":1629,"end":1640,"code":"NotContains","nodeType":"Identifier","column":0,"line":0,"namePos":1629,"name":"NotContains","object":null}},"lparen":0,"args":[{"children":[],"start":1641,"end":1642,"code":"t","nodeType":"Identifier","column":0,"line":0,"namePos":1641,"name":"t","object":null},{"children":[],"start":1644,"end":1659,"code":"buffer.String()","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":1644,"end":1657,"code":"buffer.String","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":1644,"end":1650,"code":"buffer","nodeType":"Identifier","column":0,"line":0,"namePos":1644,"name":"buffer","object":null},"sel":{"children":[],"start":1651,"end":1657,"code":"String","nodeType":"Identifier","column":0,"line":0,"namePos":1651,"name":"String","object":null}},"lparen":0,"args":[],"ellipsis":0,"rparen":0},{"children":[],"start":1661,"end":1676,"code":"\"GET /recovery\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":1661,"kind":9,"value":"\"GET /recovery\""}],"ellipsis":0,"rparen":0}},{"children":[],"start":1714,"end":1732,"code":"SetMode(DebugMode)","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":1714,"end":1732,"code":"SetMode(DebugMode)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":1714,"end":1721,"code":"SetMode","nodeType":"Identifier","column":0,"line":0,"namePos":1714,"name":"SetMode","object":null},"lparen":0,"args":[{"children":[],"start":1722,"end":1731,"code":"DebugMode","nodeType":"Identifier","column":0,"line":0,"namePos":1722,"name":"DebugMode","object":null}],"ellipsis":0,"rparen":0}},{"children":[],"start":1742,"end":1788,"code":"w = PerformRequest(router, \"GET\", \"/recovery\")","nodeType":"AssignStatement","column":0,"line":0,"lhs":[{"children":[],"start":1742,"end":1743,"code":"w","nodeType":"Identifier","column":0,"line":0,"namePos":1742,"name":"w","object":null}],"tokenPos":1744,"token":42,"rhs":[{"children":[],"start":1746,"end":1788,"code":"PerformRequest(router, \"GET\", \"/recovery\")","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":1746,"end":1760,"code":"PerformRequest","nodeType":"Identifier","column":0,"line":0,"namePos":1746,"name":"PerformRequest","object":null},"lparen":0,"args":[{"children":[],"start":1761,"end":1767,"code":"router","nodeType":"Identifier","column":0,"line":0,"namePos":1761,"name":"router","object":null},{"children":[],"start":1769,"end":1774,"code":"\"GET\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":1769,"kind":9,"value":"\"GET\""},{"children":[],"start":1776,"end":1787,"code":"\"/recovery\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":1776,"kind":9,"value":"\"/recovery\""}],"ellipsis":0,"rparen":0}]},{"children":[],"start":1799,"end":1854,"code":"assert.Equal(t, http.StatusInternalServerError, w.Code)","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":1799,"end":1854,"code":"assert.Equal(t, http.StatusInternalServerError, w.Code)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":1799,"end":1811,"code":"assert.Equal","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":1799,"end":1805,"code":"assert","nodeType":"Identifier","column":0,"line":0,"namePos":1799,"name":"assert","object":null},"sel":{"children":[],"start":1806,"end":1811,"code":"Equal","nodeType":"Identifier","column":0,"line":0,"namePos":1806,"name":"Equal","object":null}},"lparen":0,"args":[{"children":[],"start":1812,"end":1813,"code":"t","nodeType":"Identifier","column":0,"line":0,"namePos":1812,"name":"t","object":null},{"children":[],"start":1815,"end":1845,"code":"http.StatusInternalServerError","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":1815,"end":1819,"code":"http","nodeType":"Identifier","column":0,"line":0,"namePos":1815,"name":"http","object":null},"sel":{"children":[],"start":1820,"end":1845,"code":"StatusInternalServerError","nodeType":"Identifier","column":0,"line":0,"namePos":1820,"name":"StatusInternalServerError","object":null}},{"children":[],"start":1847,"end":1853,"code":"w.Code","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":1847,"end":1848,"code":"w","nodeType":"Identifier","column":0,"line":0,"namePos":1847,"name":"w","object":null},"sel":{"children":[],"start":1849,"end":1853,"code":"Code","nodeType":"Identifier","column":0,"line":0,"namePos":1849,"name":"Code","object":null}}],"ellipsis":0,"rparen":0}},{"children":[],"start":1856,"end":1908,"code":"assert.Contains(t, buffer.String(), \"GET /recovery\")","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":1856,"end":1908,"code":"assert.Contains(t, buffer.String(), \"GET /recovery\")","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":1856,"end":1871,"code":"assert.Contains","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":1856,"end":1862,"code":"assert","nodeType":"Identifier","column":0,"line":0,"namePos":1856,"name":"assert","object":null},"sel":{"children":[],"start":1863,"end":1871,"code":"Contains","nodeType":"Identifier","column":0,"line":0,"namePos":1863,"name":"Contains","object":null}},"lparen":0,"args":[{"children":[],"start":1872,"end":1873,"code":"t","nodeType":"Identifier","column":0,"line":0,"namePos":1872,"name":"t","object":null},{"children":[],"start":1875,"end":1890,"code":"buffer.String()","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":1875,"end":1888,"code":"buffer.String","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":1875,"end":1881,"code":"buffer","nodeType":"Identifier","column":0,"line":0,"namePos":1875,"name":"buffer","object":null},"sel":{"children":[],"start":1882,"end":1888,"code":"String","nodeType":"Identifier","column":0,"line":0,"namePos":1882,"name":"String","object":null}},"lparen":0,"args":[],"ellipsis":0,"rparen":0},{"children":[],"start":1892,"end":1907,"code":"\"GET /recovery\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":1892,"kind":9,"value":"\"GET /recovery\""}],"ellipsis":0,"rparen":0}},{"children":[],"start":1911,"end":1928,"code":"SetMode(TestMode)","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":1911,"end":1928,"code":"SetMode(TestMode)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":1911,"end":1918,"code":"SetMode","nodeType":"Identifier","column":0,"line":0,"namePos":1911,"name":"SetMode","object":null},"lparen":0,"args":[{"children":[],"start":1919,"end":1927,"code":"TestMode","nodeType":"Identifier","column":0,"line":0,"namePos":1919,"name":"TestMode","object":null}],"ellipsis":0,"rparen":0}}],"rbrace":1929}},{"children":[],"start":2023,"end":2368,"code":"func TestPanicWithAbort(t *testing.T) {\n\trouter := New()\n\trouter.Use(RecoveryWithWriter(nil))\n\trouter.GET(\"/recovery\", func(c *Context) {\n\t\tc.AbortWithStatus(http.StatusBadRequest)\n\t\tpanic(\"Oupps, Houston, we have a problem\")\n\t})\n\tw := PerformRequest(router, \"GET\", \"/recovery\")\n\tassert.Equal(t, http.StatusBadRequest, w.Code)\n}","nodeType":"FunctionDeclaration","column":0,"line":0,"doc":null,"receiver":null,"name":{"children":[],"start":2028,"end":2046,"code":"TestPanicWithAbort","nodeType":"Identifier","column":0,"line":0,"namePos":2028,"name":"TestPanicWithAbort","object":null},"type":{"children":[],"start":2023,"end":2060,"code":"func(t *testing.T)","nodeType":"FunctionType","column":0,"line":0,"Function":2023,"TypeParams":null,"Params":{"children":[],"start":2046,"end":2060,"code":"","nodeType":"FieldList","column":0,"line":0,"opening":2046,"list":[{"children":[],"start":2047,"end":2059,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":[{"children":[],"start":2047,"end":2048,"code":"t","nodeType":"Identifier","column":0,"line":0,"namePos":2047,"name":"t","object":null}],"type":{"children":[],"start":2049,"end":2059,"code":"*testing.T","nodeType":"StarExpression","column":0,"line":0,"star":2049,"expression":{"children":[],"start":2050,"end":2059,"code":"testing.T","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":2050,"end":2057,"code":"testing","nodeType":"Identifier","column":0,"line":0,"namePos":2050,"name":"testing","object":null},"sel":{"children":[],"start":2058,"end":2059,"code":"T","nodeType":"Identifier","column":0,"line":0,"namePos":2058,"name":"T","object":null}}},"tag":null,"comment":null}],"closing":2059},"Results":null},"body":{"children":[],"start":2061,"end":2368,"code":"{\n\trouter := New()\n\trouter.Use(RecoveryWithWriter(nil))\n\trouter.GET(\"/recovery\", func(c *Context) {\n\t\tc.AbortWithStatus(http.StatusBadRequest)\n\t\tpanic(\"Oupps, Houston, we have a problem\")\n\t})\n\tw := PerformRequest(router, \"GET\", \"/recovery\")\n\tassert.Equal(t, http.StatusBadRequest, w.Code)\n}","nodeType":"BlockStatement","column":0,"line":0,"lbrace":2061,"list":[{"children":[],"start":2064,"end":2079,"code":"router := New()","nodeType":"AssignStatement","column":0,"line":0,"lhs":[{"children":[],"start":2064,"end":2070,"code":"router","nodeType":"Identifier","column":0,"line":0,"namePos":2064,"name":"router","object":null}],"tokenPos":2071,"token":47,"rhs":[{"children":[],"start":2074,"end":2079,"code":"New()","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":2074,"end":2077,"code":"New","nodeType":"Identifier","column":0,"line":0,"namePos":2074,"name":"New","object":null},"lparen":0,"args":[],"ellipsis":0,"rparen":0}]},{"children":[],"start":2081,"end":2116,"code":"router.Use(RecoveryWithWriter(nil))","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":2081,"end":2116,"code":"router.Use(RecoveryWithWriter(nil))","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":2081,"end":2091,"code":"router.Use","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":2081,"end":2087,"code":"router","nodeType":"Identifier","column":0,"line":0,"namePos":2081,"name":"router","object":null},"sel":{"children":[],"start":2088,"end":2091,"code":"Use","nodeType":"Identifier","column":0,"line":0,"namePos":2088,"name":"Use","object":null}},"lparen":0,"args":[{"children":[],"start":2092,"end":2115,"code":"RecoveryWithWriter(nil)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":2092,"end":2110,"code":"RecoveryWithWriter","nodeType":"Identifier","column":0,"line":0,"namePos":2092,"name":"RecoveryWithWriter","object":null},"lparen":0,"args":[{"children":[],"start":2111,"end":2114,"code":"nil","nodeType":"Identifier","column":0,"line":0,"namePos":2111,"name":"nil","object":null}],"ellipsis":0,"rparen":0}],"ellipsis":0,"rparen":0}},{"children":[],"start":2118,"end":2252,"code":"router.GET(\"/recovery\", func(c *Context) {\n\tc.AbortWithStatus(http.StatusBadRequest)\n\tpanic(\"Oupps, Houston, we have a problem\")\n})","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":2118,"end":2252,"code":"router.GET(\"/recovery\", func(c *Context) {\n\tc.AbortWithStatus(http.StatusBadRequest)\n\tpanic(\"Oupps, Houston, we have a problem\")\n})","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":2118,"end":2128,"code":"router.GET","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":2118,"end":2124,"code":"router","nodeType":"Identifier","column":0,"line":0,"namePos":2118,"name":"router","object":null},"sel":{"children":[],"start":2125,"end":2128,"code":"GET","nodeType":"Identifier","column":0,"line":0,"namePos":2125,"name":"GET","object":null}},"lparen":0,"args":[{"children":[],"start":2129,"end":2140,"code":"\"/recovery\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":2129,"kind":9,"value":"\"/recovery\""},{"children":[],"start":2142,"end":2251,"code":"func(c *Context) {\n\tc.AbortWithStatus(http.StatusBadRequest)\n\tpanic(\"Oupps, Houston, we have a problem\")\n}","nodeType":"FunctionLiteral","column":0,"line":0,"type":{"children":[],"start":2142,"end":2158,"code":"func(c *Context)","nodeType":"FunctionType","column":0,"line":0,"Function":2142,"TypeParams":null,"Params":{"children":[],"start":2146,"end":2158,"code":"","nodeType":"FieldList","column":0,"line":0,"opening":2146,"list":[{"children":[],"start":2147,"end":2157,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":[{"children":[],"start":2147,"end":2148,"code":"c","nodeType":"Identifier","column":0,"line":0,"namePos":2147,"name":"c","object":null}],"type":{"children":[],"start":2149,"end":2157,"code":"*Context","nodeType":"StarExpression","column":0,"line":0,"star":2149,"expression":{"children":[],"start":2150,"end":2157,"code":"Context","nodeType":"Identifier","column":0,"line":0,"namePos":2150,"name":"Context","object":null}},"tag":null,"comment":null}],"closing":2157},"Results":null},"body":{"children":[],"start":2159,"end":2251,"code":"{\n\tc.AbortWithStatus(http.StatusBadRequest)\n\tpanic(\"Oupps, Houston, we have a problem\")\n}","nodeType":"BlockStatement","column":0,"line":0,"lbrace":2159,"list":[{"children":[],"start":2163,"end":2203,"code":"c.AbortWithStatus(http.StatusBadRequest)","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":2163,"end":2203,"code":"c.AbortWithStatus(http.StatusBadRequest)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":2163,"end":2180,"code":"c.AbortWithStatus","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":2163,"end":2164,"code":"c","nodeType":"Identifier","column":0,"line":0,"namePos":2163,"name":"c","object":null},"sel":{"children":[],"start":2165,"end":2180,"code":"AbortWithStatus","nodeType":"Identifier","column":0,"line":0,"namePos":2165,"name":"AbortWithStatus","object":null}},"lparen":0,"args":[{"children":[],"start":2181,"end":2202,"code":"http.StatusBadRequest","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":2181,"end":2185,"code":"http","nodeType":"Identifier","column":0,"line":0,"namePos":2181,"name":"http","object":null},"sel":{"children":[],"start":2186,"end":2202,"code":"StatusBadRequest","nodeType":"Identifier","column":0,"line":0,"namePos":2186,"name":"StatusBadRequest","object":null}}],"ellipsis":0,"rparen":0}},{"children":[],"start":2206,"end":2248,"code":"panic(\"Oupps, Houston, we have a problem\")","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":2206,"end":2248,"code":"panic(\"Oupps, Houston, we have a problem\")","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":2206,"end":2211,"code":"panic","nodeType":"Identifier","column":0,"line":0,"namePos":2206,"name":"panic","object":null},"lparen":0,"args":[{"children":[],"start":2212,"end":2247,"code":"\"Oupps, Houston, we have a problem\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":2212,"kind":9,"value":"\"Oupps, Houston, we have a problem\""}],"ellipsis":0,"rparen":0}}],"rbrace":2250}}],"ellipsis":0,"rparen":0}},{"children":[],"start":2262,"end":2309,"code":"w := PerformRequest(router, \"GET\", \"/recovery\")","nodeType":"AssignStatement","column":0,"line":0,"lhs":[{"children":[],"start":2262,"end":2263,"code":"w","nodeType":"Identifier","column":0,"line":0,"namePos":2262,"name":"w","object":null}],"tokenPos":2264,"token":47,"rhs":[{"children":[],"start":2267,"end":2309,"code":"PerformRequest(router, \"GET\", \"/recovery\")","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":2267,"end":2281,"code":"PerformRequest","nodeType":"Identifier","column":0,"line":0,"namePos":2267,"name":"PerformRequest","object":null},"lparen":0,"args":[{"children":[],"start":2282,"end":2288,"code":"router","nodeType":"Identifier","column":0,"line":0,"namePos":2282,"name":"router","object":null},{"children":[],"start":2290,"end":2295,"code":"\"GET\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":2290,"kind":9,"value":"\"GET\""},{"children":[],"start":2297,"end":2308,"code":"\"/recovery\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":2297,"kind":9,"value":"\"/recovery\""}],"ellipsis":0,"rparen":0}]},{"children":[],"start":2320,"end":2366,"code":"assert.Equal(t, http.StatusBadRequest, w.Code)","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":2320,"end":2366,"code":"assert.Equal(t, http.StatusBadRequest, w.Code)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":2320,"end":2332,"code":"assert.Equal","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":2320,"end":2326,"code":"assert","nodeType":"Identifier","column":0,"line":0,"namePos":2320,"name":"assert","object":null},"sel":{"children":[],"start":2327,"end":2332,"code":"Equal","nodeType":"Identifier","column":0,"line":0,"namePos":2327,"name":"Equal","object":null}},"lparen":0,"args":[{"children":[],"start":2333,"end":2334,"code":"t","nodeType":"Identifier","column":0,"line":0,"namePos":2333,"name":"t","object":null},{"children":[],"start":2336,"end":2357,"code":"http.StatusBadRequest","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":2336,"end":2340,"code":"http","nodeType":"Identifier","column":0,"line":0,"namePos":2336,"name":"http","object":null},"sel":{"children":[],"start":2341,"end":2357,"code":"StatusBadRequest","nodeType":"Identifier","column":0,"line":0,"namePos":2341,"name":"StatusBadRequest","object":null}},{"children":[],"start":2359,"end":2365,"code":"w.Code","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":2359,"end":2360,"code":"w","nodeType":"Identifier","column":0,"line":0,"namePos":2359,"name":"w","object":null},"sel":{"children":[],"start":2361,"end":2365,"code":"Code","nodeType":"Identifier","column":0,"line":0,"namePos":2361,"name":"Code","object":null}}],"ellipsis":0,"rparen":0}}],"rbrace":2367}},{"children":[],"start":2370,"end":2638,"code":"func TestSource(t *testing.T) {\n\tbs := source(nil, 0)\n\tassert.Equal(t, dunno, bs)\n\tin := [][]byte{[]byte(\"Hello world.\"), []byte(\"Hi, gin..\")}\n\tbs = source(in, 10)\n\tassert.Equal(t, dunno, bs)\n\tbs = source(in, 1)\n\tassert.Equal(t, []byte(\"Hello world.\"), bs)\n}","nodeType":"FunctionDeclaration","column":0,"line":0,"doc":null,"receiver":null,"name":{"children":[],"start":2375,"end":2385,"code":"TestSource","nodeType":"Identifier","column":0,"line":0,"namePos":2375,"name":"TestSource","object":null},"type":{"children":[],"start":2370,"end":2399,"code":"func(t *testing.T)","nodeType":"FunctionType","column":0,"line":0,"Function":2370,"TypeParams":null,"Params":{"children":[],"start":2385,"end":2399,"code":"","nodeType":"FieldList","column":0,"line":0,"opening":2385,"list":[{"children":[],"start":2386,"end":2398,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":[{"children":[],"start":2386,"end":2387,"code":"t","nodeType":"Identifier","column":0,"line":0,"namePos":2386,"name":"t","object":null}],"type":{"children":[],"start":2388,"end":2398,"code":"*testing.T","nodeType":"StarExpression","column":0,"line":0,"star":2388,"expression":{"children":[],"start":2389,"end":2398,"code":"testing.T","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":2389,"end":2396,"code":"testing","nodeType":"Identifier","column":0,"line":0,"namePos":2389,"name":"testing","object":null},"sel":{"children":[],"start":2397,"end":2398,"code":"T","nodeType":"Identifier","column":0,"line":0,"namePos":2397,"name":"T","object":null}}},"tag":null,"comment":null}],"closing":2398},"Results":null},"body":{"children":[],"start":2400,"end":2638,"code":"{\n\tbs := source(nil, 0)\n\tassert.Equal(t, dunno, bs)\n\tin := [][]byte{[]byte(\"Hello world.\"), []byte(\"Hi, gin..\")}\n\tbs = source(in, 10)\n\tassert.Equal(t, dunno, bs)\n\tbs = source(in, 1)\n\tassert.Equal(t, []byte(\"Hello world.\"), bs)\n}","nodeType":"BlockStatement","column":0,"line":0,"lbrace":2400,"list":[{"children":[],"start":2403,"end":2423,"code":"bs := source(nil, 0)","nodeType":"AssignStatement","column":0,"line":0,"lhs":[{"children":[],"start":2403,"end":2405,"code":"bs","nodeType":"Identifier","column":0,"line":0,"namePos":2403,"name":"bs","object":null}],"tokenPos":2406,"token":47,"rhs":[{"children":[],"start":2409,"end":2423,"code":"source(nil, 0)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":2409,"end":2415,"code":"source","nodeType":"Identifier","column":0,"line":0,"namePos":2409,"name":"source","object":null},"lparen":0,"args":[{"children":[],"start":2416,"end":2419,"code":"nil","nodeType":"Identifier","column":0,"line":0,"namePos":2416,"name":"nil","object":null},{"children":[],"start":2421,"end":2422,"code":"0","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":2421,"kind":5,"value":"0"}],"ellipsis":0,"rparen":0}]},{"children":[],"start":2425,"end":2451,"code":"assert.Equal(t, dunno, bs)","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":2425,"end":2451,"code":"assert.Equal(t, dunno, bs)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":2425,"end":2437,"code":"assert.Equal","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":2425,"end":2431,"code":"assert","nodeType":"Identifier","column":0,"line":0,"namePos":2425,"name":"assert","object":null},"sel":{"children":[],"start":2432,"end":2437,"code":"Equal","nodeType":"Identifier","column":0,"line":0,"namePos":2432,"name":"Equal","object":null}},"lparen":0,"args":[{"children":[],"start":2438,"end":2439,"code":"t","nodeType":"Identifier","column":0,"line":0,"namePos":2438,"name":"t","object":null},{"children":[],"start":2441,"end":2446,"code":"dunno","nodeType":"Identifier","column":0,"line":0,"namePos":2441,"name":"dunno","object":null},{"children":[],"start":2448,"end":2450,"code":"bs","nodeType":"Identifier","column":0,"line":0,"namePos":2448,"name":"bs","object":null}],"ellipsis":0,"rparen":0}},{"children":[],"start":2454,"end":2521,"code":"in := [][]byte{[]byte(\"Hello world.\"), []byte(\"Hi, gin..\")}","nodeType":"AssignStatement","column":0,"line":0,"lhs":[{"children":[],"start":2454,"end":2456,"code":"in","nodeType":"Identifier","column":0,"line":0,"namePos":2454,"name":"in","object":null}],"tokenPos":2457,"token":47,"rhs":[{"children":[],"start":2460,"end":2521,"code":"[][]byte{[]byte(\"Hello world.\"), []byte(\"Hi, gin..\")}","nodeType":"CompositeLiteral","column":0,"line":0,"type":{"children":[],"start":2460,"end":2468,"code":"[][]byte","nodeType":"ArrayType","column":0,"line":0,"leftBracket":2460,"length":null,"element":{"children":[],"start":2462,"end":2468,"code":"[]byte","nodeType":"ArrayType","column":0,"line":0,"leftBracket":2462,"length":null,"element":{"children":[],"start":2464,"end":2468,"code":"byte","nodeType":"Identifier","column":0,"line":0,"namePos":2464,"name":"byte","object":null}}},"lbrace":2468,"elements":[{"children":[],"start":2472,"end":2494,"code":"[]byte(\"Hello world.\")","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":2472,"end":2478,"code":"[]byte","nodeType":"ArrayType","column":0,"line":0,"leftBracket":2472,"length":null,"element":{"children":[],"start":2474,"end":2478,"code":"byte","nodeType":"Identifier","column":0,"line":0,"namePos":2474,"name":"byte","object":null}},"lparen":0,"args":[{"children":[],"start":2479,"end":2493,"code":"\"Hello world.\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":2479,"kind":9,"value":"\"Hello world.\""}],"ellipsis":0,"rparen":0},{"children":[],"start":2498,"end":2517,"code":"[]byte(\"Hi, gin..\")","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":2498,"end":2504,"code":"[]byte","nodeType":"ArrayType","column":0,"line":0,"leftBracket":2498,"length":null,"element":{"children":[],"start":2500,"end":2504,"code":"byte","nodeType":"Identifier","column":0,"line":0,"namePos":2500,"name":"byte","object":null}},"lparen":0,"args":[{"children":[],"start":2505,"end":2516,"code":"\"Hi, gin..\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":2505,"kind":9,"value":"\"Hi, gin..\""}],"ellipsis":0,"rparen":0}],"rbrace":2520,"incomplete":false}]},{"children":[],"start":2523,"end":2542,"code":"bs = source(in, 10)","nodeType":"AssignStatement","column":0,"line":0,"lhs":[{"children":[],"start":2523,"end":2525,"code":"bs","nodeType":"Identifier","column":0,"line":0,"namePos":2523,"name":"bs","object":null}],"tokenPos":2526,"token":42,"rhs":[{"children":[],"start":2528,"end":2542,"code":"source(in, 10)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":2528,"end":2534,"code":"source","nodeType":"Identifier","column":0,"line":0,"namePos":2528,"name":"source","object":null},"lparen":0,"args":[{"children":[],"start":2535,"end":2537,"code":"in","nodeType":"Identifier","column":0,"line":0,"namePos":2535,"name":"in","object":null},{"children":[],"start":2539,"end":2541,"code":"10","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":2539,"kind":5,"value":"10"}],"ellipsis":0,"rparen":0}]},{"children":[],"start":2544,"end":2570,"code":"assert.Equal(t, dunno, bs)","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":2544,"end":2570,"code":"assert.Equal(t, dunno, bs)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":2544,"end":2556,"code":"assert.Equal","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":2544,"end":2550,"code":"assert","nodeType":"Identifier","column":0,"line":0,"namePos":2544,"name":"assert","object":null},"sel":{"children":[],"start":2551,"end":2556,"code":"Equal","nodeType":"Identifier","column":0,"line":0,"namePos":2551,"name":"Equal","object":null}},"lparen":0,"args":[{"children":[],"start":2557,"end":2558,"code":"t","nodeType":"Identifier","column":0,"line":0,"namePos":2557,"name":"t","object":null},{"children":[],"start":2560,"end":2565,"code":"dunno","nodeType":"Identifier","column":0,"line":0,"namePos":2560,"name":"dunno","object":null},{"children":[],"start":2567,"end":2569,"code":"bs","nodeType":"Identifier","column":0,"line":0,"namePos":2567,"name":"bs","object":null}],"ellipsis":0,"rparen":0}},{"children":[],"start":2573,"end":2591,"code":"bs = source(in, 1)","nodeType":"AssignStatement","column":0,"line":0,"lhs":[{"children":[],"start":2573,"end":2575,"code":"bs","nodeType":"Identifier","column":0,"line":0,"namePos":2573,"name":"bs","object":null}],"tokenPos":2576,"token":42,"rhs":[{"children":[],"start":2578,"end":2591,"code":"source(in, 1)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":2578,"end":2584,"code":"source","nodeType":"Identifier","column":0,"line":0,"namePos":2578,"name":"source","object":null},"lparen":0,"args":[{"children":[],"start":2585,"end":2587,"code":"in","nodeType":"Identifier","column":0,"line":0,"namePos":2585,"name":"in","object":null},{"children":[],"start":2589,"end":2590,"code":"1","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":2589,"kind":5,"value":"1"}],"ellipsis":0,"rparen":0}]},{"children":[],"start":2593,"end":2636,"code":"assert.Equal(t, []byte(\"Hello world.\"), bs)","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":2593,"end":2636,"code":"assert.Equal(t, []byte(\"Hello world.\"), bs)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":2593,"end":2605,"code":"assert.Equal","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":2593,"end":2599,"code":"assert","nodeType":"Identifier","column":0,"line":0,"namePos":2593,"name":"assert","object":null},"sel":{"children":[],"start":2600,"end":2605,"code":"Equal","nodeType":"Identifier","column":0,"line":0,"namePos":2600,"name":"Equal","object":null}},"lparen":0,"args":[{"children":[],"start":2606,"end":2607,"code":"t","nodeType":"Identifier","column":0,"line":0,"namePos":2606,"name":"t","object":null},{"children":[],"start":2609,"end":2631,"code":"[]byte(\"Hello world.\")","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":2609,"end":2615,"code":"[]byte","nodeType":"ArrayType","column":0,"line":0,"leftBracket":2609,"length":null,"element":{"children":[],"start":2611,"end":2615,"code":"byte","nodeType":"Identifier","column":0,"line":0,"namePos":2611,"name":"byte","object":null}},"lparen":0,"args":[{"children":[],"start":2616,"end":2630,"code":"\"Hello world.\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":2616,"kind":9,"value":"\"Hello world.\""}],"ellipsis":0,"rparen":0},{"children":[],"start":2633,"end":2635,"code":"bs","nodeType":"Identifier","column":0,"line":0,"namePos":2633,"name":"bs","object":null}],"ellipsis":0,"rparen":0}}],"rbrace":2637}},{"children":[],"start":2640,"end":2722,"code":"func TestFunction(t *testing.T) {\n\tbs := function(1)\n\tassert.Equal(t, dunno, bs)\n}","nodeType":"FunctionDeclaration","column":0,"line":0,"doc":null,"receiver":null,"name":{"children":[],"start":2645,"end":2657,"code":"TestFunction","nodeType":"Identifier","column":0,"line":0,"namePos":2645,"name":"TestFunction","object":null},"type":{"children":[],"start":2640,"end":2671,"code":"func(t *testing.T)","nodeType":"FunctionType","column":0,"line":0,"Function":2640,"TypeParams":null,"Params":{"children":[],"start":2657,"end":2671,"code":"","nodeType":"FieldList","column":0,"line":0,"opening":2657,"list":[{"children":[],"start":2658,"end":2670,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":[{"children":[],"start":2658,"end":2659,"code":"t","nodeType":"Identifier","column":0,"line":0,"namePos":2658,"name":"t","object":null}],"type":{"children":[],"start":2660,"end":2670,"code":"*testing.T","nodeType":"StarExpression","column":0,"line":0,"star":2660,"expression":{"children":[],"start":2661,"end":2670,"code":"testing.T","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":2661,"end":2668,"code":"testing","nodeType":"Identifier","column":0,"line":0,"namePos":2661,"name":"testing","object":null},"sel":{"children":[],"start":2669,"end":2670,"code":"T","nodeType":"Identifier","column":0,"line":0,"namePos":2669,"name":"T","object":null}}},"tag":null,"comment":null}],"closing":2670},"Results":null},"body":{"children":[],"start":2672,"end":2722,"code":"{\n\tbs := function(1)\n\tassert.Equal(t, dunno, bs)\n}","nodeType":"BlockStatement","column":0,"line":0,"lbrace":2672,"list":[{"children":[],"start":2675,"end":2692,"code":"bs := function(1)","nodeType":"AssignStatement","column":0,"line":0,"lhs":[{"children":[],"start":2675,"end":2677,"code":"bs","nodeType":"Identifier","column":0,"line":0,"namePos":2675,"name":"bs","object":null}],"tokenPos":2678,"token":47,"rhs":[{"children":[],"start":2681,"end":2692,"code":"function(1)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":2681,"end":2689,"code":"function","nodeType":"Identifier","column":0,"line":0,"namePos":2681,"name":"function","object":null},"lparen":0,"args":[{"children":[],"start":2690,"end":2691,"code":"1","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":2690,"kind":5,"value":"1"}],"ellipsis":0,"rparen":0}]},{"children":[],"start":2694,"end":2720,"code":"assert.Equal(t, dunno, bs)","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":2694,"end":2720,"code":"assert.Equal(t, dunno, bs)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":2694,"end":2706,"code":"assert.Equal","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":2694,"end":2700,"code":"assert","nodeType":"Identifier","column":0,"line":0,"namePos":2694,"name":"assert","object":null},"sel":{"children":[],"start":2701,"end":2706,"code":"Equal","nodeType":"Identifier","column":0,"line":0,"namePos":2701,"name":"Equal","object":null}},"lparen":0,"args":[{"children":[],"start":2707,"end":2708,"code":"t","nodeType":"Identifier","column":0,"line":0,"namePos":2707,"name":"t","object":null},{"children":[],"start":2710,"end":2715,"code":"dunno","nodeType":"Identifier","column":0,"line":0,"namePos":2710,"name":"dunno","object":null},{"children":[],"start":2717,"end":2719,"code":"bs","nodeType":"Identifier","column":0,"line":0,"namePos":2717,"name":"bs","object":null}],"ellipsis":0,"rparen":0}}],"rbrace":2721}},{"children":[],"start":2831,"end":3636,"code":"func TestPanicWithBrokenPipe(t *testing.T) {\n\tconst expectCode = 204\n\texpectMsgs := map[syscall.Errno]string{syscall.EPIPE: \"broken pipe\", syscall.ECONNRESET: \"connection reset by peer\"}\n\tfor errno, expectMsg := range expectMsgs {\n\t\tt.Run(expectMsg, func(t *testing.T) {\n\t\t\tvar buf strings.Builder\n\t\t\trouter := New()\n\t\t\trouter.Use(RecoveryWithWriter(\u0026buf))\n\t\t\trouter.GET(\"/recovery\", func(c *Context) {\n\t\t\t\tc.Header(\"X-Test\", \"Value\")\n\t\t\t\tc.Status(expectCode)\n\t\t\t\te := \u0026net.OpError{Err: \u0026os.SyscallError{Err: errno}}\n\t\t\t\tpanic(e)\n\t\t\t})\n\t\t\tw := PerformRequest(router, \"GET\", \"/recovery\")\n\t\t\tassert.Equal(t, expectCode, w.Code)\n\t\t\tassert.Contains(t, strings.ToLower(buf.String()), expectMsg)\n\t\t})\n\t}\n}","nodeType":"FunctionDeclaration","column":0,"line":0,"doc":null,"receiver":null,"name":{"children":[],"start":2836,"end":2859,"code":"TestPanicWithBrokenPipe","nodeType":"Identifier","column":0,"line":0,"namePos":2836,"name":"TestPanicWithBrokenPipe","object":null},"type":{"children":[],"start":2831,"end":2873,"code":"func(t *testing.T)","nodeType":"FunctionType","column":0,"line":0,"Function":2831,"TypeParams":null,"Params":{"children":[],"start":2859,"end":2873,"code":"","nodeType":"FieldList","column":0,"line":0,"opening":2859,"list":[{"children":[],"start":2860,"end":2872,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":[{"children":[],"start":2860,"end":2861,"code":"t","nodeType":"Identifier","column":0,"line":0,"namePos":2860,"name":"t","object":null}],"type":{"children":[],"start":2862,"end":2872,"code":"*testing.T","nodeType":"StarExpression","column":0,"line":0,"star":2862,"expression":{"children":[],"start":2863,"end":2872,"code":"testing.T","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":2863,"end":2870,"code":"testing","nodeType":"Identifier","column":0,"line":0,"namePos":2863,"name":"testing","object":null},"sel":{"children":[],"start":2871,"end":2872,"code":"T","nodeType":"Identifier","column":0,"line":0,"namePos":2871,"name":"T","object":null}}},"tag":null,"comment":null}],"closing":2872},"Results":null},"body":{"children":[],"start":2874,"end":3636,"code":"{\n\tconst expectCode = 204\n\texpectMsgs := map[syscall.Errno]string{syscall.EPIPE: \"broken pipe\", syscall.ECONNRESET: \"connection reset by peer\"}\n\tfor errno, expectMsg := range expectMsgs {\n\t\tt.Run(expectMsg, func(t *testing.T) {\n\t\t\tvar buf strings.Builder\n\t\t\trouter := New()\n\t\t\trouter.Use(RecoveryWithWriter(\u0026buf))\n\t\t\trouter.GET(\"/recovery\", func(c *Context) {\n\t\t\t\tc.Header(\"X-Test\", \"Value\")\n\t\t\t\tc.Status(expectCode)\n\t\t\t\te := \u0026net.OpError{Err: \u0026os.SyscallError{Err: errno}}\n\t\t\t\tpanic(e)\n\t\t\t})\n\t\t\tw := PerformRequest(router, \"GET\", \"/recovery\")\n\t\t\tassert.Equal(t, expectCode, w.Code)\n\t\t\tassert.Contains(t, strings.ToLower(buf.String()), expectMsg)\n\t\t})\n\t}\n}","nodeType":"BlockStatement","column":0,"line":0,"lbrace":2874,"list":[{"children":[],"start":2877,"end":2899,"code":"const expectCode = 204","nodeType":"DeclarationStatement","column":0,"line":0,"declaration":{"children":[],"start":2877,"end":2899,"code":"const expectCode = 204","nodeType":"GenericDeclaration","column":0,"line":0,"doc":null,"tokenPosition":2877,"token":64,"lparen":0,"specifications":[{"children":[],"start":2883,"end":2899,"code":"expectCode = 204","nodeType":"ValueSpecification","column":0,"line":0,"doc":null,"names":[{"children":[],"start":2883,"end":2893,"code":"expectCode","nodeType":"Identifier","column":0,"line":0,"namePos":2883,"name":"expectCode","object":null}],"type":null,"values":[{"children":[],"start":2896,"end":2899,"code":"204","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":2896,"kind":5,"value":"204"}],"comment":null}],"rparen":0}},{"children":[],"start":2902,"end":3031,"code":"expectMsgs := map[syscall.Errno]string{syscall.EPIPE: \"broken pipe\", syscall.ECONNRESET: \"connection reset by peer\"}","nodeType":"AssignStatement","column":0,"line":0,"lhs":[{"children":[],"start":2902,"end":2912,"code":"expectMsgs","nodeType":"Identifier","column":0,"line":0,"namePos":2902,"name":"expectMsgs","object":null}],"tokenPos":2913,"token":47,"rhs":[{"children":[],"start":2916,"end":3031,"code":"map[syscall.Errno]string{syscall.EPIPE: \"broken pipe\", syscall.ECONNRESET: \"connection reset by peer\"}","nodeType":"CompositeLiteral","column":0,"line":0,"type":{"children":[],"start":2916,"end":2940,"code":"map[syscall.Errno]string","nodeType":"MapType","column":0,"line":0,"map":2916,"key":{"children":[],"start":2920,"end":2933,"code":"syscall.Errno","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":2920,"end":2927,"code":"syscall","nodeType":"Identifier","column":0,"line":0,"namePos":2920,"name":"syscall","object":null},"sel":{"children":[],"start":2928,"end":2933,"code":"Errno","nodeType":"Identifier","column":0,"line":0,"namePos":2928,"name":"Errno","object":null}},"value":{"children":[],"start":2934,"end":2940,"code":"string","nodeType":"Identifier","column":0,"line":0,"namePos":2934,"name":"string","object":null}},"lbrace":2940,"elements":[{"children":[],"start":2944,"end":2977,"code":"syscall.EPIPE: \"broken pipe\"","nodeType":"KeyValueExpression","column":0,"line":0,"key":{"children":[],"start":2944,"end":2957,"code":"syscall.EPIPE","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":2944,"end":2951,"code":"syscall","nodeType":"Identifier","column":0,"line":0,"namePos":2944,"name":"syscall","object":null},"sel":{"children":[],"start":2952,"end":2957,"code":"EPIPE","nodeType":"Identifier","column":0,"line":0,"namePos":2952,"name":"EPIPE","object":null}},"colon":0,"value":{"children":[],"start":2964,"end":2977,"code":"\"broken pipe\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":2964,"kind":9,"value":"\"broken pipe\""}},{"children":[],"start":2981,"end":3027,"code":"syscall.ECONNRESET: \"connection reset by peer\"","nodeType":"KeyValueExpression","column":0,"line":0,"key":{"children":[],"start":2981,"end":2999,"code":"syscall.ECONNRESET","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":2981,"end":2988,"code":"syscall","nodeType":"Identifier","column":0,"line":0,"namePos":2981,"name":"syscall","object":null},"sel":{"children":[],"start":2989,"end":2999,"code":"ECONNRESET","nodeType":"Identifier","column":0,"line":0,"namePos":2989,"name":"ECONNRESET","object":null}},"colon":0,"value":{"children":[],"start":3001,"end":3027,"code":"\"connection reset by peer\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":3001,"kind":9,"value":"\"connection reset by peer\""}}],"rbrace":3030,"incomplete":false}]},{"children":[],"start":3034,"end":3634,"code":"for errno, expectMsg := range expectMsgs {\n\tt.Run(expectMsg, func(t *testing.T) {\n\t\tvar buf strings.Builder\n\t\trouter := New()\n\t\trouter.Use(RecoveryWithWriter(\u0026buf))\n\t\trouter.GET(\"/recovery\", func(c *Context) {\n\t\t\tc.Header(\"X-Test\", \"Value\")\n\t\t\tc.Status(expectCode)\n\t\t\te := \u0026net.OpError{Err: \u0026os.SyscallError{Err: errno}}\n\t\t\tpanic(e)\n\t\t})\n\t\tw := PerformRequest(router, \"GET\", \"/recovery\")\n\t\tassert.Equal(t, expectCode, w.Code)\n\t\tassert.Contains(t, strings.ToLower(buf.String()), expectMsg)\n\t})\n}","nodeType":"RangeStatement","column":0,"line":0,"for":3034,"key":{"children":[],"start":3038,"end":3043,"code":"errno","nodeType":"Identifier","column":0,"line":0,"namePos":3038,"name":"errno","object":null},"value":{"children":[],"start":3045,"end":3054,"code":"expectMsg","nodeType":"Identifier","column":0,"line":0,"namePos":3045,"name":"expectMsg","object":null},"tokenPos":3055,"token":47,"range":3058,"expression":{"children":[],"start":3064,"end":3074,"code":"expectMsgs","nodeType":"Identifier","column":0,"line":0,"namePos":3064,"name":"expectMsgs","object":null},"body":{"children":[],"start":3075,"end":3634,"code":"{\n\tt.Run(expectMsg, func(t *testing.T) {\n\t\tvar buf strings.Builder\n\t\trouter := New()\n\t\trouter.Use(RecoveryWithWriter(\u0026buf))\n\t\trouter.GET(\"/recovery\", func(c *Context) {\n\t\t\tc.Header(\"X-Test\", \"Value\")\n\t\t\tc.Status(expectCode)\n\t\t\te := \u0026net.OpError{Err: \u0026os.SyscallError{Err: errno}}\n\t\t\tpanic(e)\n\t\t})\n\t\tw := PerformRequest(router, \"GET\", \"/recovery\")\n\t\tassert.Equal(t, expectCode, w.Code)\n\t\tassert.Contains(t, strings.ToLower(buf.String()), expectMsg)\n\t})\n}","nodeType":"BlockStatement","column":0,"line":0,"lbrace":3075,"list":[{"children":[],"start":3079,"end":3631,"code":"t.Run(expectMsg, func(t *testing.T) {\n\tvar buf strings.Builder\n\trouter := New()\n\trouter.Use(RecoveryWithWriter(\u0026buf))\n\trouter.GET(\"/recovery\", func(c *Context) {\n\t\tc.Header(\"X-Test\", \"Value\")\n\t\tc.Status(expectCode)\n\t\te := \u0026net.OpError{Err: \u0026os.SyscallError{Err: errno}}\n\t\tpanic(e)\n\t})\n\tw := PerformRequest(router, \"GET\", \"/recovery\")\n\tassert.Equal(t, expectCode, w.Code)\n\tassert.Contains(t, strings.ToLower(buf.String()), expectMsg)\n})","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":3079,"end":3631,"code":"t.Run(expectMsg, func(t *testing.T) {\n\tvar buf strings.Builder\n\trouter := New()\n\trouter.Use(RecoveryWithWriter(\u0026buf))\n\trouter.GET(\"/recovery\", func(c *Context) {\n\t\tc.Header(\"X-Test\", \"Value\")\n\t\tc.Status(expectCode)\n\t\te := \u0026net.OpError{Err: \u0026os.SyscallError{Err: errno}}\n\t\tpanic(e)\n\t})\n\tw := PerformRequest(router, \"GET\", \"/recovery\")\n\tassert.Equal(t, expectCode, w.Code)\n\tassert.Contains(t, strings.ToLower(buf.String()), expectMsg)\n})","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":3079,"end":3084,"code":"t.Run","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":3079,"end":3080,"code":"t","nodeType":"Identifier","column":0,"line":0,"namePos":3079,"name":"t","object":null},"sel":{"children":[],"start":3081,"end":3084,"code":"Run","nodeType":"Identifier","column":0,"line":0,"namePos":3081,"name":"Run","object":null}},"lparen":0,"args":[{"children":[],"start":3085,"end":3094,"code":"expectMsg","nodeType":"Identifier","column":0,"line":0,"namePos":3085,"name":"expectMsg","object":null},{"children":[],"start":3096,"end":3630,"code":"func(t *testing.T) {\n\tvar buf strings.Builder\n\trouter := New()\n\trouter.Use(RecoveryWithWriter(\u0026buf))\n\trouter.GET(\"/recovery\", func(c *Context) {\n\t\tc.Header(\"X-Test\", \"Value\")\n\t\tc.Status(expectCode)\n\t\te := \u0026net.OpError{Err: \u0026os.SyscallError{Err: errno}}\n\t\tpanic(e)\n\t})\n\tw := PerformRequest(router, \"GET\", \"/recovery\")\n\tassert.Equal(t, expectCode, w.Code)\n\tassert.Contains(t, strings.ToLower(buf.String()), expectMsg)\n}","nodeType":"FunctionLiteral","column":0,"line":0,"type":{"children":[],"start":3096,"end":3114,"code":"func(t *testing.T)","nodeType":"FunctionType","column":0,"line":0,"Function":3096,"TypeParams":null,"Params":{"children":[],"start":3100,"end":3114,"code":"","nodeType":"FieldList","column":0,"line":0,"opening":3100,"list":[{"children":[],"start":3101,"end":3113,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":[{"children":[],"start":3101,"end":3102,"code":"t","nodeType":"Identifier","column":0,"line":0,"namePos":3101,"name":"t","object":null}],"type":{"children":[],"start":3103,"end":3113,"code":"*testing.T","nodeType":"StarExpression","column":0,"line":0,"star":3103,"expression":{"children":[],"start":3104,"end":3113,"code":"testing.T","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":3104,"end":3111,"code":"testing","nodeType":"Identifier","column":0,"line":0,"namePos":3104,"name":"testing","object":null},"sel":{"children":[],"start":3112,"end":3113,"code":"T","nodeType":"Identifier","column":0,"line":0,"namePos":3112,"name":"T","object":null}}},"tag":null,"comment":null}],"closing":3113},"Results":null},"body":{"children":[],"start":3115,"end":3630,"code":"{\n\tvar buf strings.Builder\n\trouter := New()\n\trouter.Use(RecoveryWithWriter(\u0026buf))\n\trouter.GET(\"/recovery\", func(c *Context) {\n\t\tc.Header(\"X-Test\", \"Value\")\n\t\tc.Status(expectCode)\n\t\te := \u0026net.OpError{Err: \u0026os.SyscallError{Err: errno}}\n\t\tpanic(e)\n\t})\n\tw := PerformRequest(router, \"GET\", \"/recovery\")\n\tassert.Equal(t, expectCode, w.Code)\n\tassert.Contains(t, strings.ToLower(buf.String()), expectMsg)\n}","nodeType":"BlockStatement","column":0,"line":0,"lbrace":3115,"list":[{"children":[],"start":3120,"end":3143,"code":"var buf strings.Builder","nodeType":"DeclarationStatement","column":0,"line":0,"declaration":{"children":[],"start":3120,"end":3143,"code":"var buf strings.Builder","nodeType":"GenericDeclaration","column":0,"line":0,"doc":null,"tokenPosition":3120,"token":85,"lparen":0,"specifications":[{"children":[],"start":3124,"end":3143,"code":"buf strings.Builder","nodeType":"ValueSpecification","column":0,"line":0,"doc":null,"names":[{"children":[],"start":3124,"end":3127,"code":"buf","nodeType":"Identifier","column":0,"line":0,"namePos":3124,"name":"buf","object":null}],"type":{"children":[],"start":3128,"end":3143,"code":"strings.Builder","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":3128,"end":3135,"code":"strings","nodeType":"Identifier","column":0,"line":0,"namePos":3128,"name":"strings","object":null},"sel":{"children":[],"start":3136,"end":3143,"code":"Builder","nodeType":"Identifier","column":0,"line":0,"namePos":3136,"name":"Builder","object":null}},"values":[],"comment":null}],"rparen":0}},{"children":[],"start":3148,"end":3163,"code":"router := New()","nodeType":"AssignStatement","column":0,"line":0,"lhs":[{"children":[],"start":3148,"end":3154,"code":"router","nodeType":"Identifier","column":0,"line":0,"namePos":3148,"name":"router","object":null}],"tokenPos":3155,"token":47,"rhs":[{"children":[],"start":3158,"end":3163,"code":"New()","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":3158,"end":3161,"code":"New","nodeType":"Identifier","column":0,"line":0,"namePos":3158,"name":"New","object":null},"lparen":0,"args":[],"ellipsis":0,"rparen":0}]},{"children":[],"start":3167,"end":3203,"code":"router.Use(RecoveryWithWriter(\u0026buf))","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":3167,"end":3203,"code":"router.Use(RecoveryWithWriter(\u0026buf))","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":3167,"end":3177,"code":"router.Use","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":3167,"end":3173,"code":"router","nodeType":"Identifier","column":0,"line":0,"namePos":3167,"name":"router","object":null},"sel":{"children":[],"start":3174,"end":3177,"code":"Use","nodeType":"Identifier","column":0,"line":0,"namePos":3174,"name":"Use","object":null}},"lparen":0,"args":[{"children":[],"start":3178,"end":3202,"code":"RecoveryWithWriter(\u0026buf)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":3178,"end":3196,"code":"RecoveryWithWriter","nodeType":"Identifier","column":0,"line":0,"namePos":3178,"name":"RecoveryWithWriter","object":null},"lparen":0,"args":[{"children":[],"start":3197,"end":3201,"code":"\u0026buf","nodeType":"UnaryExpression","column":0,"line":0,"opPos":3197,"op":17,"expression":{"children":[],"start":3198,"end":3201,"code":"buf","nodeType":"Identifier","column":0,"line":0,"namePos":3198,"name":"buf","object":null}}],"ellipsis":0,"rparen":0}],"ellipsis":0,"rparen":0}},{"children":[],"start":3207,"end":3451,"code":"router.GET(\"/recovery\", func(c *Context) {\n\tc.Header(\"X-Test\", \"Value\")\n\tc.Status(expectCode)\n\te := \u0026net.OpError{Err: \u0026os.SyscallError{Err: errno}}\n\tpanic(e)\n})","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":3207,"end":3451,"code":"router.GET(\"/recovery\", func(c *Context) {\n\tc.Header(\"X-Test\", \"Value\")\n\tc.Status(expectCode)\n\te := \u0026net.OpError{Err: \u0026os.SyscallError{Err: errno}}\n\tpanic(e)\n})","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":3207,"end":3217,"code":"router.GET","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":3207,"end":3213,"code":"router","nodeType":"Identifier","column":0,"line":0,"namePos":3207,"name":"router","object":null},"sel":{"children":[],"start":3214,"end":3217,"code":"GET","nodeType":"Identifier","column":0,"line":0,"namePos":3214,"name":"GET","object":null}},"lparen":0,"args":[{"children":[],"start":3218,"end":3229,"code":"\"/recovery\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":3218,"kind":9,"value":"\"/recovery\""},{"children":[],"start":3231,"end":3450,"code":"func(c *Context) {\n\tc.Header(\"X-Test\", \"Value\")\n\tc.Status(expectCode)\n\te := \u0026net.OpError{Err: \u0026os.SyscallError{Err: errno}}\n\tpanic(e)\n}","nodeType":"FunctionLiteral","column":0,"line":0,"type":{"children":[],"start":3231,"end":3247,"code":"func(c *Context)","nodeType":"FunctionType","column":0,"line":0,"Function":3231,"TypeParams":null,"Params":{"children":[],"start":3235,"end":3247,"code":"","nodeType":"FieldList","column":0,"line":0,"opening":3235,"list":[{"children":[],"start":3236,"end":3246,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":[{"children":[],"start":3236,"end":3237,"code":"c","nodeType":"Identifier","column":0,"line":0,"namePos":3236,"name":"c","object":null}],"type":{"children":[],"start":3238,"end":3246,"code":"*Context","nodeType":"StarExpression","column":0,"line":0,"star":3238,"expression":{"children":[],"start":3239,"end":3246,"code":"Context","nodeType":"Identifier","column":0,"line":0,"namePos":3239,"name":"Context","object":null}},"tag":null,"comment":null}],"closing":3246},"Results":null},"body":{"children":[],"start":3248,"end":3450,"code":"{\n\tc.Header(\"X-Test\", \"Value\")\n\tc.Status(expectCode)\n\te := \u0026net.OpError{Err: \u0026os.SyscallError{Err: errno}}\n\tpanic(e)\n}","nodeType":"BlockStatement","column":0,"line":0,"lbrace":3248,"list":[{"children":[],"start":3284,"end":3311,"code":"c.Header(\"X-Test\", \"Value\")","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":3284,"end":3311,"code":"c.Header(\"X-Test\", \"Value\")","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":3284,"end":3292,"code":"c.Header","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":3284,"end":3285,"code":"c","nodeType":"Identifier","column":0,"line":0,"namePos":3284,"name":"c","object":null},"sel":{"children":[],"start":3286,"end":3292,"code":"Header","nodeType":"Identifier","column":0,"line":0,"namePos":3286,"name":"Header","object":null}},"lparen":0,"args":[{"children":[],"start":3293,"end":3301,"code":"\"X-Test\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":3293,"kind":9,"value":"\"X-Test\""},{"children":[],"start":3303,"end":3310,"code":"\"Value\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":3303,"kind":9,"value":"\"Value\""}],"ellipsis":0,"rparen":0}},{"children":[],"start":3316,"end":3336,"code":"c.Status(expectCode)","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":3316,"end":3336,"code":"c.Status(expectCode)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":3316,"end":3324,"code":"c.Status","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":3316,"end":3317,"code":"c","nodeType":"Identifier","column":0,"line":0,"namePos":3316,"name":"c","object":null},"sel":{"children":[],"start":3318,"end":3324,"code":"Status","nodeType":"Identifier","column":0,"line":0,"namePos":3318,"name":"Status","object":null}},"lparen":0,"args":[{"children":[],"start":3325,"end":3335,"code":"expectCode","nodeType":"Identifier","column":0,"line":0,"namePos":3325,"name":"expectCode","object":null}],"ellipsis":0,"rparen":0}},{"children":[],"start":3380,"end":3432,"code":"e := \u0026net.OpError{Err: \u0026os.SyscallError{Err: errno}}","nodeType":"AssignStatement","column":0,"line":0,"lhs":[{"children":[],"start":3380,"end":3381,"code":"e","nodeType":"Identifier","column":0,"line":0,"namePos":3380,"name":"e","object":null}],"tokenPos":3382,"token":47,"rhs":[{"children":[],"start":3385,"end":3432,"code":"\u0026net.OpError{Err: \u0026os.SyscallError{Err: errno}}","nodeType":"UnaryExpression","column":0,"line":0,"opPos":3385,"op":17,"expression":{"children":[],"start":3386,"end":3432,"code":"net.OpError{Err: \u0026os.SyscallError{Err: errno}}","nodeType":"CompositeLiteral","column":0,"line":0,"type":{"children":[],"start":3386,"end":3397,"code":"net.OpError","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":3386,"end":3389,"code":"net","nodeType":"Identifier","column":0,"line":0,"namePos":3386,"name":"net","object":null},"sel":{"children":[],"start":3390,"end":3397,"code":"OpError","nodeType":"Identifier","column":0,"line":0,"namePos":3390,"name":"OpError","object":null}},"lbrace":3397,"elements":[{"children":[],"start":3398,"end":3431,"code":"Err: \u0026os.SyscallError{Err: errno}","nodeType":"KeyValueExpression","column":0,"line":0,"key":{"children":[],"start":3398,"end":3401,"code":"Err","nodeType":"Identifier","column":0,"line":0,"namePos":3398,"name":"Err","object":null},"colon":0,"value":{"children":[],"start":3403,"end":3431,"code":"\u0026os.SyscallError{Err: errno}","nodeType":"UnaryExpression","column":0,"line":0,"opPos":3403,"op":17,"expression":{"children":[],"start":3404,"end":3431,"code":"os.SyscallError{Err: errno}","nodeType":"CompositeLiteral","column":0,"line":0,"type":{"children":[],"start":3404,"end":3419,"code":"os.SyscallError","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":3404,"end":3406,"code":"os","nodeType":"Identifier","column":0,"line":0,"namePos":3404,"name":"os","object":null},"sel":{"children":[],"start":3407,"end":3419,"code":"SyscallError","nodeType":"Identifier","column":0,"line":0,"namePos":3407,"name":"SyscallError","object":null}},"lbrace":3419,"elements":[{"children":[],"start":3420,"end":3430,"code":"Err: errno","nodeType":"KeyValueExpression","column":0,"line":0,"key":{"children":[],"start":3420,"end":3423,"code":"Err","nodeType":"Identifier","column":0,"line":0,"namePos":3420,"name":"Err","object":null},"colon":0,"value":{"children":[],"start":3425,"end":3430,"code":"errno","nodeType":"Identifier","column":0,"line":0,"namePos":3425,"name":"errno","object":null}}],"rbrace":3430,"incomplete":false}}}],"rbrace":3431,"incomplete":false}}]},{"children":[],"start":3437,"end":3445,"code":"panic(e)","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":3437,"end":3445,"code":"panic(e)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":3437,"end":3442,"code":"panic","nodeType":"Identifier","column":0,"line":0,"namePos":3437,"name":"panic","object":null},"lparen":0,"args":[{"children":[],"start":3443,"end":3444,"code":"e","nodeType":"Identifier","column":0,"line":0,"namePos":3443,"name":"e","object":null}],"ellipsis":0,"rparen":0}}],"rbrace":3449}}],"ellipsis":0,"rparen":0}},{"children":[],"start":3465,"end":3512,"code":"w := PerformRequest(router, \"GET\", \"/recovery\")","nodeType":"AssignStatement","column":0,"line":0,"lhs":[{"children":[],"start":3465,"end":3466,"code":"w","nodeType":"Identifier","column":0,"line":0,"namePos":3465,"name":"w","object":null}],"tokenPos":3467,"token":47,"rhs":[{"children":[],"start":3470,"end":3512,"code":"PerformRequest(router, \"GET\", \"/recovery\")","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":3470,"end":3484,"code":"PerformRequest","nodeType":"Identifier","column":0,"line":0,"namePos":3470,"name":"PerformRequest","object":null},"lparen":0,"args":[{"children":[],"start":3485,"end":3491,"code":"router","nodeType":"Identifier","column":0,"line":0,"namePos":3485,"name":"router","object":null},{"children":[],"start":3493,"end":3498,"code":"\"GET\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":3493,"kind":9,"value":"\"GET\""},{"children":[],"start":3500,"end":3511,"code":"\"/recovery\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":3500,"kind":9,"value":"\"/recovery\""}],"ellipsis":0,"rparen":0}]},{"children":[],"start":3527,"end":3562,"code":"assert.Equal(t, expectCode, w.Code)","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":3527,"end":3562,"code":"assert.Equal(t, expectCode, w.Code)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":3527,"end":3539,"code":"assert.Equal","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":3527,"end":3533,"code":"assert","nodeType":"Identifier","column":0,"line":0,"namePos":3527,"name":"assert","object":null},"sel":{"children":[],"start":3534,"end":3539,"code":"Equal","nodeType":"Identifier","column":0,"line":0,"namePos":3534,"name":"Equal","object":null}},"lparen":0,"args":[{"children":[],"start":3540,"end":3541,"code":"t","nodeType":"Identifier","column":0,"line":0,"namePos":3540,"name":"t","object":null},{"children":[],"start":3543,"end":3553,"code":"expectCode","nodeType":"Identifier","column":0,"line":0,"namePos":3543,"name":"expectCode","object":null},{"children":[],"start":3555,"end":3561,"code":"w.Code","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":3555,"end":3556,"code":"w","nodeType":"Identifier","column":0,"line":0,"namePos":3555,"name":"w","object":null},"sel":{"children":[],"start":3557,"end":3561,"code":"Code","nodeType":"Identifier","column":0,"line":0,"namePos":3557,"name":"Code","object":null}}],"ellipsis":0,"rparen":0}},{"children":[],"start":3566,"end":3626,"code":"assert.Contains(t, strings.ToLower(buf.String()), expectMsg)","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":3566,"end":3626,"code":"assert.Contains(t, strings.ToLower(buf.String()), expectMsg)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":3566,"end":3581,"code":"assert.Contains","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":3566,"end":3572,"code":"assert","nodeType":"Identifier","column":0,"line":0,"namePos":3566,"name":"assert","object":null},"sel":{"children":[],"start":3573,"end":3581,"code":"Contains","nodeType":"Identifier","column":0,"line":0,"namePos":3573,"name":"Contains","object":null}},"lparen":0,"args":[{"children":[],"start":3582,"end":3583,"code":"t","nodeType":"Identifier","column":0,"line":0,"namePos":3582,"name":"t","object":null},{"children":[],"start":3585,"end":3614,"code":"strings.ToLower(buf.String())","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":3585,"end":3600,"code":"strings.ToLower","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":3585,"end":3592,"code":"strings","nodeType":"Identifier","column":0,"line":0,"namePos":3585,"name":"strings","object":null},"sel":{"children":[],"start":3593,"end":3600,"code":"ToLower","nodeType":"Identifier","column":0,"line":0,"namePos":3593,"name":"ToLower","object":null}},"lparen":0,"args":[{"children":[],"start":3601,"end":3613,"code":"buf.String()","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":3601,"end":3611,"code":"buf.String","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":3601,"end":3604,"code":"buf","nodeType":"Identifier","column":0,"line":0,"namePos":3601,"name":"buf","object":null},"sel":{"children":[],"start":3605,"end":3611,"code":"String","nodeType":"Identifier","column":0,"line":0,"namePos":3605,"name":"String","object":null}},"lparen":0,"args":[],"ellipsis":0,"rparen":0}],"ellipsis":0,"rparen":0},{"children":[],"start":3616,"end":3625,"code":"expectMsg","nodeType":"Identifier","column":0,"line":0,"namePos":3616,"name":"expectMsg","object":null}],"ellipsis":0,"rparen":0}}],"rbrace":3629}}],"ellipsis":0,"rparen":0}}],"rbrace":3633}}],"rbrace":3635}},{"children":[],"start":3638,"end":4743,"code":"func TestCustomRecoveryWithWriter(t *testing.T) {\n\terrBuffer := new(strings.Builder)\n\tbuffer := new(strings.Builder)\n\trouter := New()\n\thandleRecovery := func(c *Context, err any) {\n\t\terrBuffer.WriteString(err.(string))\n\t\tc.AbortWithStatus(http.StatusBadRequest)\n\t}\n\trouter.Use(CustomRecoveryWithWriter(buffer, handleRecovery))\n\trouter.GET(\"/recovery\", func(_ *Context) {\n\t\tpanic(\"Oupps, Houston, we have a problem\")\n\t})\n\tw := PerformRequest(router, \"GET\", \"/recovery\")\n\tassert.Equal(t, http.StatusBadRequest, w.Code)\n\tassert.Contains(t, buffer.String(), \"panic recovered\")\n\tassert.Contains(t, buffer.String(), \"Oupps, Houston, we have a problem\")\n\tassert.Contains(t, buffer.String(), t.Name())\n\tassert.NotContains(t, buffer.String(), \"GET /recovery\")\n\tSetMode(DebugMode)\n\tw = PerformRequest(router, \"GET\", \"/recovery\")\n\tassert.Equal(t, http.StatusBadRequest, w.Code)\n\tassert.Contains(t, buffer.String(), \"GET /recovery\")\n\tassert.Equal(t, strings.Repeat(\"Oupps, Houston, we have a problem\", 2), errBuffer.String())\n\tSetMode(TestMode)\n}","nodeType":"FunctionDeclaration","column":0,"line":0,"doc":null,"receiver":null,"name":{"children":[],"start":3643,"end":3671,"code":"TestCustomRecoveryWithWriter","nodeType":"Identifier","column":0,"line":0,"namePos":3643,"name":"TestCustomRecoveryWithWriter","object":null},"type":{"children":[],"start":3638,"end":3685,"code":"func(t *testing.T)","nodeType":"FunctionType","column":0,"line":0,"Function":3638,"TypeParams":null,"Params":{"children":[],"start":3671,"end":3685,"code":"","nodeType":"FieldList","column":0,"line":0,"opening":3671,"list":[{"children":[],"start":3672,"end":3684,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":[{"children":[],"start":3672,"end":3673,"code":"t","nodeType":"Identifier","column":0,"line":0,"namePos":3672,"name":"t","object":null}],"type":{"children":[],"start":3674,"end":3684,"code":"*testing.T","nodeType":"StarExpression","column":0,"line":0,"star":3674,"expression":{"children":[],"start":3675,"end":3684,"code":"testing.T","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":3675,"end":3682,"code":"testing","nodeType":"Identifier","column":0,"line":0,"namePos":3675,"name":"testing","object":null},"sel":{"children":[],"start":3683,"end":3684,"code":"T","nodeType":"Identifier","column":0,"line":0,"namePos":3683,"name":"T","object":null}}},"tag":null,"comment":null}],"closing":3684},"Results":null},"body":{"children":[],"start":3686,"end":4743,"code":"{\n\terrBuffer := new(strings.Builder)\n\tbuffer := new(strings.Builder)\n\trouter := New()\n\thandleRecovery := func(c *Context, err any) {\n\t\terrBuffer.WriteString(err.(string))\n\t\tc.AbortWithStatus(http.StatusBadRequest)\n\t}\n\trouter.Use(CustomRecoveryWithWriter(buffer, handleRecovery))\n\trouter.GET(\"/recovery\", func(_ *Context) {\n\t\tpanic(\"Oupps, Houston, we have a problem\")\n\t})\n\tw := PerformRequest(router, \"GET\", \"/recovery\")\n\tassert.Equal(t, http.StatusBadRequest, w.Code)\n\tassert.Contains(t, buffer.String(), \"panic recovered\")\n\tassert.Contains(t, buffer.String(), \"Oupps, Houston, we have a problem\")\n\tassert.Contains(t, buffer.String(), t.Name())\n\tassert.NotContains(t, buffer.String(), \"GET /recovery\")\n\tSetMode(DebugMode)\n\tw = PerformRequest(router, \"GET\", \"/recovery\")\n\tassert.Equal(t, http.StatusBadRequest, w.Code)\n\tassert.Contains(t, buffer.String(), \"GET /recovery\")\n\tassert.Equal(t, strings.Repeat(\"Oupps, Houston, we have a problem\", 2), errBuffer.String())\n\tSetMode(TestMode)\n}","nodeType":"BlockStatement","column":0,"line":0,"lbrace":3686,"list":[{"children":[],"start":3689,"end":3722,"code":"errBuffer := new(strings.Builder)","nodeType":"AssignStatement","column":0,"line":0,"lhs":[{"children":[],"start":3689,"end":3698,"code":"errBuffer","nodeType":"Identifier","column":0,"line":0,"namePos":3689,"name":"errBuffer","object":null}],"tokenPos":3699,"token":47,"rhs":[{"children":[],"start":3702,"end":3722,"code":"new(strings.Builder)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":3702,"end":3705,"code":"new","nodeType":"Identifier","column":0,"line":0,"namePos":3702,"name":"new","object":null},"lparen":0,"args":[{"children":[],"start":3706,"end":3721,"code":"strings.Builder","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":3706,"end":3713,"code":"strings","nodeType":"Identifier","column":0,"line":0,"namePos":3706,"name":"strings","object":null},"sel":{"children":[],"start":3714,"end":3721,"code":"Builder","nodeType":"Identifier","column":0,"line":0,"namePos":3714,"name":"Builder","object":null}}],"ellipsis":0,"rparen":0}]},{"children":[],"start":3724,"end":3754,"code":"buffer := new(strings.Builder)","nodeType":"AssignStatement","column":0,"line":0,"lhs":[{"children":[],"start":3724,"end":3730,"code":"buffer","nodeType":"Identifier","column":0,"line":0,"namePos":3724,"name":"buffer","object":null}],"tokenPos":3731,"token":47,"rhs":[{"children":[],"start":3734,"end":3754,"code":"new(strings.Builder)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":3734,"end":3737,"code":"new","nodeType":"Identifier","column":0,"line":0,"namePos":3734,"name":"new","object":null},"lparen":0,"args":[{"children":[],"start":3738,"end":3753,"code":"strings.Builder","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":3738,"end":3745,"code":"strings","nodeType":"Identifier","column":0,"line":0,"namePos":3738,"name":"strings","object":null},"sel":{"children":[],"start":3746,"end":3753,"code":"Builder","nodeType":"Identifier","column":0,"line":0,"namePos":3746,"name":"Builder","object":null}}],"ellipsis":0,"rparen":0}]},{"children":[],"start":3756,"end":3771,"code":"router := New()","nodeType":"AssignStatement","column":0,"line":0,"lhs":[{"children":[],"start":3756,"end":3762,"code":"router","nodeType":"Identifier","column":0,"line":0,"namePos":3756,"name":"router","object":null}],"tokenPos":3763,"token":47,"rhs":[{"children":[],"start":3766,"end":3771,"code":"New()","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":3766,"end":3769,"code":"New","nodeType":"Identifier","column":0,"line":0,"namePos":3766,"name":"New","object":null},"lparen":0,"args":[],"ellipsis":0,"rparen":0}]},{"children":[],"start":3773,"end":3902,"code":"handleRecovery := func(c *Context, err any) {\n\terrBuffer.WriteString(err.(string))\n\tc.AbortWithStatus(http.StatusBadRequest)\n}","nodeType":"AssignStatement","column":0,"line":0,"lhs":[{"children":[],"start":3773,"end":3787,"code":"handleRecovery","nodeType":"Identifier","column":0,"line":0,"namePos":3773,"name":"handleRecovery","object":null}],"tokenPos":3788,"token":47,"rhs":[{"children":[],"start":3791,"end":3902,"code":"func(c *Context, err any) {\n\terrBuffer.WriteString(err.(string))\n\tc.AbortWithStatus(http.StatusBadRequest)\n}","nodeType":"FunctionLiteral","column":0,"line":0,"type":{"children":[],"start":3791,"end":3816,"code":"func(c *Context, err any)","nodeType":"FunctionType","column":0,"line":0,"Function":3791,"TypeParams":null,"Params":{"children":[],"start":3795,"end":3816,"code":"","nodeType":"FieldList","column":0,"line":0,"opening":3795,"list":[{"children":[],"start":3796,"end":3806,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":[{"children":[],"start":3796,"end":3797,"code":"c","nodeType":"Identifier","column":0,"line":0,"namePos":3796,"name":"c","object":null}],"type":{"children":[],"start":3798,"end":3806,"code":"*Context","nodeType":"StarExpression","column":0,"line":0,"star":3798,"expression":{"children":[],"start":3799,"end":3806,"code":"Context","nodeType":"Identifier","column":0,"line":0,"namePos":3799,"name":"Context","object":null}},"tag":null,"comment":null},{"children":[],"start":3808,"end":3815,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":[{"children":[],"start":3808,"end":3811,"code":"err","nodeType":"Identifier","column":0,"line":0,"namePos":3808,"name":"err","object":null}],"type":{"children":[],"start":3812,"end":3815,"code":"any","nodeType":"Identifier","column":0,"line":0,"namePos":3812,"name":"any","object":null},"tag":null,"comment":null}],"closing":3815},"Results":null},"body":{"children":[],"start":3817,"end":3902,"code":"{\n\terrBuffer.WriteString(err.(string))\n\tc.AbortWithStatus(http.StatusBadRequest)\n}","nodeType":"BlockStatement","column":0,"line":0,"lbrace":3817,"list":[{"children":[],"start":3821,"end":3856,"code":"errBuffer.WriteString(err.(string))","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":3821,"end":3856,"code":"errBuffer.WriteString(err.(string))","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":3821,"end":3842,"code":"errBuffer.WriteString","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":3821,"end":3830,"code":"errBuffer","nodeType":"Identifier","column":0,"line":0,"namePos":3821,"name":"errBuffer","object":null},"sel":{"children":[],"start":3831,"end":3842,"code":"WriteString","nodeType":"Identifier","column":0,"line":0,"namePos":3831,"name":"WriteString","object":null}},"lparen":0,"args":[{"children":[],"start":3843,"end":3855,"code":"err.(string)","nodeType":"TypeAssertExpression","column":0,"line":0,"expression":{"children":[],"start":3843,"end":3846,"code":"err","nodeType":"Identifier","column":0,"line":0,"namePos":3843,"name":"err","object":null},"lparen":3847,"type":{"children":[],"start":3848,"end":3854,"code":"string","nodeType":"Identifier","column":0,"line":0,"namePos":3848,"name":"string","object":null},"rparen":3854}],"ellipsis":0,"rparen":0}},{"children":[],"start":3859,"end":3899,"code":"c.AbortWithStatus(http.StatusBadRequest)","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":3859,"end":3899,"code":"c.AbortWithStatus(http.StatusBadRequest)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":3859,"end":3876,"code":"c.AbortWithStatus","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":3859,"end":3860,"code":"c","nodeType":"Identifier","column":0,"line":0,"namePos":3859,"name":"c","object":null},"sel":{"children":[],"start":3861,"end":3876,"code":"AbortWithStatus","nodeType":"Identifier","column":0,"line":0,"namePos":3861,"name":"AbortWithStatus","object":null}},"lparen":0,"args":[{"children":[],"start":3877,"end":3898,"code":"http.StatusBadRequest","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":3877,"end":3881,"code":"http","nodeType":"Identifier","column":0,"line":0,"namePos":3877,"name":"http","object":null},"sel":{"children":[],"start":3882,"end":3898,"code":"StatusBadRequest","nodeType":"Identifier","column":0,"line":0,"namePos":3882,"name":"StatusBadRequest","object":null}}],"ellipsis":0,"rparen":0}}],"rbrace":3901}}]},{"children":[],"start":3904,"end":3964,"code":"router.Use(CustomRecoveryWithWriter(buffer, handleRecovery))","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":3904,"end":3964,"code":"router.Use(CustomRecoveryWithWriter(buffer, handleRecovery))","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":3904,"end":3914,"code":"router.Use","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":3904,"end":3910,"code":"router","nodeType":"Identifier","column":0,"line":0,"namePos":3904,"name":"router","object":null},"sel":{"children":[],"start":3911,"end":3914,"code":"Use","nodeType":"Identifier","column":0,"line":0,"namePos":3911,"name":"Use","object":null}},"lparen":0,"args":[{"children":[],"start":3915,"end":3963,"code":"CustomRecoveryWithWriter(buffer, handleRecovery)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":3915,"end":3939,"code":"CustomRecoveryWithWriter","nodeType":"Identifier","column":0,"line":0,"namePos":3915,"name":"CustomRecoveryWithWriter","object":null},"lparen":0,"args":[{"children":[],"start":3940,"end":3946,"code":"buffer","nodeType":"Identifier","column":0,"line":0,"namePos":3940,"name":"buffer","object":null},{"children":[],"start":3948,"end":3962,"code":"handleRecovery","nodeType":"Identifier","column":0,"line":0,"namePos":3948,"name":"handleRecovery","object":null}],"ellipsis":0,"rparen":0}],"ellipsis":0,"rparen":0}},{"children":[],"start":3966,"end":4057,"code":"router.GET(\"/recovery\", func(_ *Context) {\n\tpanic(\"Oupps, Houston, we have a problem\")\n})","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":3966,"end":4057,"code":"router.GET(\"/recovery\", func(_ *Context) {\n\tpanic(\"Oupps, Houston, we have a problem\")\n})","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":3966,"end":3976,"code":"router.GET","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":3966,"end":3972,"code":"router","nodeType":"Identifier","column":0,"line":0,"namePos":3966,"name":"router","object":null},"sel":{"children":[],"start":3973,"end":3976,"code":"GET","nodeType":"Identifier","column":0,"line":0,"namePos":3973,"name":"GET","object":null}},"lparen":0,"args":[{"children":[],"start":3977,"end":3988,"code":"\"/recovery\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":3977,"kind":9,"value":"\"/recovery\""},{"children":[],"start":3990,"end":4056,"code":"func(_ *Context) {\n\tpanic(\"Oupps, Houston, we have a problem\")\n}","nodeType":"FunctionLiteral","column":0,"line":0,"type":{"children":[],"start":3990,"end":4006,"code":"func(_ *Context)","nodeType":"FunctionType","column":0,"line":0,"Function":3990,"TypeParams":null,"Params":{"children":[],"start":3994,"end":4006,"code":"","nodeType":"FieldList","column":0,"line":0,"opening":3994,"list":[{"children":[],"start":3995,"end":4005,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":[{"children":[],"start":3995,"end":3996,"code":"_","nodeType":"Identifier","column":0,"line":0,"namePos":3995,"name":"_","object":null}],"type":{"children":[],"start":3997,"end":4005,"code":"*Context","nodeType":"StarExpression","column":0,"line":0,"star":3997,"expression":{"children":[],"start":3998,"end":4005,"code":"Context","nodeType":"Identifier","column":0,"line":0,"namePos":3998,"name":"Context","object":null}},"tag":null,"comment":null}],"closing":4005},"Results":null},"body":{"children":[],"start":4007,"end":4056,"code":"{\n\tpanic(\"Oupps, Houston, we have a problem\")\n}","nodeType":"BlockStatement","column":0,"line":0,"lbrace":4007,"list":[{"children":[],"start":4011,"end":4053,"code":"panic(\"Oupps, Houston, we have a problem\")","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":4011,"end":4053,"code":"panic(\"Oupps, Houston, we have a problem\")","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":4011,"end":4016,"code":"panic","nodeType":"Identifier","column":0,"line":0,"namePos":4011,"name":"panic","object":null},"lparen":0,"args":[{"children":[],"start":4017,"end":4052,"code":"\"Oupps, Houston, we have a problem\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":4017,"kind":9,"value":"\"Oupps, Houston, we have a problem\""}],"ellipsis":0,"rparen":0}}],"rbrace":4055}}],"ellipsis":0,"rparen":0}},{"children":[],"start":4067,"end":4114,"code":"w := PerformRequest(router, \"GET\", \"/recovery\")","nodeType":"AssignStatement","column":0,"line":0,"lhs":[{"children":[],"start":4067,"end":4068,"code":"w","nodeType":"Identifier","column":0,"line":0,"namePos":4067,"name":"w","object":null}],"tokenPos":4069,"token":47,"rhs":[{"children":[],"start":4072,"end":4114,"code":"PerformRequest(router, \"GET\", \"/recovery\")","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":4072,"end":4086,"code":"PerformRequest","nodeType":"Identifier","column":0,"line":0,"namePos":4072,"name":"PerformRequest","object":null},"lparen":0,"args":[{"children":[],"start":4087,"end":4093,"code":"router","nodeType":"Identifier","column":0,"line":0,"namePos":4087,"name":"router","object":null},{"children":[],"start":4095,"end":4100,"code":"\"GET\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":4095,"kind":9,"value":"\"GET\""},{"children":[],"start":4102,"end":4113,"code":"\"/recovery\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":4102,"kind":9,"value":"\"/recovery\""}],"ellipsis":0,"rparen":0}]},{"children":[],"start":4125,"end":4171,"code":"assert.Equal(t, http.StatusBadRequest, w.Code)","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":4125,"end":4171,"code":"assert.Equal(t, http.StatusBadRequest, w.Code)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":4125,"end":4137,"code":"assert.Equal","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":4125,"end":4131,"code":"assert","nodeType":"Identifier","column":0,"line":0,"namePos":4125,"name":"assert","object":null},"sel":{"children":[],"start":4132,"end":4137,"code":"Equal","nodeType":"Identifier","column":0,"line":0,"namePos":4132,"name":"Equal","object":null}},"lparen":0,"args":[{"children":[],"start":4138,"end":4139,"code":"t","nodeType":"Identifier","column":0,"line":0,"namePos":4138,"name":"t","object":null},{"children":[],"start":4141,"end":4162,"code":"http.StatusBadRequest","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":4141,"end":4145,"code":"http","nodeType":"Identifier","column":0,"line":0,"namePos":4141,"name":"http","object":null},"sel":{"children":[],"start":4146,"end":4162,"code":"StatusBadRequest","nodeType":"Identifier","column":0,"line":0,"namePos":4146,"name":"StatusBadRequest","object":null}},{"children":[],"start":4164,"end":4170,"code":"w.Code","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":4164,"end":4165,"code":"w","nodeType":"Identifier","column":0,"line":0,"namePos":4164,"name":"w","object":null},"sel":{"children":[],"start":4166,"end":4170,"code":"Code","nodeType":"Identifier","column":0,"line":0,"namePos":4166,"name":"Code","object":null}}],"ellipsis":0,"rparen":0}},{"children":[],"start":4173,"end":4227,"code":"assert.Contains(t, buffer.String(), \"panic recovered\")","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":4173,"end":4227,"code":"assert.Contains(t, buffer.String(), \"panic recovered\")","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":4173,"end":4188,"code":"assert.Contains","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":4173,"end":4179,"code":"assert","nodeType":"Identifier","column":0,"line":0,"namePos":4173,"name":"assert","object":null},"sel":{"children":[],"start":4180,"end":4188,"code":"Contains","nodeType":"Identifier","column":0,"line":0,"namePos":4180,"name":"Contains","object":null}},"lparen":0,"args":[{"children":[],"start":4189,"end":4190,"code":"t","nodeType":"Identifier","column":0,"line":0,"namePos":4189,"name":"t","object":null},{"children":[],"start":4192,"end":4207,"code":"buffer.String()","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":4192,"end":4205,"code":"buffer.String","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":4192,"end":4198,"code":"buffer","nodeType":"Identifier","column":0,"line":0,"namePos":4192,"name":"buffer","object":null},"sel":{"children":[],"start":4199,"end":4205,"code":"String","nodeType":"Identifier","column":0,"line":0,"namePos":4199,"name":"String","object":null}},"lparen":0,"args":[],"ellipsis":0,"rparen":0},{"children":[],"start":4209,"end":4226,"code":"\"panic recovered\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":4209,"kind":9,"value":"\"panic recovered\""}],"ellipsis":0,"rparen":0}},{"children":[],"start":4229,"end":4301,"code":"assert.Contains(t, buffer.String(), \"Oupps, Houston, we have a problem\")","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":4229,"end":4301,"code":"assert.Contains(t, buffer.String(), \"Oupps, Houston, we have a problem\")","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":4229,"end":4244,"code":"assert.Contains","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":4229,"end":4235,"code":"assert","nodeType":"Identifier","column":0,"line":0,"namePos":4229,"name":"assert","object":null},"sel":{"children":[],"start":4236,"end":4244,"code":"Contains","nodeType":"Identifier","column":0,"line":0,"namePos":4236,"name":"Contains","object":null}},"lparen":0,"args":[{"children":[],"start":4245,"end":4246,"code":"t","nodeType":"Identifier","column":0,"line":0,"namePos":4245,"name":"t","object":null},{"children":[],"start":4248,"end":4263,"code":"buffer.String()","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":4248,"end":4261,"code":"buffer.String","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":4248,"end":4254,"code":"buffer","nodeType":"Identifier","column":0,"line":0,"namePos":4248,"name":"buffer","object":null},"sel":{"children":[],"start":4255,"end":4261,"code":"String","nodeType":"Identifier","column":0,"line":0,"namePos":4255,"name":"String","object":null}},"lparen":0,"args":[],"ellipsis":0,"rparen":0},{"children":[],"start":4265,"end":4300,"code":"\"Oupps, Houston, we have a problem\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":4265,"kind":9,"value":"\"Oupps, Houston, we have a problem\""}],"ellipsis":0,"rparen":0}},{"children":[],"start":4303,"end":4348,"code":"assert.Contains(t, buffer.String(), t.Name())","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":4303,"end":4348,"code":"assert.Contains(t, buffer.String(), t.Name())","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":4303,"end":4318,"code":"assert.Contains","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":4303,"end":4309,"code":"assert","nodeType":"Identifier","column":0,"line":0,"namePos":4303,"name":"assert","object":null},"sel":{"children":[],"start":4310,"end":4318,"code":"Contains","nodeType":"Identifier","column":0,"line":0,"namePos":4310,"name":"Contains","object":null}},"lparen":0,"args":[{"children":[],"start":4319,"end":4320,"code":"t","nodeType":"Identifier","column":0,"line":0,"namePos":4319,"name":"t","object":null},{"children":[],"start":4322,"end":4337,"code":"buffer.String()","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":4322,"end":4335,"code":"buffer.String","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":4322,"end":4328,"code":"buffer","nodeType":"Identifier","column":0,"line":0,"namePos":4322,"name":"buffer","object":null},"sel":{"children":[],"start":4329,"end":4335,"code":"String","nodeType":"Identifier","column":0,"line":0,"namePos":4329,"name":"String","object":null}},"lparen":0,"args":[],"ellipsis":0,"rparen":0},{"children":[],"start":4339,"end":4347,"code":"t.Name()","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":4339,"end":4345,"code":"t.Name","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":4339,"end":4340,"code":"t","nodeType":"Identifier","column":0,"line":0,"namePos":4339,"name":"t","object":null},"sel":{"children":[],"start":4341,"end":4345,"code":"Name","nodeType":"Identifier","column":0,"line":0,"namePos":4341,"name":"Name","object":null}},"lparen":0,"args":[],"ellipsis":0,"rparen":0}],"ellipsis":0,"rparen":0}},{"children":[],"start":4350,"end":4405,"code":"assert.NotContains(t, buffer.String(), \"GET /recovery\")","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":4350,"end":4405,"code":"assert.NotContains(t, buffer.String(), \"GET /recovery\")","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":4350,"end":4368,"code":"assert.NotContains","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":4350,"end":4356,"code":"assert","nodeType":"Identifier","column":0,"line":0,"namePos":4350,"name":"assert","object":null},"sel":{"children":[],"start":4357,"end":4368,"code":"NotContains","nodeType":"Identifier","column":0,"line":0,"namePos":4357,"name":"NotContains","object":null}},"lparen":0,"args":[{"children":[],"start":4369,"end":4370,"code":"t","nodeType":"Identifier","column":0,"line":0,"namePos":4369,"name":"t","object":null},{"children":[],"start":4372,"end":4387,"code":"buffer.String()","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":4372,"end":4385,"code":"buffer.String","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":4372,"end":4378,"code":"buffer","nodeType":"Identifier","column":0,"line":0,"namePos":4372,"name":"buffer","object":null},"sel":{"children":[],"start":4379,"end":4385,"code":"String","nodeType":"Identifier","column":0,"line":0,"namePos":4379,"name":"String","object":null}},"lparen":0,"args":[],"ellipsis":0,"rparen":0},{"children":[],"start":4389,"end":4404,"code":"\"GET /recovery\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":4389,"kind":9,"value":"\"GET /recovery\""}],"ellipsis":0,"rparen":0}},{"children":[],"start":4442,"end":4460,"code":"SetMode(DebugMode)","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":4442,"end":4460,"code":"SetMode(DebugMode)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":4442,"end":4449,"code":"SetMode","nodeType":"Identifier","column":0,"line":0,"namePos":4442,"name":"SetMode","object":null},"lparen":0,"args":[{"children":[],"start":4450,"end":4459,"code":"DebugMode","nodeType":"Identifier","column":0,"line":0,"namePos":4450,"name":"DebugMode","object":null}],"ellipsis":0,"rparen":0}},{"children":[],"start":4470,"end":4516,"code":"w = PerformRequest(router, \"GET\", \"/recovery\")","nodeType":"AssignStatement","column":0,"line":0,"lhs":[{"children":[],"start":4470,"end":4471,"code":"w","nodeType":"Identifier","column":0,"line":0,"namePos":4470,"name":"w","object":null}],"tokenPos":4472,"token":42,"rhs":[{"children":[],"start":4474,"end":4516,"code":"PerformRequest(router, \"GET\", \"/recovery\")","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":4474,"end":4488,"code":"PerformRequest","nodeType":"Identifier","column":0,"line":0,"namePos":4474,"name":"PerformRequest","object":null},"lparen":0,"args":[{"children":[],"start":4489,"end":4495,"code":"router","nodeType":"Identifier","column":0,"line":0,"namePos":4489,"name":"router","object":null},{"children":[],"start":4497,"end":4502,"code":"\"GET\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":4497,"kind":9,"value":"\"GET\""},{"children":[],"start":4504,"end":4515,"code":"\"/recovery\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":4504,"kind":9,"value":"\"/recovery\""}],"ellipsis":0,"rparen":0}]},{"children":[],"start":4527,"end":4573,"code":"assert.Equal(t, http.StatusBadRequest, w.Code)","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":4527,"end":4573,"code":"assert.Equal(t, http.StatusBadRequest, w.Code)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":4527,"end":4539,"code":"assert.Equal","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":4527,"end":4533,"code":"assert","nodeType":"Identifier","column":0,"line":0,"namePos":4527,"name":"assert","object":null},"sel":{"children":[],"start":4534,"end":4539,"code":"Equal","nodeType":"Identifier","column":0,"line":0,"namePos":4534,"name":"Equal","object":null}},"lparen":0,"args":[{"children":[],"start":4540,"end":4541,"code":"t","nodeType":"Identifier","column":0,"line":0,"namePos":4540,"name":"t","object":null},{"children":[],"start":4543,"end":4564,"code":"http.StatusBadRequest","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":4543,"end":4547,"code":"http","nodeType":"Identifier","column":0,"line":0,"namePos":4543,"name":"http","object":null},"sel":{"children":[],"start":4548,"end":4564,"code":"StatusBadRequest","nodeType":"Identifier","column":0,"line":0,"namePos":4548,"name":"StatusBadRequest","object":null}},{"children":[],"start":4566,"end":4572,"code":"w.Code","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":4566,"end":4567,"code":"w","nodeType":"Identifier","column":0,"line":0,"namePos":4566,"name":"w","object":null},"sel":{"children":[],"start":4568,"end":4572,"code":"Code","nodeType":"Identifier","column":0,"line":0,"namePos":4568,"name":"Code","object":null}}],"ellipsis":0,"rparen":0}},{"children":[],"start":4575,"end":4627,"code":"assert.Contains(t, buffer.String(), \"GET /recovery\")","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":4575,"end":4627,"code":"assert.Contains(t, buffer.String(), \"GET /recovery\")","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":4575,"end":4590,"code":"assert.Contains","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":4575,"end":4581,"code":"assert","nodeType":"Identifier","column":0,"line":0,"namePos":4575,"name":"assert","object":null},"sel":{"children":[],"start":4582,"end":4590,"code":"Contains","nodeType":"Identifier","column":0,"line":0,"namePos":4582,"name":"Contains","object":null}},"lparen":0,"args":[{"children":[],"start":4591,"end":4592,"code":"t","nodeType":"Identifier","column":0,"line":0,"namePos":4591,"name":"t","object":null},{"children":[],"start":4594,"end":4609,"code":"buffer.String()","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":4594,"end":4607,"code":"buffer.String","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":4594,"end":4600,"code":"buffer","nodeType":"Identifier","column":0,"line":0,"namePos":4594,"name":"buffer","object":null},"sel":{"children":[],"start":4601,"end":4607,"code":"String","nodeType":"Identifier","column":0,"line":0,"namePos":4601,"name":"String","object":null}},"lparen":0,"args":[],"ellipsis":0,"rparen":0},{"children":[],"start":4611,"end":4626,"code":"\"GET /recovery\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":4611,"kind":9,"value":"\"GET /recovery\""}],"ellipsis":0,"rparen":0}},{"children":[],"start":4630,"end":4721,"code":"assert.Equal(t, strings.Repeat(\"Oupps, Houston, we have a problem\", 2), errBuffer.String())","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":4630,"end":4721,"code":"assert.Equal(t, strings.Repeat(\"Oupps, Houston, we have a problem\", 2), errBuffer.String())","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":4630,"end":4642,"code":"assert.Equal","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":4630,"end":4636,"code":"assert","nodeType":"Identifier","column":0,"line":0,"namePos":4630,"name":"assert","object":null},"sel":{"children":[],"start":4637,"end":4642,"code":"Equal","nodeType":"Identifier","column":0,"line":0,"namePos":4637,"name":"Equal","object":null}},"lparen":0,"args":[{"children":[],"start":4643,"end":4644,"code":"t","nodeType":"Identifier","column":0,"line":0,"namePos":4643,"name":"t","object":null},{"children":[],"start":4646,"end":4700,"code":"strings.Repeat(\"Oupps, Houston, we have a problem\", 2)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":4646,"end":4660,"code":"strings.Repeat","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":4646,"end":4653,"code":"strings","nodeType":"Identifier","column":0,"line":0,"namePos":4646,"name":"strings","object":null},"sel":{"children":[],"start":4654,"end":4660,"code":"Repeat","nodeType":"Identifier","column":0,"line":0,"namePos":4654,"name":"Repeat","object":null}},"lparen":0,"args":[{"children":[],"start":4661,"end":4696,"code":"\"Oupps, Houston, we have a problem\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":4661,"kind":9,"value":"\"Oupps, Houston, we have a problem\""},{"children":[],"start":4698,"end":4699,"code":"2","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":4698,"kind":5,"value":"2"}],"ellipsis":0,"rparen":0},{"children":[],"start":4702,"end":4720,"code":"errBuffer.String()","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":4702,"end":4718,"code":"errBuffer.String","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":4702,"end":4711,"code":"errBuffer","nodeType":"Identifier","column":0,"line":0,"namePos":4702,"name":"errBuffer","object":null},"sel":{"children":[],"start":4712,"end":4718,"code":"String","nodeType":"Identifier","column":0,"line":0,"namePos":4712,"name":"String","object":null}},"lparen":0,"args":[],"ellipsis":0,"rparen":0}],"ellipsis":0,"rparen":0}},{"children":[],"start":4724,"end":4741,"code":"SetMode(TestMode)","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":4724,"end":4741,"code":"SetMode(TestMode)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":4724,"end":4731,"code":"SetMode","nodeType":"Identifier","column":0,"line":0,"namePos":4724,"name":"SetMode","object":null},"lparen":0,"args":[{"children":[],"start":4732,"end":4740,"code":"TestMode","nodeType":"Identifier","column":0,"line":0,"namePos":4732,"name":"TestMode","object":null}],"ellipsis":0,"rparen":0}}],"rbrace":4742}},{"children":[],"start":4745,"end":5851,"code":"func TestCustomRecovery(t *testing.T) {\n\terrBuffer := new(strings.Builder)\n\tbuffer := new(strings.Builder)\n\trouter := New()\n\tDefaultErrorWriter = buffer\n\thandleRecovery := func(c *Context, err any) {\n\t\terrBuffer.WriteString(err.(string))\n\t\tc.AbortWithStatus(http.StatusBadRequest)\n\t}\n\trouter.Use(CustomRecovery(handleRecovery))\n\trouter.GET(\"/recovery\", func(_ *Context) {\n\t\tpanic(\"Oupps, Houston, we have a problem\")\n\t})\n\tw := PerformRequest(router, \"GET\", \"/recovery\")\n\tassert.Equal(t, http.StatusBadRequest, w.Code)\n\tassert.Contains(t, buffer.String(), \"panic recovered\")\n\tassert.Contains(t, buffer.String(), \"Oupps, Houston, we have a problem\")\n\tassert.Contains(t, buffer.String(), t.Name())\n\tassert.NotContains(t, buffer.String(), \"GET /recovery\")\n\tSetMode(DebugMode)\n\tw = PerformRequest(router, \"GET\", \"/recovery\")\n\tassert.Equal(t, http.StatusBadRequest, w.Code)\n\tassert.Contains(t, buffer.String(), \"GET /recovery\")\n\tassert.Equal(t, strings.Repeat(\"Oupps, Houston, we have a problem\", 2), errBuffer.String())\n\tSetMode(TestMode)\n}","nodeType":"FunctionDeclaration","column":0,"line":0,"doc":null,"receiver":null,"name":{"children":[],"start":4750,"end":4768,"code":"TestCustomRecovery","nodeType":"Identifier","column":0,"line":0,"namePos":4750,"name":"TestCustomRecovery","object":null},"type":{"children":[],"start":4745,"end":4782,"code":"func(t *testing.T)","nodeType":"FunctionType","column":0,"line":0,"Function":4745,"TypeParams":null,"Params":{"children":[],"start":4768,"end":4782,"code":"","nodeType":"FieldList","column":0,"line":0,"opening":4768,"list":[{"children":[],"start":4769,"end":4781,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":[{"children":[],"start":4769,"end":4770,"code":"t","nodeType":"Identifier","column":0,"line":0,"namePos":4769,"name":"t","object":null}],"type":{"children":[],"start":4771,"end":4781,"code":"*testing.T","nodeType":"StarExpression","column":0,"line":0,"star":4771,"expression":{"children":[],"start":4772,"end":4781,"code":"testing.T","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":4772,"end":4779,"code":"testing","nodeType":"Identifier","column":0,"line":0,"namePos":4772,"name":"testing","object":null},"sel":{"children":[],"start":4780,"end":4781,"code":"T","nodeType":"Identifier","column":0,"line":0,"namePos":4780,"name":"T","object":null}}},"tag":null,"comment":null}],"closing":4781},"Results":null},"body":{"children":[],"start":4783,"end":5851,"code":"{\n\terrBuffer := new(strings.Builder)\n\tbuffer := new(strings.Builder)\n\trouter := New()\n\tDefaultErrorWriter = buffer\n\thandleRecovery := func(c *Context, err any) {\n\t\terrBuffer.WriteString(err.(string))\n\t\tc.AbortWithStatus(http.StatusBadRequest)\n\t}\n\trouter.Use(CustomRecovery(handleRecovery))\n\trouter.GET(\"/recovery\", func(_ *Context) {\n\t\tpanic(\"Oupps, Houston, we have a problem\")\n\t})\n\tw := PerformRequest(router, \"GET\", \"/recovery\")\n\tassert.Equal(t, http.StatusBadRequest, w.Code)\n\tassert.Contains(t, buffer.String(), \"panic recovered\")\n\tassert.Contains(t, buffer.String(), \"Oupps, Houston, we have a problem\")\n\tassert.Contains(t, buffer.String(), t.Name())\n\tassert.NotContains(t, buffer.String(), \"GET /recovery\")\n\tSetMode(DebugMode)\n\tw = PerformRequest(router, \"GET\", \"/recovery\")\n\tassert.Equal(t, http.StatusBadRequest, w.Code)\n\tassert.Contains(t, buffer.String(), \"GET /recovery\")\n\tassert.Equal(t, strings.Repeat(\"Oupps, Houston, we have a problem\", 2), errBuffer.String())\n\tSetMode(TestMode)\n}","nodeType":"BlockStatement","column":0,"line":0,"lbrace":4783,"list":[{"children":[],"start":4786,"end":4819,"code":"errBuffer := new(strings.Builder)","nodeType":"AssignStatement","column":0,"line":0,"lhs":[{"children":[],"start":4786,"end":4795,"code":"errBuffer","nodeType":"Identifier","column":0,"line":0,"namePos":4786,"name":"errBuffer","object":null}],"tokenPos":4796,"token":47,"rhs":[{"children":[],"start":4799,"end":4819,"code":"new(strings.Builder)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":4799,"end":4802,"code":"new","nodeType":"Identifier","column":0,"line":0,"namePos":4799,"name":"new","object":null},"lparen":0,"args":[{"children":[],"start":4803,"end":4818,"code":"strings.Builder","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":4803,"end":4810,"code":"strings","nodeType":"Identifier","column":0,"line":0,"namePos":4803,"name":"strings","object":null},"sel":{"children":[],"start":4811,"end":4818,"code":"Builder","nodeType":"Identifier","column":0,"line":0,"namePos":4811,"name":"Builder","object":null}}],"ellipsis":0,"rparen":0}]},{"children":[],"start":4821,"end":4851,"code":"buffer := new(strings.Builder)","nodeType":"AssignStatement","column":0,"line":0,"lhs":[{"children":[],"start":4821,"end":4827,"code":"buffer","nodeType":"Identifier","column":0,"line":0,"namePos":4821,"name":"buffer","object":null}],"tokenPos":4828,"token":47,"rhs":[{"children":[],"start":4831,"end":4851,"code":"new(strings.Builder)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":4831,"end":4834,"code":"new","nodeType":"Identifier","column":0,"line":0,"namePos":4831,"name":"new","object":null},"lparen":0,"args":[{"children":[],"start":4835,"end":4850,"code":"strings.Builder","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":4835,"end":4842,"code":"strings","nodeType":"Identifier","column":0,"line":0,"namePos":4835,"name":"strings","object":null},"sel":{"children":[],"start":4843,"end":4850,"code":"Builder","nodeType":"Identifier","column":0,"line":0,"namePos":4843,"name":"Builder","object":null}}],"ellipsis":0,"rparen":0}]},{"children":[],"start":4853,"end":4868,"code":"router := New()","nodeType":"AssignStatement","column":0,"line":0,"lhs":[{"children":[],"start":4853,"end":4859,"code":"router","nodeType":"Identifier","column":0,"line":0,"namePos":4853,"name":"router","object":null}],"tokenPos":4860,"token":47,"rhs":[{"children":[],"start":4863,"end":4868,"code":"New()","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":4863,"end":4866,"code":"New","nodeType":"Identifier","column":0,"line":0,"namePos":4863,"name":"New","object":null},"lparen":0,"args":[],"ellipsis":0,"rparen":0}]},{"children":[],"start":4870,"end":4897,"code":"DefaultErrorWriter = buffer","nodeType":"AssignStatement","column":0,"line":0,"lhs":[{"children":[],"start":4870,"end":4888,"code":"DefaultErrorWriter","nodeType":"Identifier","column":0,"line":0,"namePos":4870,"name":"DefaultErrorWriter","object":null}],"tokenPos":4889,"token":42,"rhs":[{"children":[],"start":4891,"end":4897,"code":"buffer","nodeType":"Identifier","column":0,"line":0,"namePos":4891,"name":"buffer","object":null}]},{"children":[],"start":4899,"end":5028,"code":"handleRecovery := func(c *Context, err any) {\n\terrBuffer.WriteString(err.(string))\n\tc.AbortWithStatus(http.StatusBadRequest)\n}","nodeType":"AssignStatement","column":0,"line":0,"lhs":[{"children":[],"start":4899,"end":4913,"code":"handleRecovery","nodeType":"Identifier","column":0,"line":0,"namePos":4899,"name":"handleRecovery","object":null}],"tokenPos":4914,"token":47,"rhs":[{"children":[],"start":4917,"end":5028,"code":"func(c *Context, err any) {\n\terrBuffer.WriteString(err.(string))\n\tc.AbortWithStatus(http.StatusBadRequest)\n}","nodeType":"FunctionLiteral","column":0,"line":0,"type":{"children":[],"start":4917,"end":4942,"code":"func(c *Context, err any)","nodeType":"FunctionType","column":0,"line":0,"Function":4917,"TypeParams":null,"Params":{"children":[],"start":4921,"end":4942,"code":"","nodeType":"FieldList","column":0,"line":0,"opening":4921,"list":[{"children":[],"start":4922,"end":4932,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":[{"children":[],"start":4922,"end":4923,"code":"c","nodeType":"Identifier","column":0,"line":0,"namePos":4922,"name":"c","object":null}],"type":{"children":[],"start":4924,"end":4932,"code":"*Context","nodeType":"StarExpression","column":0,"line":0,"star":4924,"expression":{"children":[],"start":4925,"end":4932,"code":"Context","nodeType":"Identifier","column":0,"line":0,"namePos":4925,"name":"Context","object":null}},"tag":null,"comment":null},{"children":[],"start":4934,"end":4941,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":[{"children":[],"start":4934,"end":4937,"code":"err","nodeType":"Identifier","column":0,"line":0,"namePos":4934,"name":"err","object":null}],"type":{"children":[],"start":4938,"end":4941,"code":"any","nodeType":"Identifier","column":0,"line":0,"namePos":4938,"name":"any","object":null},"tag":null,"comment":null}],"closing":4941},"Results":null},"body":{"children":[],"start":4943,"end":5028,"code":"{\n\terrBuffer.WriteString(err.(string))\n\tc.AbortWithStatus(http.StatusBadRequest)\n}","nodeType":"BlockStatement","column":0,"line":0,"lbrace":4943,"list":[{"children":[],"start":4947,"end":4982,"code":"errBuffer.WriteString(err.(string))","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":4947,"end":4982,"code":"errBuffer.WriteString(err.(string))","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":4947,"end":4968,"code":"errBuffer.WriteString","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":4947,"end":4956,"code":"errBuffer","nodeType":"Identifier","column":0,"line":0,"namePos":4947,"name":"errBuffer","object":null},"sel":{"children":[],"start":4957,"end":4968,"code":"WriteString","nodeType":"Identifier","column":0,"line":0,"namePos":4957,"name":"WriteString","object":null}},"lparen":0,"args":[{"children":[],"start":4969,"end":4981,"code":"err.(string)","nodeType":"TypeAssertExpression","column":0,"line":0,"expression":{"children":[],"start":4969,"end":4972,"code":"err","nodeType":"Identifier","column":0,"line":0,"namePos":4969,"name":"err","object":null},"lparen":4973,"type":{"children":[],"start":4974,"end":4980,"code":"string","nodeType":"Identifier","column":0,"line":0,"namePos":4974,"name":"string","object":null},"rparen":4980}],"ellipsis":0,"rparen":0}},{"children":[],"start":4985,"end":5025,"code":"c.AbortWithStatus(http.StatusBadRequest)","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":4985,"end":5025,"code":"c.AbortWithStatus(http.StatusBadRequest)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":4985,"end":5002,"code":"c.AbortWithStatus","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":4985,"end":4986,"code":"c","nodeType":"Identifier","column":0,"line":0,"namePos":4985,"name":"c","object":null},"sel":{"children":[],"start":4987,"end":5002,"code":"AbortWithStatus","nodeType":"Identifier","column":0,"line":0,"namePos":4987,"name":"AbortWithStatus","object":null}},"lparen":0,"args":[{"children":[],"start":5003,"end":5024,"code":"http.StatusBadRequest","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":5003,"end":5007,"code":"http","nodeType":"Identifier","column":0,"line":0,"namePos":5003,"name":"http","object":null},"sel":{"children":[],"start":5008,"end":5024,"code":"StatusBadRequest","nodeType":"Identifier","column":0,"line":0,"namePos":5008,"name":"StatusBadRequest","object":null}}],"ellipsis":0,"rparen":0}}],"rbrace":5027}}]},{"children":[],"start":5030,"end":5072,"code":"router.Use(CustomRecovery(handleRecovery))","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":5030,"end":5072,"code":"router.Use(CustomRecovery(handleRecovery))","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":5030,"end":5040,"code":"router.Use","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":5030,"end":5036,"code":"router","nodeType":"Identifier","column":0,"line":0,"namePos":5030,"name":"router","object":null},"sel":{"children":[],"start":5037,"end":5040,"code":"Use","nodeType":"Identifier","column":0,"line":0,"namePos":5037,"name":"Use","object":null}},"lparen":0,"args":[{"children":[],"start":5041,"end":5071,"code":"CustomRecovery(handleRecovery)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":5041,"end":5055,"code":"CustomRecovery","nodeType":"Identifier","column":0,"line":0,"namePos":5041,"name":"CustomRecovery","object":null},"lparen":0,"args":[{"children":[],"start":5056,"end":5070,"code":"handleRecovery","nodeType":"Identifier","column":0,"line":0,"namePos":5056,"name":"handleRecovery","object":null}],"ellipsis":0,"rparen":0}],"ellipsis":0,"rparen":0}},{"children":[],"start":5074,"end":5165,"code":"router.GET(\"/recovery\", func(_ *Context) {\n\tpanic(\"Oupps, Houston, we have a problem\")\n})","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":5074,"end":5165,"code":"router.GET(\"/recovery\", func(_ *Context) {\n\tpanic(\"Oupps, Houston, we have a problem\")\n})","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":5074,"end":5084,"code":"router.GET","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":5074,"end":5080,"code":"router","nodeType":"Identifier","column":0,"line":0,"namePos":5074,"name":"router","object":null},"sel":{"children":[],"start":5081,"end":5084,"code":"GET","nodeType":"Identifier","column":0,"line":0,"namePos":5081,"name":"GET","object":null}},"lparen":0,"args":[{"children":[],"start":5085,"end":5096,"code":"\"/recovery\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":5085,"kind":9,"value":"\"/recovery\""},{"children":[],"start":5098,"end":5164,"code":"func(_ *Context) {\n\tpanic(\"Oupps, Houston, we have a problem\")\n}","nodeType":"FunctionLiteral","column":0,"line":0,"type":{"children":[],"start":5098,"end":5114,"code":"func(_ *Context)","nodeType":"FunctionType","column":0,"line":0,"Function":5098,"TypeParams":null,"Params":{"children":[],"start":5102,"end":5114,"code":"","nodeType":"FieldList","column":0,"line":0,"opening":5102,"list":[{"children":[],"start":5103,"end":5113,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":[{"children":[],"start":5103,"end":5104,"code":"_","nodeType":"Identifier","column":0,"line":0,"namePos":5103,"name":"_","object":null}],"type":{"children":[],"start":5105,"end":5113,"code":"*Context","nodeType":"StarExpression","column":0,"line":0,"star":5105,"expression":{"children":[],"start":5106,"end":5113,"code":"Context","nodeType":"Identifier","column":0,"line":0,"namePos":5106,"name":"Context","object":null}},"tag":null,"comment":null}],"closing":5113},"Results":null},"body":{"children":[],"start":5115,"end":5164,"code":"{\n\tpanic(\"Oupps, Houston, we have a problem\")\n}","nodeType":"BlockStatement","column":0,"line":0,"lbrace":5115,"list":[{"children":[],"start":5119,"end":5161,"code":"panic(\"Oupps, Houston, we have a problem\")","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":5119,"end":5161,"code":"panic(\"Oupps, Houston, we have a problem\")","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":5119,"end":5124,"code":"panic","nodeType":"Identifier","column":0,"line":0,"namePos":5119,"name":"panic","object":null},"lparen":0,"args":[{"children":[],"start":5125,"end":5160,"code":"\"Oupps, Houston, we have a problem\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":5125,"kind":9,"value":"\"Oupps, Houston, we have a problem\""}],"ellipsis":0,"rparen":0}}],"rbrace":5163}}],"ellipsis":0,"rparen":0}},{"children":[],"start":5175,"end":5222,"code":"w := PerformRequest(router, \"GET\", \"/recovery\")","nodeType":"AssignStatement","column":0,"line":0,"lhs":[{"children":[],"start":5175,"end":5176,"code":"w","nodeType":"Identifier","column":0,"line":0,"namePos":5175,"name":"w","object":null}],"tokenPos":5177,"token":47,"rhs":[{"children":[],"start":5180,"end":5222,"code":"PerformRequest(router, \"GET\", \"/recovery\")","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":5180,"end":5194,"code":"PerformRequest","nodeType":"Identifier","column":0,"line":0,"namePos":5180,"name":"PerformRequest","object":null},"lparen":0,"args":[{"children":[],"start":5195,"end":5201,"code":"router","nodeType":"Identifier","column":0,"line":0,"namePos":5195,"name":"router","object":null},{"children":[],"start":5203,"end":5208,"code":"\"GET\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":5203,"kind":9,"value":"\"GET\""},{"children":[],"start":5210,"end":5221,"code":"\"/recovery\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":5210,"kind":9,"value":"\"/recovery\""}],"ellipsis":0,"rparen":0}]},{"children":[],"start":5233,"end":5279,"code":"assert.Equal(t, http.StatusBadRequest, w.Code)","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":5233,"end":5279,"code":"assert.Equal(t, http.StatusBadRequest, w.Code)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":5233,"end":5245,"code":"assert.Equal","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":5233,"end":5239,"code":"assert","nodeType":"Identifier","column":0,"line":0,"namePos":5233,"name":"assert","object":null},"sel":{"children":[],"start":5240,"end":5245,"code":"Equal","nodeType":"Identifier","column":0,"line":0,"namePos":5240,"name":"Equal","object":null}},"lparen":0,"args":[{"children":[],"start":5246,"end":5247,"code":"t","nodeType":"Identifier","column":0,"line":0,"namePos":5246,"name":"t","object":null},{"children":[],"start":5249,"end":5270,"code":"http.StatusBadRequest","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":5249,"end":5253,"code":"http","nodeType":"Identifier","column":0,"line":0,"namePos":5249,"name":"http","object":null},"sel":{"children":[],"start":5254,"end":5270,"code":"StatusBadRequest","nodeType":"Identifier","column":0,"line":0,"namePos":5254,"name":"StatusBadRequest","object":null}},{"children":[],"start":5272,"end":5278,"code":"w.Code","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":5272,"end":5273,"code":"w","nodeType":"Identifier","column":0,"line":0,"namePos":5272,"name":"w","object":null},"sel":{"children":[],"start":5274,"end":5278,"code":"Code","nodeType":"Identifier","column":0,"line":0,"namePos":5274,"name":"Code","object":null}}],"ellipsis":0,"rparen":0}},{"children":[],"start":5281,"end":5335,"code":"assert.Contains(t, buffer.String(), \"panic recovered\")","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":5281,"end":5335,"code":"assert.Contains(t, buffer.String(), \"panic recovered\")","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":5281,"end":5296,"code":"assert.Contains","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":5281,"end":5287,"code":"assert","nodeType":"Identifier","column":0,"line":0,"namePos":5281,"name":"assert","object":null},"sel":{"children":[],"start":5288,"end":5296,"code":"Contains","nodeType":"Identifier","column":0,"line":0,"namePos":5288,"name":"Contains","object":null}},"lparen":0,"args":[{"children":[],"start":5297,"end":5298,"code":"t","nodeType":"Identifier","column":0,"line":0,"namePos":5297,"name":"t","object":null},{"children":[],"start":5300,"end":5315,"code":"buffer.String()","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":5300,"end":5313,"code":"buffer.String","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":5300,"end":5306,"code":"buffer","nodeType":"Identifier","column":0,"line":0,"namePos":5300,"name":"buffer","object":null},"sel":{"children":[],"start":5307,"end":5313,"code":"String","nodeType":"Identifier","column":0,"line":0,"namePos":5307,"name":"String","object":null}},"lparen":0,"args":[],"ellipsis":0,"rparen":0},{"children":[],"start":5317,"end":5334,"code":"\"panic recovered\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":5317,"kind":9,"value":"\"panic recovered\""}],"ellipsis":0,"rparen":0}},{"children":[],"start":5337,"end":5409,"code":"assert.Contains(t, buffer.String(), \"Oupps, Houston, we have a problem\")","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":5337,"end":5409,"code":"assert.Contains(t, buffer.String(), \"Oupps, Houston, we have a problem\")","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":5337,"end":5352,"code":"assert.Contains","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":5337,"end":5343,"code":"assert","nodeType":"Identifier","column":0,"line":0,"namePos":5337,"name":"assert","object":null},"sel":{"children":[],"start":5344,"end":5352,"code":"Contains","nodeType":"Identifier","column":0,"line":0,"namePos":5344,"name":"Contains","object":null}},"lparen":0,"args":[{"children":[],"start":5353,"end":5354,"code":"t","nodeType":"Identifier","column":0,"line":0,"namePos":5353,"name":"t","object":null},{"children":[],"start":5356,"end":5371,"code":"buffer.String()","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":5356,"end":5369,"code":"buffer.String","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":5356,"end":5362,"code":"buffer","nodeType":"Identifier","column":0,"line":0,"namePos":5356,"name":"buffer","object":null},"sel":{"children":[],"start":5363,"end":5369,"code":"String","nodeType":"Identifier","column":0,"line":0,"namePos":5363,"name":"String","object":null}},"lparen":0,"args":[],"ellipsis":0,"rparen":0},{"children":[],"start":5373,"end":5408,"code":"\"Oupps, Houston, we have a problem\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":5373,"kind":9,"value":"\"Oupps, Houston, we have a problem\""}],"ellipsis":0,"rparen":0}},{"children":[],"start":5411,"end":5456,"code":"assert.Contains(t, buffer.String(), t.Name())","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":5411,"end":5456,"code":"assert.Contains(t, buffer.String(), t.Name())","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":5411,"end":5426,"code":"assert.Contains","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":5411,"end":5417,"code":"assert","nodeType":"Identifier","column":0,"line":0,"namePos":5411,"name":"assert","object":null},"sel":{"children":[],"start":5418,"end":5426,"code":"Contains","nodeType":"Identifier","column":0,"line":0,"namePos":5418,"name":"Contains","object":null}},"lparen":0,"args":[{"children":[],"start":5427,"end":5428,"code":"t","nodeType":"Identifier","column":0,"line":0,"namePos":5427,"name":"t","object":null},{"children":[],"start":5430,"end":5445,"code":"buffer.String()","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":5430,"end":5443,"code":"buffer.String","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":5430,"end":5436,"code":"buffer","nodeType":"Identifier","column":0,"line":0,"namePos":5430,"name":"buffer","object":null},"sel":{"children":[],"start":5437,"end":5443,"code":"String","nodeType":"Identifier","column":0,"line":0,"namePos":5437,"name":"String","object":null}},"lparen":0,"args":[],"ellipsis":0,"rparen":0},{"children":[],"start":5447,"end":5455,"code":"t.Name()","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":5447,"end":5453,"code":"t.Name","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":5447,"end":5448,"code":"t","nodeType":"Identifier","column":0,"line":0,"namePos":5447,"name":"t","object":null},"sel":{"children":[],"start":5449,"end":5453,"code":"Name","nodeType":"Identifier","column":0,"line":0,"namePos":5449,"name":"Name","object":null}},"lparen":0,"args":[],"ellipsis":0,"rparen":0}],"ellipsis":0,"rparen":0}},{"children":[],"start":5458,"end":5513,"code":"assert.NotContains(t, buffer.String(), \"GET /recovery\")","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":5458,"end":5513,"code":"assert.NotContains(t, buffer.String(), \"GET /recovery\")","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":5458,"end":5476,"code":"assert.NotContains","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":5458,"end":5464,"code":"assert","nodeType":"Identifier","column":0,"line":0,"namePos":5458,"name":"assert","object":null},"sel":{"children":[],"start":5465,"end":5476,"code":"NotContains","nodeType":"Identifier","column":0,"line":0,"namePos":5465,"name":"NotContains","object":null}},"lparen":0,"args":[{"children":[],"start":5477,"end":5478,"code":"t","nodeType":"Identifier","column":0,"line":0,"namePos":5477,"name":"t","object":null},{"children":[],"start":5480,"end":5495,"code":"buffer.String()","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":5480,"end":5493,"code":"buffer.String","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":5480,"end":5486,"code":"buffer","nodeType":"Identifier","column":0,"line":0,"namePos":5480,"name":"buffer","object":null},"sel":{"children":[],"start":5487,"end":5493,"code":"String","nodeType":"Identifier","column":0,"line":0,"namePos":5487,"name":"String","object":null}},"lparen":0,"args":[],"ellipsis":0,"rparen":0},{"children":[],"start":5497,"end":5512,"code":"\"GET /recovery\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":5497,"kind":9,"value":"\"GET /recovery\""}],"ellipsis":0,"rparen":0}},{"children":[],"start":5550,"end":5568,"code":"SetMode(DebugMode)","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":5550,"end":5568,"code":"SetMode(DebugMode)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":5550,"end":5557,"code":"SetMode","nodeType":"Identifier","column":0,"line":0,"namePos":5550,"name":"SetMode","object":null},"lparen":0,"args":[{"children":[],"start":5558,"end":5567,"code":"DebugMode","nodeType":"Identifier","column":0,"line":0,"namePos":5558,"name":"DebugMode","object":null}],"ellipsis":0,"rparen":0}},{"children":[],"start":5578,"end":5624,"code":"w = PerformRequest(router, \"GET\", \"/recovery\")","nodeType":"AssignStatement","column":0,"line":0,"lhs":[{"children":[],"start":5578,"end":5579,"code":"w","nodeType":"Identifier","column":0,"line":0,"namePos":5578,"name":"w","object":null}],"tokenPos":5580,"token":42,"rhs":[{"children":[],"start":5582,"end":5624,"code":"PerformRequest(router, \"GET\", \"/recovery\")","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":5582,"end":5596,"code":"PerformRequest","nodeType":"Identifier","column":0,"line":0,"namePos":5582,"name":"PerformRequest","object":null},"lparen":0,"args":[{"children":[],"start":5597,"end":5603,"code":"router","nodeType":"Identifier","column":0,"line":0,"namePos":5597,"name":"router","object":null},{"children":[],"start":5605,"end":5610,"code":"\"GET\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":5605,"kind":9,"value":"\"GET\""},{"children":[],"start":5612,"end":5623,"code":"\"/recovery\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":5612,"kind":9,"value":"\"/recovery\""}],"ellipsis":0,"rparen":0}]},{"children":[],"start":5635,"end":5681,"code":"assert.Equal(t, http.StatusBadRequest, w.Code)","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":5635,"end":5681,"code":"assert.Equal(t, http.StatusBadRequest, w.Code)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":5635,"end":5647,"code":"assert.Equal","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":5635,"end":5641,"code":"assert","nodeType":"Identifier","column":0,"line":0,"namePos":5635,"name":"assert","object":null},"sel":{"children":[],"start":5642,"end":5647,"code":"Equal","nodeType":"Identifier","column":0,"line":0,"namePos":5642,"name":"Equal","object":null}},"lparen":0,"args":[{"children":[],"start":5648,"end":5649,"code":"t","nodeType":"Identifier","column":0,"line":0,"namePos":5648,"name":"t","object":null},{"children":[],"start":5651,"end":5672,"code":"http.StatusBadRequest","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":5651,"end":5655,"code":"http","nodeType":"Identifier","column":0,"line":0,"namePos":5651,"name":"http","object":null},"sel":{"children":[],"start":5656,"end":5672,"code":"StatusBadRequest","nodeType":"Identifier","column":0,"line":0,"namePos":5656,"name":"StatusBadRequest","object":null}},{"children":[],"start":5674,"end":5680,"code":"w.Code","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":5674,"end":5675,"code":"w","nodeType":"Identifier","column":0,"line":0,"namePos":5674,"name":"w","object":null},"sel":{"children":[],"start":5676,"end":5680,"code":"Code","nodeType":"Identifier","column":0,"line":0,"namePos":5676,"name":"Code","object":null}}],"ellipsis":0,"rparen":0}},{"children":[],"start":5683,"end":5735,"code":"assert.Contains(t, buffer.String(), \"GET /recovery\")","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":5683,"end":5735,"code":"assert.Contains(t, buffer.String(), \"GET /recovery\")","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":5683,"end":5698,"code":"assert.Contains","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":5683,"end":5689,"code":"assert","nodeType":"Identifier","column":0,"line":0,"namePos":5683,"name":"assert","object":null},"sel":{"children":[],"start":5690,"end":5698,"code":"Contains","nodeType":"Identifier","column":0,"line":0,"namePos":5690,"name":"Contains","object":null}},"lparen":0,"args":[{"children":[],"start":5699,"end":5700,"code":"t","nodeType":"Identifier","column":0,"line":0,"namePos":5699,"name":"t","object":null},{"children":[],"start":5702,"end":5717,"code":"buffer.String()","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":5702,"end":5715,"code":"buffer.String","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":5702,"end":5708,"code":"buffer","nodeType":"Identifier","column":0,"line":0,"namePos":5702,"name":"buffer","object":null},"sel":{"children":[],"start":5709,"end":5715,"code":"String","nodeType":"Identifier","column":0,"line":0,"namePos":5709,"name":"String","object":null}},"lparen":0,"args":[],"ellipsis":0,"rparen":0},{"children":[],"start":5719,"end":5734,"code":"\"GET /recovery\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":5719,"kind":9,"value":"\"GET /recovery\""}],"ellipsis":0,"rparen":0}},{"children":[],"start":5738,"end":5829,"code":"assert.Equal(t, strings.Repeat(\"Oupps, Houston, we have a problem\", 2), errBuffer.String())","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":5738,"end":5829,"code":"assert.Equal(t, strings.Repeat(\"Oupps, Houston, we have a problem\", 2), errBuffer.String())","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":5738,"end":5750,"code":"assert.Equal","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":5738,"end":5744,"code":"assert","nodeType":"Identifier","column":0,"line":0,"namePos":5738,"name":"assert","object":null},"sel":{"children":[],"start":5745,"end":5750,"code":"Equal","nodeType":"Identifier","column":0,"line":0,"namePos":5745,"name":"Equal","object":null}},"lparen":0,"args":[{"children":[],"start":5751,"end":5752,"code":"t","nodeType":"Identifier","column":0,"line":0,"namePos":5751,"name":"t","object":null},{"children":[],"start":5754,"end":5808,"code":"strings.Repeat(\"Oupps, Houston, we have a problem\", 2)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":5754,"end":5768,"code":"strings.Repeat","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":5754,"end":5761,"code":"strings","nodeType":"Identifier","column":0,"line":0,"namePos":5754,"name":"strings","object":null},"sel":{"children":[],"start":5762,"end":5768,"code":"Repeat","nodeType":"Identifier","column":0,"line":0,"namePos":5762,"name":"Repeat","object":null}},"lparen":0,"args":[{"children":[],"start":5769,"end":5804,"code":"\"Oupps, Houston, we have a problem\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":5769,"kind":9,"value":"\"Oupps, Houston, we have a problem\""},{"children":[],"start":5806,"end":5807,"code":"2","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":5806,"kind":5,"value":"2"}],"ellipsis":0,"rparen":0},{"children":[],"start":5810,"end":5828,"code":"errBuffer.String()","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":5810,"end":5826,"code":"errBuffer.String","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":5810,"end":5819,"code":"errBuffer","nodeType":"Identifier","column":0,"line":0,"namePos":5810,"name":"errBuffer","object":null},"sel":{"children":[],"start":5820,"end":5826,"code":"String","nodeType":"Identifier","column":0,"line":0,"namePos":5820,"name":"String","object":null}},"lparen":0,"args":[],"ellipsis":0,"rparen":0}],"ellipsis":0,"rparen":0}},{"children":[],"start":5832,"end":5849,"code":"SetMode(TestMode)","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":5832,"end":5849,"code":"SetMode(TestMode)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":5832,"end":5839,"code":"SetMode","nodeType":"Identifier","column":0,"line":0,"namePos":5832,"name":"SetMode","object":null},"lparen":0,"args":[{"children":[],"start":5840,"end":5848,"code":"TestMode","nodeType":"Identifier","column":0,"line":0,"namePos":5840,"name":"TestMode","object":null}],"ellipsis":0,"rparen":0}}],"rbrace":5850}},{"children":[],"start":5853,"end":7005,"code":"func TestRecoveryWithWriterWithCustomRecovery(t *testing.T) {\n\terrBuffer := new(strings.Builder)\n\tbuffer := new(strings.Builder)\n\trouter := New()\n\tDefaultErrorWriter = buffer\n\thandleRecovery := func(c *Context, err any) {\n\t\terrBuffer.WriteString(err.(string))\n\t\tc.AbortWithStatus(http.StatusBadRequest)\n\t}\n\trouter.Use(RecoveryWithWriter(DefaultErrorWriter, handleRecovery))\n\trouter.GET(\"/recovery\", func(_ *Context) {\n\t\tpanic(\"Oupps, Houston, we have a problem\")\n\t})\n\tw := PerformRequest(router, \"GET\", \"/recovery\")\n\tassert.Equal(t, http.StatusBadRequest, w.Code)\n\tassert.Contains(t, buffer.String(), \"panic recovered\")\n\tassert.Contains(t, buffer.String(), \"Oupps, Houston, we have a problem\")\n\tassert.Contains(t, buffer.String(), t.Name())\n\tassert.NotContains(t, buffer.String(), \"GET /recovery\")\n\tSetMode(DebugMode)\n\tw = PerformRequest(router, \"GET\", \"/recovery\")\n\tassert.Equal(t, http.StatusBadRequest, w.Code)\n\tassert.Contains(t, buffer.String(), \"GET /recovery\")\n\tassert.Equal(t, strings.Repeat(\"Oupps, Houston, we have a problem\", 2), errBuffer.String())\n\tSetMode(TestMode)\n}","nodeType":"FunctionDeclaration","column":0,"line":0,"doc":null,"receiver":null,"name":{"children":[],"start":5858,"end":5898,"code":"TestRecoveryWithWriterWithCustomRecovery","nodeType":"Identifier","column":0,"line":0,"namePos":5858,"name":"TestRecoveryWithWriterWithCustomRecovery","object":null},"type":{"children":[],"start":5853,"end":5912,"code":"func(t *testing.T)","nodeType":"FunctionType","column":0,"line":0,"Function":5853,"TypeParams":null,"Params":{"children":[],"start":5898,"end":5912,"code":"","nodeType":"FieldList","column":0,"line":0,"opening":5898,"list":[{"children":[],"start":5899,"end":5911,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":[{"children":[],"start":5899,"end":5900,"code":"t","nodeType":"Identifier","column":0,"line":0,"namePos":5899,"name":"t","object":null}],"type":{"children":[],"start":5901,"end":5911,"code":"*testing.T","nodeType":"StarExpression","column":0,"line":0,"star":5901,"expression":{"children":[],"start":5902,"end":5911,"code":"testing.T","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":5902,"end":5909,"code":"testing","nodeType":"Identifier","column":0,"line":0,"namePos":5902,"name":"testing","object":null},"sel":{"children":[],"start":5910,"end":5911,"code":"T","nodeType":"Identifier","column":0,"line":0,"namePos":5910,"name":"T","object":null}}},"tag":null,"comment":null}],"closing":5911},"Results":null},"body":{"children":[],"start":5913,"end":7005,"code":"{\n\terrBuffer := new(strings.Builder)\n\tbuffer := new(strings.Builder)\n\trouter := New()\n\tDefaultErrorWriter = buffer\n\thandleRecovery := func(c *Context, err any) {\n\t\terrBuffer.WriteString(err.(string))\n\t\tc.AbortWithStatus(http.StatusBadRequest)\n\t}\n\trouter.Use(RecoveryWithWriter(DefaultErrorWriter, handleRecovery))\n\trouter.GET(\"/recovery\", func(_ *Context) {\n\t\tpanic(\"Oupps, Houston, we have a problem\")\n\t})\n\tw := PerformRequest(router, \"GET\", \"/recovery\")\n\tassert.Equal(t, http.StatusBadRequest, w.Code)\n\tassert.Contains(t, buffer.String(), \"panic recovered\")\n\tassert.Contains(t, buffer.String(), \"Oupps, Houston, we have a problem\")\n\tassert.Contains(t, buffer.String(), t.Name())\n\tassert.NotContains(t, buffer.String(), \"GET /recovery\")\n\tSetMode(DebugMode)\n\tw = PerformRequest(router, \"GET\", \"/recovery\")\n\tassert.Equal(t, http.StatusBadRequest, w.Code)\n\tassert.Contains(t, buffer.String(), \"GET /recovery\")\n\tassert.Equal(t, strings.Repeat(\"Oupps, Houston, we have a problem\", 2), errBuffer.String())\n\tSetMode(TestMode)\n}","nodeType":"BlockStatement","column":0,"line":0,"lbrace":5913,"list":[{"children":[],"start":5916,"end":5949,"code":"errBuffer := new(strings.Builder)","nodeType":"AssignStatement","column":0,"line":0,"lhs":[{"children":[],"start":5916,"end":5925,"code":"errBuffer","nodeType":"Identifier","column":0,"line":0,"namePos":5916,"name":"errBuffer","object":null}],"tokenPos":5926,"token":47,"rhs":[{"children":[],"start":5929,"end":5949,"code":"new(strings.Builder)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":5929,"end":5932,"code":"new","nodeType":"Identifier","column":0,"line":0,"namePos":5929,"name":"new","object":null},"lparen":0,"args":[{"children":[],"start":5933,"end":5948,"code":"strings.Builder","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":5933,"end":5940,"code":"strings","nodeType":"Identifier","column":0,"line":0,"namePos":5933,"name":"strings","object":null},"sel":{"children":[],"start":5941,"end":5948,"code":"Builder","nodeType":"Identifier","column":0,"line":0,"namePos":5941,"name":"Builder","object":null}}],"ellipsis":0,"rparen":0}]},{"children":[],"start":5951,"end":5981,"code":"buffer := new(strings.Builder)","nodeType":"AssignStatement","column":0,"line":0,"lhs":[{"children":[],"start":5951,"end":5957,"code":"buffer","nodeType":"Identifier","column":0,"line":0,"namePos":5951,"name":"buffer","object":null}],"tokenPos":5958,"token":47,"rhs":[{"children":[],"start":5961,"end":5981,"code":"new(strings.Builder)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":5961,"end":5964,"code":"new","nodeType":"Identifier","column":0,"line":0,"namePos":5961,"name":"new","object":null},"lparen":0,"args":[{"children":[],"start":5965,"end":5980,"code":"strings.Builder","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":5965,"end":5972,"code":"strings","nodeType":"Identifier","column":0,"line":0,"namePos":5965,"name":"strings","object":null},"sel":{"children":[],"start":5973,"end":5980,"code":"Builder","nodeType":"Identifier","column":0,"line":0,"namePos":5973,"name":"Builder","object":null}}],"ellipsis":0,"rparen":0}]},{"children":[],"start":5983,"end":5998,"code":"router := New()","nodeType":"AssignStatement","column":0,"line":0,"lhs":[{"children":[],"start":5983,"end":5989,"code":"router","nodeType":"Identifier","column":0,"line":0,"namePos":5983,"name":"router","object":null}],"tokenPos":5990,"token":47,"rhs":[{"children":[],"start":5993,"end":5998,"code":"New()","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":5993,"end":5996,"code":"New","nodeType":"Identifier","column":0,"line":0,"namePos":5993,"name":"New","object":null},"lparen":0,"args":[],"ellipsis":0,"rparen":0}]},{"children":[],"start":6000,"end":6027,"code":"DefaultErrorWriter = buffer","nodeType":"AssignStatement","column":0,"line":0,"lhs":[{"children":[],"start":6000,"end":6018,"code":"DefaultErrorWriter","nodeType":"Identifier","column":0,"line":0,"namePos":6000,"name":"DefaultErrorWriter","object":null}],"tokenPos":6019,"token":42,"rhs":[{"children":[],"start":6021,"end":6027,"code":"buffer","nodeType":"Identifier","column":0,"line":0,"namePos":6021,"name":"buffer","object":null}]},{"children":[],"start":6029,"end":6158,"code":"handleRecovery := func(c *Context, err any) {\n\terrBuffer.WriteString(err.(string))\n\tc.AbortWithStatus(http.StatusBadRequest)\n}","nodeType":"AssignStatement","column":0,"line":0,"lhs":[{"children":[],"start":6029,"end":6043,"code":"handleRecovery","nodeType":"Identifier","column":0,"line":0,"namePos":6029,"name":"handleRecovery","object":null}],"tokenPos":6044,"token":47,"rhs":[{"children":[],"start":6047,"end":6158,"code":"func(c *Context, err any) {\n\terrBuffer.WriteString(err.(string))\n\tc.AbortWithStatus(http.StatusBadRequest)\n}","nodeType":"FunctionLiteral","column":0,"line":0,"type":{"children":[],"start":6047,"end":6072,"code":"func(c *Context, err any)","nodeType":"FunctionType","column":0,"line":0,"Function":6047,"TypeParams":null,"Params":{"children":[],"start":6051,"end":6072,"code":"","nodeType":"FieldList","column":0,"line":0,"opening":6051,"list":[{"children":[],"start":6052,"end":6062,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":[{"children":[],"start":6052,"end":6053,"code":"c","nodeType":"Identifier","column":0,"line":0,"namePos":6052,"name":"c","object":null}],"type":{"children":[],"start":6054,"end":6062,"code":"*Context","nodeType":"StarExpression","column":0,"line":0,"star":6054,"expression":{"children":[],"start":6055,"end":6062,"code":"Context","nodeType":"Identifier","column":0,"line":0,"namePos":6055,"name":"Context","object":null}},"tag":null,"comment":null},{"children":[],"start":6064,"end":6071,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":[{"children":[],"start":6064,"end":6067,"code":"err","nodeType":"Identifier","column":0,"line":0,"namePos":6064,"name":"err","object":null}],"type":{"children":[],"start":6068,"end":6071,"code":"any","nodeType":"Identifier","column":0,"line":0,"namePos":6068,"name":"any","object":null},"tag":null,"comment":null}],"closing":6071},"Results":null},"body":{"children":[],"start":6073,"end":6158,"code":"{\n\terrBuffer.WriteString(err.(string))\n\tc.AbortWithStatus(http.StatusBadRequest)\n}","nodeType":"BlockStatement","column":0,"line":0,"lbrace":6073,"list":[{"children":[],"start":6077,"end":6112,"code":"errBuffer.WriteString(err.(string))","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":6077,"end":6112,"code":"errBuffer.WriteString(err.(string))","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":6077,"end":6098,"code":"errBuffer.WriteString","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":6077,"end":6086,"code":"errBuffer","nodeType":"Identifier","column":0,"line":0,"namePos":6077,"name":"errBuffer","object":null},"sel":{"children":[],"start":6087,"end":6098,"code":"WriteString","nodeType":"Identifier","column":0,"line":0,"namePos":6087,"name":"WriteString","object":null}},"lparen":0,"args":[{"children":[],"start":6099,"end":6111,"code":"err.(string)","nodeType":"TypeAssertExpression","column":0,"line":0,"expression":{"children":[],"start":6099,"end":6102,"code":"err","nodeType":"Identifier","column":0,"line":0,"namePos":6099,"name":"err","object":null},"lparen":6103,"type":{"children":[],"start":6104,"end":6110,"code":"string","nodeType":"Identifier","column":0,"line":0,"namePos":6104,"name":"string","object":null},"rparen":6110}],"ellipsis":0,"rparen":0}},{"children":[],"start":6115,"end":6155,"code":"c.AbortWithStatus(http.StatusBadRequest)","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":6115,"end":6155,"code":"c.AbortWithStatus(http.StatusBadRequest)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":6115,"end":6132,"code":"c.AbortWithStatus","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":6115,"end":6116,"code":"c","nodeType":"Identifier","column":0,"line":0,"namePos":6115,"name":"c","object":null},"sel":{"children":[],"start":6117,"end":6132,"code":"AbortWithStatus","nodeType":"Identifier","column":0,"line":0,"namePos":6117,"name":"AbortWithStatus","object":null}},"lparen":0,"args":[{"children":[],"start":6133,"end":6154,"code":"http.StatusBadRequest","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":6133,"end":6137,"code":"http","nodeType":"Identifier","column":0,"line":0,"namePos":6133,"name":"http","object":null},"sel":{"children":[],"start":6138,"end":6154,"code":"StatusBadRequest","nodeType":"Identifier","column":0,"line":0,"namePos":6138,"name":"StatusBadRequest","object":null}}],"ellipsis":0,"rparen":0}}],"rbrace":6157}}]},{"children":[],"start":6160,"end":6226,"code":"router.Use(RecoveryWithWriter(DefaultErrorWriter, handleRecovery))","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":6160,"end":6226,"code":"router.Use(RecoveryWithWriter(DefaultErrorWriter, handleRecovery))","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":6160,"end":6170,"code":"router.Use","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":6160,"end":6166,"code":"router","nodeType":"Identifier","column":0,"line":0,"namePos":6160,"name":"router","object":null},"sel":{"children":[],"start":6167,"end":6170,"code":"Use","nodeType":"Identifier","column":0,"line":0,"namePos":6167,"name":"Use","object":null}},"lparen":0,"args":[{"children":[],"start":6171,"end":6225,"code":"RecoveryWithWriter(DefaultErrorWriter, handleRecovery)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":6171,"end":6189,"code":"RecoveryWithWriter","nodeType":"Identifier","column":0,"line":0,"namePos":6171,"name":"RecoveryWithWriter","object":null},"lparen":0,"args":[{"children":[],"start":6190,"end":6208,"code":"DefaultErrorWriter","nodeType":"Identifier","column":0,"line":0,"namePos":6190,"name":"DefaultErrorWriter","object":null},{"children":[],"start":6210,"end":6224,"code":"handleRecovery","nodeType":"Identifier","column":0,"line":0,"namePos":6210,"name":"handleRecovery","object":null}],"ellipsis":0,"rparen":0}],"ellipsis":0,"rparen":0}},{"children":[],"start":6228,"end":6319,"code":"router.GET(\"/recovery\", func(_ *Context) {\n\tpanic(\"Oupps, Houston, we have a problem\")\n})","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":6228,"end":6319,"code":"router.GET(\"/recovery\", func(_ *Context) {\n\tpanic(\"Oupps, Houston, we have a problem\")\n})","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":6228,"end":6238,"code":"router.GET","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":6228,"end":6234,"code":"router","nodeType":"Identifier","column":0,"line":0,"namePos":6228,"name":"router","object":null},"sel":{"children":[],"start":6235,"end":6238,"code":"GET","nodeType":"Identifier","column":0,"line":0,"namePos":6235,"name":"GET","object":null}},"lparen":0,"args":[{"children":[],"start":6239,"end":6250,"code":"\"/recovery\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":6239,"kind":9,"value":"\"/recovery\""},{"children":[],"start":6252,"end":6318,"code":"func(_ *Context) {\n\tpanic(\"Oupps, Houston, we have a problem\")\n}","nodeType":"FunctionLiteral","column":0,"line":0,"type":{"children":[],"start":6252,"end":6268,"code":"func(_ *Context)","nodeType":"FunctionType","column":0,"line":0,"Function":6252,"TypeParams":null,"Params":{"children":[],"start":6256,"end":6268,"code":"","nodeType":"FieldList","column":0,"line":0,"opening":6256,"list":[{"children":[],"start":6257,"end":6267,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":[{"children":[],"start":6257,"end":6258,"code":"_","nodeType":"Identifier","column":0,"line":0,"namePos":6257,"name":"_","object":null}],"type":{"children":[],"start":6259,"end":6267,"code":"*Context","nodeType":"StarExpression","column":0,"line":0,"star":6259,"expression":{"children":[],"start":6260,"end":6267,"code":"Context","nodeType":"Identifier","column":0,"line":0,"namePos":6260,"name":"Context","object":null}},"tag":null,"comment":null}],"closing":6267},"Results":null},"body":{"children":[],"start":6269,"end":6318,"code":"{\n\tpanic(\"Oupps, Houston, we have a problem\")\n}","nodeType":"BlockStatement","column":0,"line":0,"lbrace":6269,"list":[{"children":[],"start":6273,"end":6315,"code":"panic(\"Oupps, Houston, we have a problem\")","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":6273,"end":6315,"code":"panic(\"Oupps, Houston, we have a problem\")","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":6273,"end":6278,"code":"panic","nodeType":"Identifier","column":0,"line":0,"namePos":6273,"name":"panic","object":null},"lparen":0,"args":[{"children":[],"start":6279,"end":6314,"code":"\"Oupps, Houston, we have a problem\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":6279,"kind":9,"value":"\"Oupps, Houston, we have a problem\""}],"ellipsis":0,"rparen":0}}],"rbrace":6317}}],"ellipsis":0,"rparen":0}},{"children":[],"start":6329,"end":6376,"code":"w := PerformRequest(router, \"GET\", \"/recovery\")","nodeType":"AssignStatement","column":0,"line":0,"lhs":[{"children":[],"start":6329,"end":6330,"code":"w","nodeType":"Identifier","column":0,"line":0,"namePos":6329,"name":"w","object":null}],"tokenPos":6331,"token":47,"rhs":[{"children":[],"start":6334,"end":6376,"code":"PerformRequest(router, \"GET\", \"/recovery\")","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":6334,"end":6348,"code":"PerformRequest","nodeType":"Identifier","column":0,"line":0,"namePos":6334,"name":"PerformRequest","object":null},"lparen":0,"args":[{"children":[],"start":6349,"end":6355,"code":"router","nodeType":"Identifier","column":0,"line":0,"namePos":6349,"name":"router","object":null},{"children":[],"start":6357,"end":6362,"code":"\"GET\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":6357,"kind":9,"value":"\"GET\""},{"children":[],"start":6364,"end":6375,"code":"\"/recovery\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":6364,"kind":9,"value":"\"/recovery\""}],"ellipsis":0,"rparen":0}]},{"children":[],"start":6387,"end":6433,"code":"assert.Equal(t, http.StatusBadRequest, w.Code)","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":6387,"end":6433,"code":"assert.Equal(t, http.StatusBadRequest, w.Code)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":6387,"end":6399,"code":"assert.Equal","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":6387,"end":6393,"code":"assert","nodeType":"Identifier","column":0,"line":0,"namePos":6387,"name":"assert","object":null},"sel":{"children":[],"start":6394,"end":6399,"code":"Equal","nodeType":"Identifier","column":0,"line":0,"namePos":6394,"name":"Equal","object":null}},"lparen":0,"args":[{"children":[],"start":6400,"end":6401,"code":"t","nodeType":"Identifier","column":0,"line":0,"namePos":6400,"name":"t","object":null},{"children":[],"start":6403,"end":6424,"code":"http.StatusBadRequest","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":6403,"end":6407,"code":"http","nodeType":"Identifier","column":0,"line":0,"namePos":6403,"name":"http","object":null},"sel":{"children":[],"start":6408,"end":6424,"code":"StatusBadRequest","nodeType":"Identifier","column":0,"line":0,"namePos":6408,"name":"StatusBadRequest","object":null}},{"children":[],"start":6426,"end":6432,"code":"w.Code","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":6426,"end":6427,"code":"w","nodeType":"Identifier","column":0,"line":0,"namePos":6426,"name":"w","object":null},"sel":{"children":[],"start":6428,"end":6432,"code":"Code","nodeType":"Identifier","column":0,"line":0,"namePos":6428,"name":"Code","object":null}}],"ellipsis":0,"rparen":0}},{"children":[],"start":6435,"end":6489,"code":"assert.Contains(t, buffer.String(), \"panic recovered\")","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":6435,"end":6489,"code":"assert.Contains(t, buffer.String(), \"panic recovered\")","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":6435,"end":6450,"code":"assert.Contains","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":6435,"end":6441,"code":"assert","nodeType":"Identifier","column":0,"line":0,"namePos":6435,"name":"assert","object":null},"sel":{"children":[],"start":6442,"end":6450,"code":"Contains","nodeType":"Identifier","column":0,"line":0,"namePos":6442,"name":"Contains","object":null}},"lparen":0,"args":[{"children":[],"start":6451,"end":6452,"code":"t","nodeType":"Identifier","column":0,"line":0,"namePos":6451,"name":"t","object":null},{"children":[],"start":6454,"end":6469,"code":"buffer.String()","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":6454,"end":6467,"code":"buffer.String","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":6454,"end":6460,"code":"buffer","nodeType":"Identifier","column":0,"line":0,"namePos":6454,"name":"buffer","object":null},"sel":{"children":[],"start":6461,"end":6467,"code":"String","nodeType":"Identifier","column":0,"line":0,"namePos":6461,"name":"String","object":null}},"lparen":0,"args":[],"ellipsis":0,"rparen":0},{"children":[],"start":6471,"end":6488,"code":"\"panic recovered\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":6471,"kind":9,"value":"\"panic recovered\""}],"ellipsis":0,"rparen":0}},{"children":[],"start":6491,"end":6563,"code":"assert.Contains(t, buffer.String(), \"Oupps, Houston, we have a problem\")","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":6491,"end":6563,"code":"assert.Contains(t, buffer.String(), \"Oupps, Houston, we have a problem\")","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":6491,"end":6506,"code":"assert.Contains","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":6491,"end":6497,"code":"assert","nodeType":"Identifier","column":0,"line":0,"namePos":6491,"name":"assert","object":null},"sel":{"children":[],"start":6498,"end":6506,"code":"Contains","nodeType":"Identifier","column":0,"line":0,"namePos":6498,"name":"Contains","object":null}},"lparen":0,"args":[{"children":[],"start":6507,"end":6508,"code":"t","nodeType":"Identifier","column":0,"line":0,"namePos":6507,"name":"t","object":null},{"children":[],"start":6510,"end":6525,"code":"buffer.String()","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":6510,"end":6523,"code":"buffer.String","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":6510,"end":6516,"code":"buffer","nodeType":"Identifier","column":0,"line":0,"namePos":6510,"name":"buffer","object":null},"sel":{"children":[],"start":6517,"end":6523,"code":"String","nodeType":"Identifier","column":0,"line":0,"namePos":6517,"name":"String","object":null}},"lparen":0,"args":[],"ellipsis":0,"rparen":0},{"children":[],"start":6527,"end":6562,"code":"\"Oupps, Houston, we have a problem\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":6527,"kind":9,"value":"\"Oupps, Houston, we have a problem\""}],"ellipsis":0,"rparen":0}},{"children":[],"start":6565,"end":6610,"code":"assert.Contains(t, buffer.String(), t.Name())","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":6565,"end":6610,"code":"assert.Contains(t, buffer.String(), t.Name())","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":6565,"end":6580,"code":"assert.Contains","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":6565,"end":6571,"code":"assert","nodeType":"Identifier","column":0,"line":0,"namePos":6565,"name":"assert","object":null},"sel":{"children":[],"start":6572,"end":6580,"code":"Contains","nodeType":"Identifier","column":0,"line":0,"namePos":6572,"name":"Contains","object":null}},"lparen":0,"args":[{"children":[],"start":6581,"end":6582,"code":"t","nodeType":"Identifier","column":0,"line":0,"namePos":6581,"name":"t","object":null},{"children":[],"start":6584,"end":6599,"code":"buffer.String()","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":6584,"end":6597,"code":"buffer.String","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":6584,"end":6590,"code":"buffer","nodeType":"Identifier","column":0,"line":0,"namePos":6584,"name":"buffer","object":null},"sel":{"children":[],"start":6591,"end":6597,"code":"String","nodeType":"Identifier","column":0,"line":0,"namePos":6591,"name":"String","object":null}},"lparen":0,"args":[],"ellipsis":0,"rparen":0},{"children":[],"start":6601,"end":6609,"code":"t.Name()","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":6601,"end":6607,"code":"t.Name","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":6601,"end":6602,"code":"t","nodeType":"Identifier","column":0,"line":0,"namePos":6601,"name":"t","object":null},"sel":{"children":[],"start":6603,"end":6607,"code":"Name","nodeType":"Identifier","column":0,"line":0,"namePos":6603,"name":"Name","object":null}},"lparen":0,"args":[],"ellipsis":0,"rparen":0}],"ellipsis":0,"rparen":0}},{"children":[],"start":6612,"end":6667,"code":"assert.NotContains(t, buffer.String(), \"GET /recovery\")","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":6612,"end":6667,"code":"assert.NotContains(t, buffer.String(), \"GET /recovery\")","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":6612,"end":6630,"code":"assert.NotContains","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":6612,"end":6618,"code":"assert","nodeType":"Identifier","column":0,"line":0,"namePos":6612,"name":"assert","object":null},"sel":{"children":[],"start":6619,"end":6630,"code":"NotContains","nodeType":"Identifier","column":0,"line":0,"namePos":6619,"name":"NotContains","object":null}},"lparen":0,"args":[{"children":[],"start":6631,"end":6632,"code":"t","nodeType":"Identifier","column":0,"line":0,"namePos":6631,"name":"t","object":null},{"children":[],"start":6634,"end":6649,"code":"buffer.String()","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":6634,"end":6647,"code":"buffer.String","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":6634,"end":6640,"code":"buffer","nodeType":"Identifier","column":0,"line":0,"namePos":6634,"name":"buffer","object":null},"sel":{"children":[],"start":6641,"end":6647,"code":"String","nodeType":"Identifier","column":0,"line":0,"namePos":6641,"name":"String","object":null}},"lparen":0,"args":[],"ellipsis":0,"rparen":0},{"children":[],"start":6651,"end":6666,"code":"\"GET /recovery\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":6651,"kind":9,"value":"\"GET /recovery\""}],"ellipsis":0,"rparen":0}},{"children":[],"start":6704,"end":6722,"code":"SetMode(DebugMode)","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":6704,"end":6722,"code":"SetMode(DebugMode)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":6704,"end":6711,"code":"SetMode","nodeType":"Identifier","column":0,"line":0,"namePos":6704,"name":"SetMode","object":null},"lparen":0,"args":[{"children":[],"start":6712,"end":6721,"code":"DebugMode","nodeType":"Identifier","column":0,"line":0,"namePos":6712,"name":"DebugMode","object":null}],"ellipsis":0,"rparen":0}},{"children":[],"start":6732,"end":6778,"code":"w = PerformRequest(router, \"GET\", \"/recovery\")","nodeType":"AssignStatement","column":0,"line":0,"lhs":[{"children":[],"start":6732,"end":6733,"code":"w","nodeType":"Identifier","column":0,"line":0,"namePos":6732,"name":"w","object":null}],"tokenPos":6734,"token":42,"rhs":[{"children":[],"start":6736,"end":6778,"code":"PerformRequest(router, \"GET\", \"/recovery\")","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":6736,"end":6750,"code":"PerformRequest","nodeType":"Identifier","column":0,"line":0,"namePos":6736,"name":"PerformRequest","object":null},"lparen":0,"args":[{"children":[],"start":6751,"end":6757,"code":"router","nodeType":"Identifier","column":0,"line":0,"namePos":6751,"name":"router","object":null},{"children":[],"start":6759,"end":6764,"code":"\"GET\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":6759,"kind":9,"value":"\"GET\""},{"children":[],"start":6766,"end":6777,"code":"\"/recovery\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":6766,"kind":9,"value":"\"/recovery\""}],"ellipsis":0,"rparen":0}]},{"children":[],"start":6789,"end":6835,"code":"assert.Equal(t, http.StatusBadRequest, w.Code)","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":6789,"end":6835,"code":"assert.Equal(t, http.StatusBadRequest, w.Code)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":6789,"end":6801,"code":"assert.Equal","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":6789,"end":6795,"code":"assert","nodeType":"Identifier","column":0,"line":0,"namePos":6789,"name":"assert","object":null},"sel":{"children":[],"start":6796,"end":6801,"code":"Equal","nodeType":"Identifier","column":0,"line":0,"namePos":6796,"name":"Equal","object":null}},"lparen":0,"args":[{"children":[],"start":6802,"end":6803,"code":"t","nodeType":"Identifier","column":0,"line":0,"namePos":6802,"name":"t","object":null},{"children":[],"start":6805,"end":6826,"code":"http.StatusBadRequest","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":6805,"end":6809,"code":"http","nodeType":"Identifier","column":0,"line":0,"namePos":6805,"name":"http","object":null},"sel":{"children":[],"start":6810,"end":6826,"code":"StatusBadRequest","nodeType":"Identifier","column":0,"line":0,"namePos":6810,"name":"StatusBadRequest","object":null}},{"children":[],"start":6828,"end":6834,"code":"w.Code","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":6828,"end":6829,"code":"w","nodeType":"Identifier","column":0,"line":0,"namePos":6828,"name":"w","object":null},"sel":{"children":[],"start":6830,"end":6834,"code":"Code","nodeType":"Identifier","column":0,"line":0,"namePos":6830,"name":"Code","object":null}}],"ellipsis":0,"rparen":0}},{"children":[],"start":6837,"end":6889,"code":"assert.Contains(t, buffer.String(), \"GET /recovery\")","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":6837,"end":6889,"code":"assert.Contains(t, buffer.String(), \"GET /recovery\")","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":6837,"end":6852,"code":"assert.Contains","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":6837,"end":6843,"code":"assert","nodeType":"Identifier","column":0,"line":0,"namePos":6837,"name":"assert","object":null},"sel":{"children":[],"start":6844,"end":6852,"code":"Contains","nodeType":"Identifier","column":0,"line":0,"namePos":6844,"name":"Contains","object":null}},"lparen":0,"args":[{"children":[],"start":6853,"end":6854,"code":"t","nodeType":"Identifier","column":0,"line":0,"namePos":6853,"name":"t","object":null},{"children":[],"start":6856,"end":6871,"code":"buffer.String()","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":6856,"end":6869,"code":"buffer.String","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":6856,"end":6862,"code":"buffer","nodeType":"Identifier","column":0,"line":0,"namePos":6856,"name":"buffer","object":null},"sel":{"children":[],"start":6863,"end":6869,"code":"String","nodeType":"Identifier","column":0,"line":0,"namePos":6863,"name":"String","object":null}},"lparen":0,"args":[],"ellipsis":0,"rparen":0},{"children":[],"start":6873,"end":6888,"code":"\"GET /recovery\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":6873,"kind":9,"value":"\"GET /recovery\""}],"ellipsis":0,"rparen":0}},{"children":[],"start":6892,"end":6983,"code":"assert.Equal(t, strings.Repeat(\"Oupps, Houston, we have a problem\", 2), errBuffer.String())","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":6892,"end":6983,"code":"assert.Equal(t, strings.Repeat(\"Oupps, Houston, we have a problem\", 2), errBuffer.String())","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":6892,"end":6904,"code":"assert.Equal","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":6892,"end":6898,"code":"assert","nodeType":"Identifier","column":0,"line":0,"namePos":6892,"name":"assert","object":null},"sel":{"children":[],"start":6899,"end":6904,"code":"Equal","nodeType":"Identifier","column":0,"line":0,"namePos":6899,"name":"Equal","object":null}},"lparen":0,"args":[{"children":[],"start":6905,"end":6906,"code":"t","nodeType":"Identifier","column":0,"line":0,"namePos":6905,"name":"t","object":null},{"children":[],"start":6908,"end":6962,"code":"strings.Repeat(\"Oupps, Houston, we have a problem\", 2)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":6908,"end":6922,"code":"strings.Repeat","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":6908,"end":6915,"code":"strings","nodeType":"Identifier","column":0,"line":0,"namePos":6908,"name":"strings","object":null},"sel":{"children":[],"start":6916,"end":6922,"code":"Repeat","nodeType":"Identifier","column":0,"line":0,"namePos":6916,"name":"Repeat","object":null}},"lparen":0,"args":[{"children":[],"start":6923,"end":6958,"code":"\"Oupps, Houston, we have a problem\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":6923,"kind":9,"value":"\"Oupps, Houston, we have a problem\""},{"children":[],"start":6960,"end":6961,"code":"2","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":6960,"kind":5,"value":"2"}],"ellipsis":0,"rparen":0},{"children":[],"start":6964,"end":6982,"code":"errBuffer.String()","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":6964,"end":6980,"code":"errBuffer.String","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":6964,"end":6973,"code":"errBuffer","nodeType":"Identifier","column":0,"line":0,"namePos":6964,"name":"errBuffer","object":null},"sel":{"children":[],"start":6974,"end":6980,"code":"String","nodeType":"Identifier","column":0,"line":0,"namePos":6974,"name":"String","object":null}},"lparen":0,"args":[],"ellipsis":0,"rparen":0}],"ellipsis":0,"rparen":0}},{"children":[],"start":6986,"end":7003,"code":"SetMode(TestMode)","nodeType":"ExpressionStatement","column":0,"line":0,"Expression":{"children":[],"start":6986,"end":7003,"code":"SetMode(TestMode)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":6986,"end":6993,"code":"SetMode","nodeType":"Identifier","column":0,"line":0,"namePos":6986,"name":"SetMode","object":null},"lparen":0,"args":[{"children":[],"start":6994,"end":7002,"code":"TestMode","nodeType":"Identifier","column":0,"line":0,"namePos":6994,"name":"TestMode","object":null}],"ellipsis":0,"rparen":0}}],"rbrace":7004}}],"fileStart":1,"fileEnd":7006,"scope":{"outer":null,"objects":null},"imports":[],"unresolved":[],"comments":[],"goVersion":""}