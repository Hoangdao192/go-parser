{"children":[],"start":160,"end":683,"code":"package binding\n\nimport (\n\t\"bytes\"\n\t\"io\"\n\t\"net/http\"\n\t\"gopkg.in/yaml.v3\"\n)\n\ntype yamlBinding struct{}\n\nfunc (yamlBinding) Name() string {\n\treturn \"yaml\"\n}\nfunc (yamlBinding) Bind(req *http.Request, obj any) error {\n\treturn decodeYAML(req.Body, obj)\n}\nfunc (yamlBinding) BindBody(body []byte, obj any) error {\n\treturn decodeYAML(bytes.NewReader(body), obj)\n}\nfunc decodeYAML(r io.Reader, obj any) error {\n\tdecoder := yaml.NewDecoder(r)\n\tif err := decoder.Decode(obj); err != nil {\n\t\treturn err\n\t}\n\treturn validate(obj)\n}\n","nodeType":"File","column":0,"line":0,"doc":null,"package":160,"name":{"children":[],"start":168,"end":175,"code":"binding","nodeType":"Identifier","column":0,"line":0,"namePos":168,"name":"binding","object":null},"declarations":[{"children":[],"start":177,"end":235,"code":"import (\n\t\"bytes\"\n\t\"io\"\n\t\"net/http\"\n\t\"gopkg.in/yaml.v3\"\n)","nodeType":"GenericDeclaration","column":0,"line":0,"doc":null,"tokenPosition":177,"token":75,"lparen":184,"specifications":[{"children":[],"start":187,"end":194,"code":"\"bytes\"","nodeType":"ImportSpecification","column":0,"line":0,"doc":null,"name":null,"path":{"children":[],"start":187,"end":194,"code":"\"bytes\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":187,"kind":9,"value":"\"bytes\""},"comment":null,"endPosition":0},{"children":[],"start":196,"end":200,"code":"\"io\"","nodeType":"ImportSpecification","column":0,"line":0,"doc":null,"name":null,"path":{"children":[],"start":196,"end":200,"code":"\"io\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":196,"kind":9,"value":"\"io\""},"comment":null,"endPosition":0},{"children":[],"start":202,"end":212,"code":"\"net/http\"","nodeType":"ImportSpecification","column":0,"line":0,"doc":null,"name":null,"path":{"children":[],"start":202,"end":212,"code":"\"net/http\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":202,"kind":9,"value":"\"net/http\""},"comment":null,"endPosition":0},{"children":[],"start":215,"end":233,"code":"\"gopkg.in/yaml.v3\"","nodeType":"ImportSpecification","column":0,"line":0,"doc":null,"name":null,"path":{"children":[],"start":215,"end":233,"code":"\"gopkg.in/yaml.v3\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":215,"kind":9,"value":"\"gopkg.in/yaml.v3\""},"comment":null,"endPosition":0}],"rparen":234},{"children":[],"start":237,"end":262,"code":"type yamlBinding struct{}","nodeType":"GenericDeclaration","column":0,"line":0,"doc":null,"tokenPosition":237,"token":84,"lparen":0,"specifications":[{"children":[],"start":242,"end":262,"code":"yamlBinding struct{}","nodeType":"TypeSpecification","column":0,"line":0,"doc":null,"name":{"children":[],"start":242,"end":253,"code":"yamlBinding","nodeType":"Identifier","column":0,"line":0,"namePos":242,"name":"yamlBinding","object":null},"typeParams":null,"assign":0,"type":{"children":[],"start":254,"end":262,"code":"struct{}","nodeType":"StructType","column":0,"line":0,"struct":254,"fields":{"children":[],"start":260,"end":262,"code":"","nodeType":"FieldList","column":0,"line":0,"opening":260,"list":[],"closing":261},"incomplete":false},"comment":null}],"rparen":0},{"children":[],"start":264,"end":315,"code":"func (yamlBinding) Name() string {\n\treturn \"yaml\"\n}","nodeType":"FunctionDeclaration","column":0,"line":0,"doc":null,"receiver":{"children":[],"start":269,"end":282,"code":"","nodeType":"FieldList","column":0,"line":0,"opening":269,"list":[{"children":[],"start":270,"end":281,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":null,"type":{"children":[],"start":270,"end":281,"code":"yamlBinding","nodeType":"Identifier","column":0,"line":0,"namePos":270,"name":"yamlBinding","object":null},"tag":null,"comment":null}],"closing":281},"name":{"children":[],"start":283,"end":287,"code":"Name","nodeType":"Identifier","column":0,"line":0,"namePos":283,"name":"Name","object":null},"type":{"children":[],"start":264,"end":296,"code":"func() string","nodeType":"FunctionType","column":0,"line":0,"Function":264,"TypeParams":null,"Params":{"children":[],"start":287,"end":289,"code":"","nodeType":"FieldList","column":0,"line":0,"opening":287,"list":[],"closing":288},"Results":{"children":[],"start":290,"end":296,"code":"","nodeType":"FieldList","column":0,"line":0,"opening":0,"list":[{"children":[],"start":290,"end":296,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":null,"type":{"children":[],"start":290,"end":296,"code":"string","nodeType":"Identifier","column":0,"line":0,"namePos":290,"name":"string","object":null},"tag":null,"comment":null}],"closing":0}},"body":{"children":[],"start":297,"end":315,"code":"{\n\treturn \"yaml\"\n}","nodeType":"BlockStatement","column":0,"line":0,"lbrace":297,"list":[{"children":[],"start":300,"end":313,"code":"return \"yaml\"","nodeType":"ReturnStatement","column":0,"line":0,"return":300,"results":[{"children":[],"start":307,"end":313,"code":"\"yaml\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":307,"kind":9,"value":"\"yaml\""}]}],"rbrace":314}},{"children":[],"start":317,"end":412,"code":"func (yamlBinding) Bind(req *http.Request, obj any) error {\n\treturn decodeYAML(req.Body, obj)\n}","nodeType":"FunctionDeclaration","column":0,"line":0,"doc":null,"receiver":{"children":[],"start":322,"end":335,"code":"","nodeType":"FieldList","column":0,"line":0,"opening":322,"list":[{"children":[],"start":323,"end":334,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":null,"type":{"children":[],"start":323,"end":334,"code":"yamlBinding","nodeType":"Identifier","column":0,"line":0,"namePos":323,"name":"yamlBinding","object":null},"tag":null,"comment":null}],"closing":334},"name":{"children":[],"start":336,"end":340,"code":"Bind","nodeType":"Identifier","column":0,"line":0,"namePos":336,"name":"Bind","object":null},"type":{"children":[],"start":317,"end":374,"code":"func(req *http.Request, obj any) error","nodeType":"FunctionType","column":0,"line":0,"Function":317,"TypeParams":null,"Params":{"children":[],"start":340,"end":368,"code":"","nodeType":"FieldList","column":0,"line":0,"opening":340,"list":[{"children":[],"start":341,"end":358,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":[{"children":[],"start":341,"end":344,"code":"req","nodeType":"Identifier","column":0,"line":0,"namePos":341,"name":"req","object":null}],"type":{"children":[],"start":345,"end":358,"code":"*http.Request","nodeType":"StarExpression","column":0,"line":0,"star":345,"expression":{"children":[],"start":346,"end":358,"code":"http.Request","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":346,"end":350,"code":"http","nodeType":"Identifier","column":0,"line":0,"namePos":346,"name":"http","object":null},"sel":{"children":[],"start":351,"end":358,"code":"Request","nodeType":"Identifier","column":0,"line":0,"namePos":351,"name":"Request","object":null}}},"tag":null,"comment":null},{"children":[],"start":360,"end":367,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":[{"children":[],"start":360,"end":363,"code":"obj","nodeType":"Identifier","column":0,"line":0,"namePos":360,"name":"obj","object":null}],"type":{"children":[],"start":364,"end":367,"code":"any","nodeType":"Identifier","column":0,"line":0,"namePos":364,"name":"any","object":null},"tag":null,"comment":null}],"closing":367},"Results":{"children":[],"start":369,"end":374,"code":"","nodeType":"FieldList","column":0,"line":0,"opening":0,"list":[{"children":[],"start":369,"end":374,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":null,"type":{"children":[],"start":369,"end":374,"code":"error","nodeType":"Identifier","column":0,"line":0,"namePos":369,"name":"error","object":null},"tag":null,"comment":null}],"closing":0}},"body":{"children":[],"start":375,"end":412,"code":"{\n\treturn decodeYAML(req.Body, obj)\n}","nodeType":"BlockStatement","column":0,"line":0,"lbrace":375,"list":[{"children":[],"start":378,"end":410,"code":"return decodeYAML(req.Body, obj)","nodeType":"ReturnStatement","column":0,"line":0,"return":378,"results":[{"children":[],"start":385,"end":410,"code":"decodeYAML(req.Body, obj)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":385,"end":395,"code":"decodeYAML","nodeType":"Identifier","column":0,"line":0,"namePos":385,"name":"decodeYAML","object":null},"lparen":0,"args":[{"children":[],"start":396,"end":404,"code":"req.Body","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":396,"end":399,"code":"req","nodeType":"Identifier","column":0,"line":0,"namePos":396,"name":"req","object":null},"sel":{"children":[],"start":400,"end":404,"code":"Body","nodeType":"Identifier","column":0,"line":0,"namePos":400,"name":"Body","object":null}},{"children":[],"start":406,"end":409,"code":"obj","nodeType":"Identifier","column":0,"line":0,"namePos":406,"name":"obj","object":null}],"ellipsis":0,"rparen":0}]}],"rbrace":411}},{"children":[],"start":414,"end":520,"code":"func (yamlBinding) BindBody(body []byte, obj any) error {\n\treturn decodeYAML(bytes.NewReader(body), obj)\n}","nodeType":"FunctionDeclaration","column":0,"line":0,"doc":null,"receiver":{"children":[],"start":419,"end":432,"code":"","nodeType":"FieldList","column":0,"line":0,"opening":419,"list":[{"children":[],"start":420,"end":431,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":null,"type":{"children":[],"start":420,"end":431,"code":"yamlBinding","nodeType":"Identifier","column":0,"line":0,"namePos":420,"name":"yamlBinding","object":null},"tag":null,"comment":null}],"closing":431},"name":{"children":[],"start":433,"end":441,"code":"BindBody","nodeType":"Identifier","column":0,"line":0,"namePos":433,"name":"BindBody","object":null},"type":{"children":[],"start":414,"end":469,"code":"func(body []byte, obj any) error","nodeType":"FunctionType","column":0,"line":0,"Function":414,"TypeParams":null,"Params":{"children":[],"start":441,"end":463,"code":"","nodeType":"FieldList","column":0,"line":0,"opening":441,"list":[{"children":[],"start":442,"end":453,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":[{"children":[],"start":442,"end":446,"code":"body","nodeType":"Identifier","column":0,"line":0,"namePos":442,"name":"body","object":null}],"type":{"children":[],"start":447,"end":453,"code":"[]byte","nodeType":"ArrayType","column":0,"line":0,"leftBracket":447,"length":null,"element":{"children":[],"start":449,"end":453,"code":"byte","nodeType":"Identifier","column":0,"line":0,"namePos":449,"name":"byte","object":null}},"tag":null,"comment":null},{"children":[],"start":455,"end":462,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":[{"children":[],"start":455,"end":458,"code":"obj","nodeType":"Identifier","column":0,"line":0,"namePos":455,"name":"obj","object":null}],"type":{"children":[],"start":459,"end":462,"code":"any","nodeType":"Identifier","column":0,"line":0,"namePos":459,"name":"any","object":null},"tag":null,"comment":null}],"closing":462},"Results":{"children":[],"start":464,"end":469,"code":"","nodeType":"FieldList","column":0,"line":0,"opening":0,"list":[{"children":[],"start":464,"end":469,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":null,"type":{"children":[],"start":464,"end":469,"code":"error","nodeType":"Identifier","column":0,"line":0,"namePos":464,"name":"error","object":null},"tag":null,"comment":null}],"closing":0}},"body":{"children":[],"start":470,"end":520,"code":"{\n\treturn decodeYAML(bytes.NewReader(body), obj)\n}","nodeType":"BlockStatement","column":0,"line":0,"lbrace":470,"list":[{"children":[],"start":473,"end":518,"code":"return decodeYAML(bytes.NewReader(body), obj)","nodeType":"ReturnStatement","column":0,"line":0,"return":473,"results":[{"children":[],"start":480,"end":518,"code":"decodeYAML(bytes.NewReader(body), obj)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":480,"end":490,"code":"decodeYAML","nodeType":"Identifier","column":0,"line":0,"namePos":480,"name":"decodeYAML","object":null},"lparen":0,"args":[{"children":[],"start":491,"end":512,"code":"bytes.NewReader(body)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":491,"end":506,"code":"bytes.NewReader","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":491,"end":496,"code":"bytes","nodeType":"Identifier","column":0,"line":0,"namePos":491,"name":"bytes","object":null},"sel":{"children":[],"start":497,"end":506,"code":"NewReader","nodeType":"Identifier","column":0,"line":0,"namePos":497,"name":"NewReader","object":null}},"lparen":0,"args":[{"children":[],"start":507,"end":511,"code":"body","nodeType":"Identifier","column":0,"line":0,"namePos":507,"name":"body","object":null}],"ellipsis":0,"rparen":0},{"children":[],"start":514,"end":517,"code":"obj","nodeType":"Identifier","column":0,"line":0,"namePos":514,"name":"obj","object":null}],"ellipsis":0,"rparen":0}]}],"rbrace":519}},{"children":[],"start":522,"end":683,"code":"func decodeYAML(r io.Reader, obj any) error {\n\tdecoder := yaml.NewDecoder(r)\n\tif err := decoder.Decode(obj); err != nil {\n\t\treturn err\n\t}\n\treturn validate(obj)\n}","nodeType":"FunctionDeclaration","column":0,"line":0,"doc":null,"receiver":null,"name":{"children":[],"start":527,"end":537,"code":"decodeYAML","nodeType":"Identifier","column":0,"line":0,"namePos":527,"name":"decodeYAML","object":null},"type":{"children":[],"start":522,"end":565,"code":"func(r io.Reader, obj any) error","nodeType":"FunctionType","column":0,"line":0,"Function":522,"TypeParams":null,"Params":{"children":[],"start":537,"end":559,"code":"","nodeType":"FieldList","column":0,"line":0,"opening":537,"list":[{"children":[],"start":538,"end":549,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":[{"children":[],"start":538,"end":539,"code":"r","nodeType":"Identifier","column":0,"line":0,"namePos":538,"name":"r","object":null}],"type":{"children":[],"start":540,"end":549,"code":"io.Reader","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":540,"end":542,"code":"io","nodeType":"Identifier","column":0,"line":0,"namePos":540,"name":"io","object":null},"sel":{"children":[],"start":543,"end":549,"code":"Reader","nodeType":"Identifier","column":0,"line":0,"namePos":543,"name":"Reader","object":null}},"tag":null,"comment":null},{"children":[],"start":551,"end":558,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":[{"children":[],"start":551,"end":554,"code":"obj","nodeType":"Identifier","column":0,"line":0,"namePos":551,"name":"obj","object":null}],"type":{"children":[],"start":555,"end":558,"code":"any","nodeType":"Identifier","column":0,"line":0,"namePos":555,"name":"any","object":null},"tag":null,"comment":null}],"closing":558},"Results":{"children":[],"start":560,"end":565,"code":"","nodeType":"FieldList","column":0,"line":0,"opening":0,"list":[{"children":[],"start":560,"end":565,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":null,"type":{"children":[],"start":560,"end":565,"code":"error","nodeType":"Identifier","column":0,"line":0,"namePos":560,"name":"error","object":null},"tag":null,"comment":null}],"closing":0}},"body":{"children":[],"start":566,"end":683,"code":"{\n\tdecoder := yaml.NewDecoder(r)\n\tif err := decoder.Decode(obj); err != nil {\n\t\treturn err\n\t}\n\treturn validate(obj)\n}","nodeType":"BlockStatement","column":0,"line":0,"lbrace":566,"list":[{"children":[],"start":569,"end":598,"code":"decoder := yaml.NewDecoder(r)","nodeType":"AssignStatement","column":0,"line":0,"lhs":[{"children":[],"start":569,"end":576,"code":"decoder","nodeType":"Identifier","column":0,"line":0,"namePos":569,"name":"decoder","object":null}],"tokenPos":577,"token":47,"rhs":[{"children":[],"start":580,"end":598,"code":"yaml.NewDecoder(r)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":580,"end":595,"code":"yaml.NewDecoder","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":580,"end":584,"code":"yaml","nodeType":"Identifier","column":0,"line":0,"namePos":580,"name":"yaml","object":null},"sel":{"children":[],"start":585,"end":595,"code":"NewDecoder","nodeType":"Identifier","column":0,"line":0,"namePos":585,"name":"NewDecoder","object":null}},"lparen":0,"args":[{"children":[],"start":596,"end":597,"code":"r","nodeType":"Identifier","column":0,"line":0,"namePos":596,"name":"r","object":null}],"ellipsis":0,"rparen":0}]},{"children":[],"start":600,"end":659,"code":"if err := decoder.Decode(obj); err != nil {\n\treturn err\n}","nodeType":"IfStatement","column":0,"line":0,"if":600,"initialization":{"children":[],"start":603,"end":629,"code":"err := decoder.Decode(obj)","nodeType":"AssignStatement","column":0,"line":0,"lhs":[{"children":[],"start":603,"end":606,"code":"err","nodeType":"Identifier","column":0,"line":0,"namePos":603,"name":"err","object":null}],"tokenPos":607,"token":47,"rhs":[{"children":[],"start":610,"end":629,"code":"decoder.Decode(obj)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":610,"end":624,"code":"decoder.Decode","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":610,"end":617,"code":"decoder","nodeType":"Identifier","column":0,"line":0,"namePos":610,"name":"decoder","object":null},"sel":{"children":[],"start":618,"end":624,"code":"Decode","nodeType":"Identifier","column":0,"line":0,"namePos":618,"name":"Decode","object":null}},"lparen":0,"args":[{"children":[],"start":625,"end":628,"code":"obj","nodeType":"Identifier","column":0,"line":0,"namePos":625,"name":"obj","object":null}],"ellipsis":0,"rparen":0}]},"condition":{"children":[],"start":631,"end":641,"code":"err != nil","nodeType":"BinaryExpression","column":0,"line":0,"leftExpression":{"children":[],"start":631,"end":634,"code":"err","nodeType":"Identifier","column":0,"line":0,"namePos":631,"name":"err","object":null},"opPos":635,"op":44,"rightExpression":{"children":[],"start":638,"end":641,"code":"nil","nodeType":"Identifier","column":0,"line":0,"namePos":638,"name":"nil","object":null}},"body":{"children":[],"start":642,"end":659,"code":"{\n\treturn err\n}","nodeType":"BlockStatement","column":0,"line":0,"lbrace":642,"list":[{"children":[],"start":646,"end":656,"code":"return err","nodeType":"ReturnStatement","column":0,"line":0,"return":646,"results":[{"children":[],"start":653,"end":656,"code":"err","nodeType":"Identifier","column":0,"line":0,"namePos":653,"name":"err","object":null}]}],"rbrace":658},"else":null},{"children":[],"start":661,"end":681,"code":"return validate(obj)","nodeType":"ReturnStatement","column":0,"line":0,"return":661,"results":[{"children":[],"start":668,"end":681,"code":"validate(obj)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":668,"end":676,"code":"validate","nodeType":"Identifier","column":0,"line":0,"namePos":668,"name":"validate","object":null},"lparen":0,"args":[{"children":[],"start":677,"end":680,"code":"obj","nodeType":"Identifier","column":0,"line":0,"namePos":677,"name":"obj","object":null}],"ellipsis":0,"rparen":0}]}],"rbrace":682}}],"fileStart":1,"fileEnd":684,"scope":{"outer":null,"objects":null},"imports":[],"unresolved":[],"comments":[],"goVersion":""}