{"children":[],"start":191,"end":768,"code":"package binding\n\nimport (\n\t\"bytes\"\n\t\"io\"\n\t\"net/http\"\n\t\"github.com/ugorji/go/codec\"\n)\n\ntype msgpackBinding struct{}\n\nfunc (msgpackBinding) Name() string {\n\treturn \"msgpack\"\n}\nfunc (msgpackBinding) Bind(req *http.Request, obj any) error {\n\treturn decodeMsgPack(req.Body, obj)\n}\nfunc (msgpackBinding) BindBody(body []byte, obj any) error {\n\treturn decodeMsgPack(bytes.NewReader(body), obj)\n}\nfunc decodeMsgPack(r io.Reader, obj any) error {\n\tcdc := new(codec.MsgpackHandle)\n\tif err := codec.NewDecoder(r, cdc).Decode(\u0026obj); err != nil {\n\t\treturn err\n\t}\n\treturn validate(obj)\n}\n","nodeType":"File","column":0,"line":0,"doc":null,"package":191,"name":{"children":[],"start":199,"end":206,"code":"binding","nodeType":"Identifier","column":0,"line":0,"namePos":199,"name":"binding","object":null},"declarations":[{"children":[],"start":208,"end":276,"code":"import (\n\t\"bytes\"\n\t\"io\"\n\t\"net/http\"\n\t\"github.com/ugorji/go/codec\"\n)","nodeType":"GenericDeclaration","column":0,"line":0,"doc":null,"tokenPosition":208,"token":75,"lparen":215,"specifications":[{"children":[],"start":218,"end":225,"code":"\"bytes\"","nodeType":"ImportSpecification","column":0,"line":0,"doc":null,"name":null,"path":{"children":[],"start":218,"end":225,"code":"\"bytes\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":218,"kind":9,"value":"\"bytes\""},"comment":null,"endPosition":0},{"children":[],"start":227,"end":231,"code":"\"io\"","nodeType":"ImportSpecification","column":0,"line":0,"doc":null,"name":null,"path":{"children":[],"start":227,"end":231,"code":"\"io\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":227,"kind":9,"value":"\"io\""},"comment":null,"endPosition":0},{"children":[],"start":233,"end":243,"code":"\"net/http\"","nodeType":"ImportSpecification","column":0,"line":0,"doc":null,"name":null,"path":{"children":[],"start":233,"end":243,"code":"\"net/http\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":233,"kind":9,"value":"\"net/http\""},"comment":null,"endPosition":0},{"children":[],"start":246,"end":274,"code":"\"github.com/ugorji/go/codec\"","nodeType":"ImportSpecification","column":0,"line":0,"doc":null,"name":null,"path":{"children":[],"start":246,"end":274,"code":"\"github.com/ugorji/go/codec\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":246,"kind":9,"value":"\"github.com/ugorji/go/codec\""},"comment":null,"endPosition":0}],"rparen":275},{"children":[],"start":278,"end":306,"code":"type msgpackBinding struct{}","nodeType":"GenericDeclaration","column":0,"line":0,"doc":null,"tokenPosition":278,"token":84,"lparen":0,"specifications":[{"children":[],"start":283,"end":306,"code":"msgpackBinding struct{}","nodeType":"TypeSpecification","column":0,"line":0,"doc":null,"name":{"children":[],"start":283,"end":297,"code":"msgpackBinding","nodeType":"Identifier","column":0,"line":0,"namePos":283,"name":"msgpackBinding","object":null},"typeParams":null,"assign":0,"type":{"children":[],"start":298,"end":306,"code":"struct{}","nodeType":"StructType","column":0,"line":0,"struct":298,"fields":{"children":[],"start":304,"end":306,"code":"","nodeType":"FieldList","column":0,"line":0,"opening":304,"list":[],"closing":305},"incomplete":false},"comment":null}],"rparen":0},{"children":[],"start":308,"end":365,"code":"func (msgpackBinding) Name() string {\n\treturn \"msgpack\"\n}","nodeType":"FunctionDeclaration","column":0,"line":0,"doc":null,"receiver":{"children":[],"start":313,"end":329,"code":"","nodeType":"FieldList","column":0,"line":0,"opening":313,"list":[{"children":[],"start":314,"end":328,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":null,"type":{"children":[],"start":314,"end":328,"code":"msgpackBinding","nodeType":"Identifier","column":0,"line":0,"namePos":314,"name":"msgpackBinding","object":null},"tag":null,"comment":null}],"closing":328},"name":{"children":[],"start":330,"end":334,"code":"Name","nodeType":"Identifier","column":0,"line":0,"namePos":330,"name":"Name","object":null},"type":{"children":[],"start":308,"end":343,"code":"func() string","nodeType":"FunctionType","column":0,"line":0,"Function":308,"TypeParams":null,"Params":{"children":[],"start":334,"end":336,"code":"","nodeType":"FieldList","column":0,"line":0,"opening":334,"list":[],"closing":335},"Results":{"children":[],"start":337,"end":343,"code":"","nodeType":"FieldList","column":0,"line":0,"opening":0,"list":[{"children":[],"start":337,"end":343,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":null,"type":{"children":[],"start":337,"end":343,"code":"string","nodeType":"Identifier","column":0,"line":0,"namePos":337,"name":"string","object":null},"tag":null,"comment":null}],"closing":0}},"body":{"children":[],"start":344,"end":365,"code":"{\n\treturn \"msgpack\"\n}","nodeType":"BlockStatement","column":0,"line":0,"lbrace":344,"list":[{"children":[],"start":347,"end":363,"code":"return \"msgpack\"","nodeType":"ReturnStatement","column":0,"line":0,"return":347,"results":[{"children":[],"start":354,"end":363,"code":"\"msgpack\"","nodeType":"BasicLiteral","column":0,"line":0,"valuePos":354,"kind":9,"value":"\"msgpack\""}]}],"rbrace":364}},{"children":[],"start":367,"end":468,"code":"func (msgpackBinding) Bind(req *http.Request, obj any) error {\n\treturn decodeMsgPack(req.Body, obj)\n}","nodeType":"FunctionDeclaration","column":0,"line":0,"doc":null,"receiver":{"children":[],"start":372,"end":388,"code":"","nodeType":"FieldList","column":0,"line":0,"opening":372,"list":[{"children":[],"start":373,"end":387,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":null,"type":{"children":[],"start":373,"end":387,"code":"msgpackBinding","nodeType":"Identifier","column":0,"line":0,"namePos":373,"name":"msgpackBinding","object":null},"tag":null,"comment":null}],"closing":387},"name":{"children":[],"start":389,"end":393,"code":"Bind","nodeType":"Identifier","column":0,"line":0,"namePos":389,"name":"Bind","object":null},"type":{"children":[],"start":367,"end":427,"code":"func(req *http.Request, obj any) error","nodeType":"FunctionType","column":0,"line":0,"Function":367,"TypeParams":null,"Params":{"children":[],"start":393,"end":421,"code":"","nodeType":"FieldList","column":0,"line":0,"opening":393,"list":[{"children":[],"start":394,"end":411,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":[{"children":[],"start":394,"end":397,"code":"req","nodeType":"Identifier","column":0,"line":0,"namePos":394,"name":"req","object":null}],"type":{"children":[],"start":398,"end":411,"code":"*http.Request","nodeType":"StarExpression","column":0,"line":0,"star":398,"expression":{"children":[],"start":399,"end":411,"code":"http.Request","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":399,"end":403,"code":"http","nodeType":"Identifier","column":0,"line":0,"namePos":399,"name":"http","object":null},"sel":{"children":[],"start":404,"end":411,"code":"Request","nodeType":"Identifier","column":0,"line":0,"namePos":404,"name":"Request","object":null}}},"tag":null,"comment":null},{"children":[],"start":413,"end":420,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":[{"children":[],"start":413,"end":416,"code":"obj","nodeType":"Identifier","column":0,"line":0,"namePos":413,"name":"obj","object":null}],"type":{"children":[],"start":417,"end":420,"code":"any","nodeType":"Identifier","column":0,"line":0,"namePos":417,"name":"any","object":null},"tag":null,"comment":null}],"closing":420},"Results":{"children":[],"start":422,"end":427,"code":"","nodeType":"FieldList","column":0,"line":0,"opening":0,"list":[{"children":[],"start":422,"end":427,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":null,"type":{"children":[],"start":422,"end":427,"code":"error","nodeType":"Identifier","column":0,"line":0,"namePos":422,"name":"error","object":null},"tag":null,"comment":null}],"closing":0}},"body":{"children":[],"start":428,"end":468,"code":"{\n\treturn decodeMsgPack(req.Body, obj)\n}","nodeType":"BlockStatement","column":0,"line":0,"lbrace":428,"list":[{"children":[],"start":431,"end":466,"code":"return decodeMsgPack(req.Body, obj)","nodeType":"ReturnStatement","column":0,"line":0,"return":431,"results":[{"children":[],"start":438,"end":466,"code":"decodeMsgPack(req.Body, obj)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":438,"end":451,"code":"decodeMsgPack","nodeType":"Identifier","column":0,"line":0,"namePos":438,"name":"decodeMsgPack","object":null},"lparen":0,"args":[{"children":[],"start":452,"end":460,"code":"req.Body","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":452,"end":455,"code":"req","nodeType":"Identifier","column":0,"line":0,"namePos":452,"name":"req","object":null},"sel":{"children":[],"start":456,"end":460,"code":"Body","nodeType":"Identifier","column":0,"line":0,"namePos":456,"name":"Body","object":null}},{"children":[],"start":462,"end":465,"code":"obj","nodeType":"Identifier","column":0,"line":0,"namePos":462,"name":"obj","object":null}],"ellipsis":0,"rparen":0}]}],"rbrace":467}},{"children":[],"start":470,"end":582,"code":"func (msgpackBinding) BindBody(body []byte, obj any) error {\n\treturn decodeMsgPack(bytes.NewReader(body), obj)\n}","nodeType":"FunctionDeclaration","column":0,"line":0,"doc":null,"receiver":{"children":[],"start":475,"end":491,"code":"","nodeType":"FieldList","column":0,"line":0,"opening":475,"list":[{"children":[],"start":476,"end":490,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":null,"type":{"children":[],"start":476,"end":490,"code":"msgpackBinding","nodeType":"Identifier","column":0,"line":0,"namePos":476,"name":"msgpackBinding","object":null},"tag":null,"comment":null}],"closing":490},"name":{"children":[],"start":492,"end":500,"code":"BindBody","nodeType":"Identifier","column":0,"line":0,"namePos":492,"name":"BindBody","object":null},"type":{"children":[],"start":470,"end":528,"code":"func(body []byte, obj any) error","nodeType":"FunctionType","column":0,"line":0,"Function":470,"TypeParams":null,"Params":{"children":[],"start":500,"end":522,"code":"","nodeType":"FieldList","column":0,"line":0,"opening":500,"list":[{"children":[],"start":501,"end":512,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":[{"children":[],"start":501,"end":505,"code":"body","nodeType":"Identifier","column":0,"line":0,"namePos":501,"name":"body","object":null}],"type":{"children":[],"start":506,"end":512,"code":"[]byte","nodeType":"ArrayType","column":0,"line":0,"leftBracket":506,"length":null,"element":{"children":[],"start":508,"end":512,"code":"byte","nodeType":"Identifier","column":0,"line":0,"namePos":508,"name":"byte","object":null}},"tag":null,"comment":null},{"children":[],"start":514,"end":521,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":[{"children":[],"start":514,"end":517,"code":"obj","nodeType":"Identifier","column":0,"line":0,"namePos":514,"name":"obj","object":null}],"type":{"children":[],"start":518,"end":521,"code":"any","nodeType":"Identifier","column":0,"line":0,"namePos":518,"name":"any","object":null},"tag":null,"comment":null}],"closing":521},"Results":{"children":[],"start":523,"end":528,"code":"","nodeType":"FieldList","column":0,"line":0,"opening":0,"list":[{"children":[],"start":523,"end":528,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":null,"type":{"children":[],"start":523,"end":528,"code":"error","nodeType":"Identifier","column":0,"line":0,"namePos":523,"name":"error","object":null},"tag":null,"comment":null}],"closing":0}},"body":{"children":[],"start":529,"end":582,"code":"{\n\treturn decodeMsgPack(bytes.NewReader(body), obj)\n}","nodeType":"BlockStatement","column":0,"line":0,"lbrace":529,"list":[{"children":[],"start":532,"end":580,"code":"return decodeMsgPack(bytes.NewReader(body), obj)","nodeType":"ReturnStatement","column":0,"line":0,"return":532,"results":[{"children":[],"start":539,"end":580,"code":"decodeMsgPack(bytes.NewReader(body), obj)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":539,"end":552,"code":"decodeMsgPack","nodeType":"Identifier","column":0,"line":0,"namePos":539,"name":"decodeMsgPack","object":null},"lparen":0,"args":[{"children":[],"start":553,"end":574,"code":"bytes.NewReader(body)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":553,"end":568,"code":"bytes.NewReader","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":553,"end":558,"code":"bytes","nodeType":"Identifier","column":0,"line":0,"namePos":553,"name":"bytes","object":null},"sel":{"children":[],"start":559,"end":568,"code":"NewReader","nodeType":"Identifier","column":0,"line":0,"namePos":559,"name":"NewReader","object":null}},"lparen":0,"args":[{"children":[],"start":569,"end":573,"code":"body","nodeType":"Identifier","column":0,"line":0,"namePos":569,"name":"body","object":null}],"ellipsis":0,"rparen":0},{"children":[],"start":576,"end":579,"code":"obj","nodeType":"Identifier","column":0,"line":0,"namePos":576,"name":"obj","object":null}],"ellipsis":0,"rparen":0}]}],"rbrace":581}},{"children":[],"start":584,"end":768,"code":"func decodeMsgPack(r io.Reader, obj any) error {\n\tcdc := new(codec.MsgpackHandle)\n\tif err := codec.NewDecoder(r, cdc).Decode(\u0026obj); err != nil {\n\t\treturn err\n\t}\n\treturn validate(obj)\n}","nodeType":"FunctionDeclaration","column":0,"line":0,"doc":null,"receiver":null,"name":{"children":[],"start":589,"end":602,"code":"decodeMsgPack","nodeType":"Identifier","column":0,"line":0,"namePos":589,"name":"decodeMsgPack","object":null},"type":{"children":[],"start":584,"end":630,"code":"func(r io.Reader, obj any) error","nodeType":"FunctionType","column":0,"line":0,"Function":584,"TypeParams":null,"Params":{"children":[],"start":602,"end":624,"code":"","nodeType":"FieldList","column":0,"line":0,"opening":602,"list":[{"children":[],"start":603,"end":614,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":[{"children":[],"start":603,"end":604,"code":"r","nodeType":"Identifier","column":0,"line":0,"namePos":603,"name":"r","object":null}],"type":{"children":[],"start":605,"end":614,"code":"io.Reader","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":605,"end":607,"code":"io","nodeType":"Identifier","column":0,"line":0,"namePos":605,"name":"io","object":null},"sel":{"children":[],"start":608,"end":614,"code":"Reader","nodeType":"Identifier","column":0,"line":0,"namePos":608,"name":"Reader","object":null}},"tag":null,"comment":null},{"children":[],"start":616,"end":623,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":[{"children":[],"start":616,"end":619,"code":"obj","nodeType":"Identifier","column":0,"line":0,"namePos":616,"name":"obj","object":null}],"type":{"children":[],"start":620,"end":623,"code":"any","nodeType":"Identifier","column":0,"line":0,"namePos":620,"name":"any","object":null},"tag":null,"comment":null}],"closing":623},"Results":{"children":[],"start":625,"end":630,"code":"","nodeType":"FieldList","column":0,"line":0,"opening":0,"list":[{"children":[],"start":625,"end":630,"code":"","nodeType":"Field","column":0,"line":0,"doc":null,"names":null,"type":{"children":[],"start":625,"end":630,"code":"error","nodeType":"Identifier","column":0,"line":0,"namePos":625,"name":"error","object":null},"tag":null,"comment":null}],"closing":0}},"body":{"children":[],"start":631,"end":768,"code":"{\n\tcdc := new(codec.MsgpackHandle)\n\tif err := codec.NewDecoder(r, cdc).Decode(\u0026obj); err != nil {\n\t\treturn err\n\t}\n\treturn validate(obj)\n}","nodeType":"BlockStatement","column":0,"line":0,"lbrace":631,"list":[{"children":[],"start":634,"end":665,"code":"cdc := new(codec.MsgpackHandle)","nodeType":"AssignStatement","column":0,"line":0,"lhs":[{"children":[],"start":634,"end":637,"code":"cdc","nodeType":"Identifier","column":0,"line":0,"namePos":634,"name":"cdc","object":null}],"tokenPos":638,"token":47,"rhs":[{"children":[],"start":641,"end":665,"code":"new(codec.MsgpackHandle)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":641,"end":644,"code":"new","nodeType":"Identifier","column":0,"line":0,"namePos":641,"name":"new","object":null},"lparen":0,"args":[{"children":[],"start":645,"end":664,"code":"codec.MsgpackHandle","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":645,"end":650,"code":"codec","nodeType":"Identifier","column":0,"line":0,"namePos":645,"name":"codec","object":null},"sel":{"children":[],"start":651,"end":664,"code":"MsgpackHandle","nodeType":"Identifier","column":0,"line":0,"namePos":651,"name":"MsgpackHandle","object":null}}],"ellipsis":0,"rparen":0}]},{"children":[],"start":667,"end":744,"code":"if err := codec.NewDecoder(r, cdc).Decode(\u0026obj); err != nil {\n\treturn err\n}","nodeType":"IfStatement","column":0,"line":0,"if":667,"initialization":{"children":[],"start":670,"end":714,"code":"err := codec.NewDecoder(r, cdc).Decode(\u0026obj)","nodeType":"AssignStatement","column":0,"line":0,"lhs":[{"children":[],"start":670,"end":673,"code":"err","nodeType":"Identifier","column":0,"line":0,"namePos":670,"name":"err","object":null}],"tokenPos":674,"token":47,"rhs":[{"children":[],"start":677,"end":714,"code":"codec.NewDecoder(r, cdc).Decode(\u0026obj)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":677,"end":708,"code":"codec.NewDecoder(r, cdc).Decode","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":677,"end":701,"code":"codec.NewDecoder(r, cdc)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":677,"end":693,"code":"codec.NewDecoder","nodeType":"SelectorExpression","column":0,"line":0,"expression":{"children":[],"start":677,"end":682,"code":"codec","nodeType":"Identifier","column":0,"line":0,"namePos":677,"name":"codec","object":null},"sel":{"children":[],"start":683,"end":693,"code":"NewDecoder","nodeType":"Identifier","column":0,"line":0,"namePos":683,"name":"NewDecoder","object":null}},"lparen":0,"args":[{"children":[],"start":694,"end":695,"code":"r","nodeType":"Identifier","column":0,"line":0,"namePos":694,"name":"r","object":null},{"children":[],"start":697,"end":700,"code":"cdc","nodeType":"Identifier","column":0,"line":0,"namePos":697,"name":"cdc","object":null}],"ellipsis":0,"rparen":0},"sel":{"children":[],"start":702,"end":708,"code":"Decode","nodeType":"Identifier","column":0,"line":0,"namePos":702,"name":"Decode","object":null}},"lparen":0,"args":[{"children":[],"start":709,"end":713,"code":"\u0026obj","nodeType":"UnaryExpression","column":0,"line":0,"opPos":709,"op":17,"expression":{"children":[],"start":710,"end":713,"code":"obj","nodeType":"Identifier","column":0,"line":0,"namePos":710,"name":"obj","object":null}}],"ellipsis":0,"rparen":0}]},"condition":{"children":[],"start":716,"end":726,"code":"err != nil","nodeType":"BinaryExpression","column":0,"line":0,"leftExpression":{"children":[],"start":716,"end":719,"code":"err","nodeType":"Identifier","column":0,"line":0,"namePos":716,"name":"err","object":null},"opPos":720,"op":44,"rightExpression":{"children":[],"start":723,"end":726,"code":"nil","nodeType":"Identifier","column":0,"line":0,"namePos":723,"name":"nil","object":null}},"body":{"children":[],"start":727,"end":744,"code":"{\n\treturn err\n}","nodeType":"BlockStatement","column":0,"line":0,"lbrace":727,"list":[{"children":[],"start":731,"end":741,"code":"return err","nodeType":"ReturnStatement","column":0,"line":0,"return":731,"results":[{"children":[],"start":738,"end":741,"code":"err","nodeType":"Identifier","column":0,"line":0,"namePos":738,"name":"err","object":null}]}],"rbrace":743},"else":null},{"children":[],"start":746,"end":766,"code":"return validate(obj)","nodeType":"ReturnStatement","column":0,"line":0,"return":746,"results":[{"children":[],"start":753,"end":766,"code":"validate(obj)","nodeType":"CallExpression","column":0,"line":0,"function":{"children":[],"start":753,"end":761,"code":"validate","nodeType":"Identifier","column":0,"line":0,"namePos":753,"name":"validate","object":null},"lparen":0,"args":[{"children":[],"start":762,"end":765,"code":"obj","nodeType":"Identifier","column":0,"line":0,"namePos":762,"name":"obj","object":null}],"ellipsis":0,"rparen":0}]}],"rbrace":767}}],"fileStart":1,"fileEnd":769,"scope":{"outer":null,"objects":null},"imports":[],"unresolved":[],"comments":[],"goVersion":""}